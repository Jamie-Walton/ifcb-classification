{"ast":null,"code":"var _jsxFileName = \"/Users/jamiewalton/Desktop/Classification_v2/frontend/src/App.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport Draggable from 'react-draggable';\nimport loader from \"./loader.GIF\";\nimport toTop from \"./icons/to-top.png\";\nimport selectWhite from \"./icons/select-white.png\";\nimport dropdown from \"./icons/dropdown.png\";\n/*\nimport calendar from \"./icons/calendar.png\";\nimport dropup from \"./icons/dropup.png\";\nimport selectGray from \"./icons/select-gray.png\";\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass TimeSeriesControl extends React.Component {\n  handleDropdown() {\n    document.getElementById('timeseries_dropdown').classList.toggle('show');\n    document.getElementById('timeseries_label').classList.toggle('hide');\n    document.getElementById('timeseries_bar').classList.toggle('accommodate-dropdown');\n  }\n\n  render() {\n    const options = this.props.options.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n      onClick: () => this.props.onClick(x),\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        id: x,\n        children: x\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 59\n      }, this)\n    }, x, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 9\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time\",\n        id: \"timeseries_bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"time-selection\",\n          children: this.props.timeseries\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: dropdown,\n          className: \"time-icon\",\n          alt: 'Select time series',\n          onClick: () => this.handleDropdown()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-dropdown\",\n        id: \"timeseries_dropdown\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"timeseries-option\",\n          children: options\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"time-label\",\n        id: \"timeseries_label\",\n        children: \"Time Series\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass YearControl extends React.Component {\n  handleDropdown() {\n    document.getElementById('year_dropdown').classList.toggle('show');\n    document.getElementById('year_label').classList.toggle('hide');\n    document.getElementById('year_bar').classList.toggle('accommodate-dropdown');\n  }\n\n  render() {\n    const options = this.props.options.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n      onClick: () => this.props.onClick(x),\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        id: x,\n        children: x\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 59\n      }, this)\n    }, x, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time\",\n        id: \"year_bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"time-selection\",\n          children: this.props.year\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: dropdown,\n          className: \"time-icon\",\n          alt: 'Select Year',\n          onClick: () => this.handleDropdown()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-dropdown\",\n        id: \"year_dropdown\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"year-option\",\n          children: options\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"time-label\",\n        id: \"year_label\",\n        children: \"Year\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass DayControl extends React.Component {\n  handleDropdown() {\n    document.getElementById('day_dropdown').classList.toggle('show');\n    document.getElementById('day_label').classList.toggle('hide');\n    document.getElementById('day_bar').classList.toggle('accommodate-dropdown');\n  }\n\n  render() {\n    const options = this.props.options.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n      onClick: () => this.props.onClick(x),\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        id: x,\n        children: x\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 59\n      }, this)\n    }, x, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time\",\n        id: \"day_bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"time-selection\",\n          children: this.props.day\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: dropdown,\n          className: \"time-icon\",\n          alt: 'Select Day',\n          onClick: () => this.handleDropdown()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-dropdown\",\n        id: \"day_dropdown\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"day-option\",\n          children: options\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"time-label\",\n        id: \"day_label\",\n        children: \"Day\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass FileControl extends React.Component {\n  handleDropdown() {\n    document.getElementById('file_dropdown').classList.toggle('show');\n    document.getElementById('file_label').classList.toggle('hide');\n    document.getElementById('file_bar').classList.toggle('accommodate-dropdown');\n  }\n\n  render() {\n    const options = this.props.options.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n      onClick: () => this.props.onClick(x),\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        id: x,\n        children: x\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 59\n      }, this)\n    }, x, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this));\n    var fileName = this.props.file;\n    const file = fileName.slice(9, 12) + ':' + fileName.slice(12, 14) + ':' + fileName.slice(14, 16) + 'Z';\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time\",\n        id: \"file_bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"time-selection\",\n          children: file\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: dropdown,\n          className: \"time-icon\",\n          alt: 'Select File',\n          onClick: () => this.handleDropdown()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-dropdown\",\n        id: \"file_dropdown\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"file-option\",\n          children: options\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"time-label\",\n        id: \"file_label\",\n        children: \"File\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass SetControl extends React.Component {\n  handleDropdown() {\n    document.getElementById('set_dropdown').classList.toggle('show');\n    document.getElementById('set_label').classList.toggle('hide');\n    document.getElementById('set_bar').classList.toggle('accommodate-dropdown');\n  }\n\n  render() {\n    const options = this.props.options.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n      onClick: () => this.props.onClick(x),\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        id: x,\n        children: x\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 59\n      }, this)\n    }, x, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"set\",\n        id: \"set_bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"time-selection\",\n          children: this.props.set\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: dropdown,\n          className: \"time-icon\",\n          alt: 'Select Set',\n          onClick: () => this.handleDropdown()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"set-dropdown\",\n        id: \"set_dropdown\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"set-option\",\n          children: options\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"time-label\",\n        id: \"set_label\",\n        children: \"Set\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass PlanktonImage extends React.Component {\n  render() {\n    const url = this.props.nameSpace + this.props.timestamp + '_' + this.props.ifcb + '_' + this.props.targetNum + '.jpg';\n    return /*#__PURE__*/_jsxDEV(\"img\", {\n      src: url,\n      className: \"image\",\n      alt: this.props.classification,\n      id: this.props.targetNum + '-image',\n      style: {\n        height: String(Number(this.props.width) * Number(this.props.scale) * 0.07) + 'vw'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nclass Plankton extends React.Component {\n  renderImage() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(PlanktonImage, {\n        nameSpace: 'http://128.114.25.154:8888/' + this.props.ifcb + '/',\n        timestamp: this.props.timestamp,\n        ifcb: this.props.ifcb,\n        targetNum: this.props.targetNum,\n        classification: this.props.classification,\n        width: this.props.width,\n        scale: this.props.scale\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"plankton-button\",\n      onClick: () => this.props.onClick(this.props.targetNum),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"plankton\",\n        children: [this.renderImage(), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'id ' + this.props.classification + '-cont',\n          id: this.props.targetNum + '-cont',\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: 'id-text ' + this.props.classification + '-text',\n            id: this.props.targetNum + '-text',\n            children: this.props.classification\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 23\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nclass ClassMenu extends React.Component {\n  render() {\n    const options = this.props.classes.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        id: x,\n        onClick: () => this.props.onClick(x),\n        children: x\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 19\n      }, this)\n    }, x, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"class-menu\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass Micrometer extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(Draggable, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drag-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"micrometer-block\",\n          style: {\n            width: String(34 * Number(this.props.scale) * 0.07) + 'vw'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"micrometer-text\",\n          children: \"10\\xB5m\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass Annotations extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      classes: [],\n      classPicker: 'Unclassified',\n      bin: {\n        timeseries: '',\n        year: '',\n        day: '',\n        file: ''\n      },\n      set: 1,\n      timeSeriesOptions: [],\n      yearOptions: [],\n      dayOptions: [],\n      fileOptions: [],\n      setOptions: [],\n      targets: [],\n      scale: 1\n    };\n  }\n\n  getNewTimeSeries(option) {\n    this.setState({\n      loading: true\n    });\n    axios.get('/process/timeseries/' + option + '/').then(binResponse => {\n      this.setState({\n        bin: binResponse.data.bin,\n        set: binResponse.data.set.number,\n        yearOptions: binResponse.data.options.year_options.reverse(),\n        dayOptions: binResponse.data.options.day_options,\n        fileOptions: binResponse.data.options.file_options,\n        setOptions: binResponse.data.options.set_options\n      });\n      axios.get('/process/targets/' + option + '/' + binResponse.data.bin.file + '/1/').then(targetResponse => {\n        this.setState({\n          targets: targetResponse.data,\n          scale: targetResponse.data[0].scale,\n          loading: false\n        });\n      });\n    });\n  }\n\n  componentDidMount() {\n    axios.get(\"/api/timeseries/\").then(res => {\n      this.setState({\n        timeSeriesOptions: res.data.map(c => c.name)\n      });\n    }).catch(err => console.log(err));\n    axios.get(\"/api/classes/\").then(res => this.setState({\n      classes: res.data.map(c => c.name)\n    })).catch(err => console.log(err));\n    this.getNewTimeSeries('IFCB104');\n  }\n\n  getNewYear(option) {\n    console.log(option);\n  }\n\n  getNewDay(option) {\n    console.log(option);\n  }\n\n  getNewFile(option) {\n    document.getElementById('file_dropdown').classList.toggle('show');\n    document.getElementById('file_label').classList.toggle('hide');\n    document.getElementById('file_bar').classList.toggle('accommodate-dropdown');\n    const file = 'D' + this.state.bin.year + this.state.bin.day.slice(0, 2) + this.state.bin.day.slice(3, 5) + option.slice(0, 3) + option.slice(4, 6) + option.slice(7, 9);\n    this.setState({\n      loading: true,\n      bin: {\n        timeseries: this.state.bin.timeseries,\n        year: this.state.bin.year,\n        day: this.state.bin.day,\n        file: file\n      },\n      set: 1\n    });\n    axios.get('/process/file/' + this.state.bin.timeseries + '/' + file + '/').then(res => this.setState({\n      setOptions: res.data.options.set_options\n    })).catch(err => console.log(err));\n    axios.get('/process/targets/' + this.state.bin.timeseries + '/' + file + '/1/').then(targetResponse => {\n      this.setState({\n        targets: targetResponse.data,\n        scale: targetResponse.data[0].scale,\n        loading: false\n      });\n    });\n  }\n\n  handleNewSet(option) {\n    this.setState({\n      loading: true,\n      set: option,\n      targets: []\n    });\n    axios.get('process/targets/' + this.state.bin.timeseries + '/' + this.state.bin.file + '/' + option + '/').then(res => {\n      this.setState({\n        targets: res.data,\n        scale: res.data[0].scale\n      });\n    }).catch(err => console.log(err));\n    this.setState({\n      loading: false\n    });\n  }\n\n  handleMenuClick(name) {\n    // Fix hover later\n    // Getting error when doing lots of reclassifications? Fix later\n    const ids = document.getElementsByClassName('id');\n    const idTexts = document.getElementsByClassName('id-text');\n\n    for (let i = 0; i < ids.length; i++) {\n      if (ids[i].style.backgroundColor !== '#FFFFFF') {\n        ids[i].style.backgroundColor = '#FFFFFF';\n        idTexts[i].style.color = '#4E4E4E';\n      }\n    }\n\n    for (const target of this.state.targets) {\n      if (target.classification === name) {\n        const container = document.getElementById(target.id);\n        const text = document.getElementById(target.id + '_text');\n        container.style.backgroundColor = '#16609F';\n        text.style.color = '#FFFFFF';\n      }\n    }\n  }\n  /* Fix this entire function later (will need updates to targets and row calls)\n  handleRowClick(row) {\n      for (const sample of this.state.rows[row]) {\n          this.state.targets[sample] = this.state.classPicker;\n          const container = document.getElementById(sample);\n          const text = document.getElementById(sample+'_text');\n          container.style.backgroundColor = '#16609F';\n          text.style.color = '#FFFFFF';\n      }\n      this.setState({targets: this.state.targets});\n  }\n  */\n\n\n  backToTop() {\n    document.body.scrollTop = 0; // For Safari\n\n    document.documentElement.scrollTop = 0;\n  }\n\n  handleSelectAllClick() {\n    const targets = this.state.targets;\n\n    for (let i = 0; i < targets.length; i++) {\n      targets[i].classification = this.state.classPicker;\n      const container = document.getElementById(targets[i].number);\n      const text = document.getElementById(targets[i].number + '_text');\n      container.style.backgroundColor = '#16609F';\n      text.style.color = '#FFFFFF';\n    }\n\n    this.setState({\n      targets: targets\n    });\n  }\n\n  handlePlanktonClick(i) {\n    var targets = this.state.targets;\n\n    const target = obj => {\n      return obj.number === i;\n    };\n\n    const k = targets.findIndex(target);\n    console.log(k);\n    targets[k].classification = this.state.classPicker;\n    this.setState({\n      targets: targets\n    });\n    const container = document.getElementById(targets[k].number);\n    const text = document.getElementById(targets[k].number + '_text');\n    container.style.backgroundColor = '#16609F';\n    text.style.color = '#FFFFFF';\n  }\n\n  renderTimeSeriesControl() {\n    return /*#__PURE__*/_jsxDEV(TimeSeriesControl, {\n      timeseries: this.state.bin.timeseries,\n      options: this.state.timeSeriesOptions,\n      onClick: option => this.getNewTimeSeries(option)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderYearControl() {\n    return /*#__PURE__*/_jsxDEV(YearControl, {\n      year: this.state.bin.year,\n      options: this.state.yearOptions,\n      onClick: option => this.getNewYear(option)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderDayControl() {\n    return /*#__PURE__*/_jsxDEV(DayControl, {\n      day: this.state.bin.day,\n      options: this.state.dayOptions,\n      onClick: option => this.getNewDay(option)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderFileControl() {\n    return /*#__PURE__*/_jsxDEV(FileControl, {\n      file: this.state.bin.file,\n      options: this.state.fileOptions,\n      onClick: option => this.getNewFile(option)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderSetControl() {\n    return /*#__PURE__*/_jsxDEV(SetControl, {\n      set: this.state.set,\n      options: this.state.setOptions,\n      onClick: option => this.handleNewSet(option)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderPlankton(i) {\n    return /*#__PURE__*/_jsxDEV(Plankton, {\n      ifcb: this.state.bin.timeseries,\n      timestamp: this.state.bin.file,\n      id: i,\n      targetNum: this.state.targets[i].number,\n      classification: this.state.targets[i].classification,\n      scale: this.state.targets[i].scale,\n      width: this.state.targets[i].width,\n      onClick: i => this.handlePlanktonClick(i)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 14\n    }, this);\n  }\n\n  renderClassMenu() {\n    return /*#__PURE__*/_jsxDEV(ClassMenu, {\n      classes: this.state.classes,\n      onClick: name => this.handleMenuClick(name)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderMicrometer() {\n    return /*#__PURE__*/_jsxDEV(Micrometer, {\n      scale: this.state.scale\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 14\n    }, this);\n  }\n\n  renderLoader() {\n    console.log('Loading...');\n    return /*#__PURE__*/_jsxDEV(\"img\", {\n      src: loader,\n      alt: \"Loading targets...\",\n      width: \"80\",\n      loop: \"infinite\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 12\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Manual Annotations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-controls\",\n        children: [this.renderTimeSeriesControl(), this.renderYearControl(), this.renderDayControl(), this.renderFileControl(), this.renderSetControl()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"annotations\",\n        children: [this.renderClassMenu(), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"control-box\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"annotation-control\",\n              onClick: () => this.handleSelectAllClick(),\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"select-all\",\n                src: selectWhite,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"control-text\",\n                children: \"Select All\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"annotation-control\",\n              onClick: () => this.handleSelectAllClick(),\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"control-text\",\n                children: \"Undo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 21\n            }, this), this.renderMicrometer()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-grid\",\n            children: [this.state.loading ? this.renderLoader() : this.state.targets.map((target, i) => this.renderPlankton(i)), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: toTop,\n              alt: \"Back to Top\",\n              className: \"to-top\",\n              onClick: () => this.backToTop()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Annotations;","map":{"version":3,"sources":["/Users/jamiewalton/Desktop/Classification_v2/frontend/src/App.js"],"names":["React","axios","Draggable","loader","toTop","selectWhite","dropdown","TimeSeriesControl","Component","handleDropdown","document","getElementById","classList","toggle","render","options","props","map","x","onClick","timeseries","YearControl","year","DayControl","day","FileControl","fileName","file","slice","SetControl","set","PlanktonImage","url","nameSpace","timestamp","ifcb","targetNum","classification","height","String","Number","width","scale","Plankton","renderImage","ClassMenu","classes","Micrometer","Annotations","constructor","state","loading","classPicker","bin","timeSeriesOptions","yearOptions","dayOptions","fileOptions","setOptions","targets","getNewTimeSeries","option","setState","get","then","binResponse","data","number","year_options","reverse","day_options","file_options","set_options","targetResponse","componentDidMount","res","c","name","catch","err","console","log","getNewYear","getNewDay","getNewFile","handleNewSet","handleMenuClick","ids","getElementsByClassName","idTexts","i","length","style","backgroundColor","color","target","container","id","text","backToTop","body","scrollTop","documentElement","handleSelectAllClick","handlePlanktonClick","obj","k","findIndex","renderTimeSeriesControl","renderYearControl","renderDayControl","renderFileControl","renderSetControl","renderPlankton","renderClassMenu","renderMicrometer","renderLoader"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport Draggable from 'react-draggable';\n\nimport loader from \"./loader.GIF\";\nimport toTop from \"./icons/to-top.png\"\nimport selectWhite from \"./icons/select-white.png\";\nimport dropdown from \"./icons/dropdown.png\";\n/*\nimport calendar from \"./icons/calendar.png\";\nimport dropup from \"./icons/dropup.png\";\nimport selectGray from \"./icons/select-gray.png\";\n*/\n\nclass TimeSeriesControl extends React.Component {\n    handleDropdown() {\n        document.getElementById('timeseries_dropdown').classList.toggle('show');\n        document.getElementById('timeseries_label').classList.toggle('hide');\n        document.getElementById('timeseries_bar').classList.toggle('accommodate-dropdown');\n    }\n    \n    render() {\n        const options = this.props.options.map((x) => \n        <li key={x} onClick={() => this.props.onClick(x)}><button id={x}>{x}</button></li>)\n        return (\n            <div>\n                <div className=\"time\" id='timeseries_bar'>\n                    <p className=\"time-selection\">{this.props.timeseries}</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select time series'} onClick={() => this.handleDropdown()}></img>\n                </div>\n                <div className=\"time-dropdown\" id='timeseries_dropdown'>\n                    <ul className=\"timeseries-option\">{options}</ul>\n                </div>\n                <p className=\"time-label\" id='timeseries_label'>Time Series</p>\n            </div>\n        );\n    }\n}\n\nclass YearControl extends React.Component {\n    handleDropdown() {\n        document.getElementById('year_dropdown').classList.toggle('show');\n        document.getElementById('year_label').classList.toggle('hide');\n        document.getElementById('year_bar').classList.toggle('accommodate-dropdown');\n    }\n    \n    render() {\n        const options = this.props.options.map((x) => \n        <li key={x} onClick={() => this.props.onClick(x)}><button id={x}>{x}</button></li>)\n        return(\n            <div>\n                <div className=\"time\" id='year_bar'>\n                    <p className=\"time-selection\">{this.props.year}</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select Year'} onClick={() => this.handleDropdown()}></img>\n                </div>\n                <div className=\"time-dropdown\" id='year_dropdown'>\n                    <ul className=\"year-option\">{options}</ul>\n                </div>\n                <p className=\"time-label\" id='year_label'>Year</p>\n            </div>\n        );\n    }\n}\n\nclass DayControl extends React.Component {\n    handleDropdown() {\n        document.getElementById('day_dropdown').classList.toggle('show');\n        document.getElementById('day_label').classList.toggle('hide');\n        document.getElementById('day_bar').classList.toggle('accommodate-dropdown');\n    }\n    \n    render() {\n        const options = this.props.options.map((x) => \n        <li key={x} onClick={() => this.props.onClick(x)}><button id={x}>{x}</button></li>)\n        return(\n            <div>\n                <div className=\"time\" id='day_bar'>\n                    <p className=\"time-selection\">{this.props.day}</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select Day'} onClick={() => this.handleDropdown()}></img>\n                </div>\n                <div className=\"time-dropdown\" id='day_dropdown'>\n                    <ul className=\"day-option\">{options}</ul>\n                </div>\n                <p className=\"time-label\" id='day_label'>Day</p>\n            </div>\n        );\n    }\n}\n\nclass FileControl extends React.Component {\n    handleDropdown() {\n        document.getElementById('file_dropdown').classList.toggle('show');\n        document.getElementById('file_label').classList.toggle('hide');\n        document.getElementById('file_bar').classList.toggle('accommodate-dropdown');\n    }\n    \n    render() {\n        const options = this.props.options.map((x) => \n        <li key={x} onClick={() => this.props.onClick(x)}><button id={x}>{x}</button></li>)\n        var fileName = this.props.file;\n        const file = fileName.slice(9,12) + ':' + fileName.slice(12,14) + ':' + fileName.slice(14,16) + 'Z';\n        return(\n            <div>\n                <div className=\"time\" id='file_bar'>\n                    <p className=\"time-selection\">{file}</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select File'} onClick={() => this.handleDropdown()}></img>\n                </div>\n                <div className=\"time-dropdown\" id='file_dropdown'>\n                    <ul className=\"file-option\">{options}</ul>\n                </div>\n                <p className=\"time-label\" id='file_label'>File</p>\n            </div>\n        );\n    }\n}\n\nclass SetControl extends React.Component {\n    handleDropdown() {\n        document.getElementById('set_dropdown').classList.toggle('show');\n        document.getElementById('set_label').classList.toggle('hide');\n        document.getElementById('set_bar').classList.toggle('accommodate-dropdown');\n    }\n    \n    render() {\n        const options = this.props.options.map((x) => \n        <li key={x} onClick={() => this.props.onClick(x)}><button id={x}>{x}</button></li>)\n        return(\n            <div>\n                <div className=\"set\" id=\"set_bar\">\n                <p className=\"time-selection\">{this.props.set}</p>\n                <img src={dropdown} className=\"time-icon\"\n                alt={'Select Set'} onClick={() => this.handleDropdown()}></img>\n                </div>\n                <div className=\"set-dropdown\" id='set_dropdown'>\n                    <ul className=\"set-option\">{options}</ul>\n                </div>\n                <p className=\"time-label\" id=\"set_label\">Set</p>\n            </div>\n        );\n    }\n}\n\nclass PlanktonImage extends React.Component {\n\n  render() {\n  const url = this.props.nameSpace + this.props.timestamp + '_' + this.props.ifcb + '_' + this.props.targetNum + '.jpg';\n      return(\n          <img src={url} className=\"image\" \n          alt={this.props.classification} \n          id={this.props.targetNum + '-image'}\n          style={{height: String(Number(this.props.width)*Number(this.props.scale)*0.07)+'vw'}}></img>\n      );\n  }\n}\n\nclass Plankton extends React.Component {\n  \n  renderImage() {  \n    return (\n      <div>\n          <PlanktonImage \n              nameSpace={'http://128.114.25.154:8888/' + this.props.ifcb + '/'}\n              timestamp={this.props.timestamp}\n              ifcb={this.props.ifcb}\n              targetNum={this.props.targetNum}\n              classification={this.props.classification}\n              width={this.props.width}\n              scale={this.props.scale}\n          />\n      </div>\n      );\n  }\n\n  render() {\n      return(\n          <button className=\"plankton-button\" onClick={() => this.props.onClick(this.props.targetNum)}>\n              <div className=\"plankton\">\n                  {this.renderImage()}\n                  <div className={'id ' + this.props.classification + '-cont'} id={this.props.targetNum + '-cont'}>\n                      <p className={'id-text ' + this.props.classification + '-text'} id={this.props.targetNum + '-text'}>{this.props.classification}</p>\n                  </div>\n              </div>\n          </button>\n      );\n  }\n}\n\nclass ClassMenu extends React.Component {\n  render() {\n      const options = this.props.classes.map((x) => \n      <li key={x}><button id={x} onClick={() => this.props.onClick(x)}>{x}</button></li>);\n      return(\n      <div className=\"class-menu\">\n          <ul>{options}</ul>\n      </div>\n      );\n  }\n}\n\nclass Micrometer extends React.Component {\n    render() {\n        return(\n            <Draggable>\n                <div className=\"drag-box\">\n                    <div className=\"micrometer-block\"\n                    style={{width: String(34*Number(this.props.scale)*0.07)+'vw'}}></div>\n                    <p className=\"micrometer-text\">10m</p>\n                </div>\n            </Draggable>\n        );\n    }\n}\n\nclass Annotations extends React.Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n          loading: true,\n          classes: [],\n          classPicker: 'Unclassified',\n          bin: {timeseries:'', year:'', day:'', file:''},\n          set: 1,\n          timeSeriesOptions: [],\n          yearOptions: [],\n          dayOptions: [],\n          fileOptions: [],\n          setOptions: [],\n          targets: [],\n          scale: 1,\n      }\n  }\n\n  getNewTimeSeries(option) {\n    this.setState({loading: true});\n    axios\n        .get('/process/timeseries/' + option + '/')\n        .then((binResponse) => {\n            this.setState({ \n                bin: binResponse.data.bin,\n                set: binResponse.data.set.number,\n                yearOptions: binResponse.data.options.year_options.reverse(),\n                dayOptions: binResponse.data.options.day_options,\n                fileOptions: binResponse.data.options.file_options,\n                setOptions: binResponse.data.options.set_options,\n            });\n            axios\n                .get('/process/targets/' + option + '/' + binResponse.data.bin.file + '/1/')\n                .then((targetResponse) => {\n                    this.setState({ \n                        targets: targetResponse.data,\n                        scale: targetResponse.data[0].scale,\n                        loading: false,\n                     });\n                });\n        });\n  };\n\n  componentDidMount() {\n    axios\n      .get(\"/api/timeseries/\")\n      .then((res) => {this.setState({ timeSeriesOptions: res.data.map((c) => (c.name)) })})\n      .catch((err) => console.log(err));\n\n    axios\n      .get(\"/api/classes/\")\n      .then((res) => this.setState({ classes: res.data.map((c) => (c.name)) }))\n      .catch((err) => console.log(err));\n\n    this.getNewTimeSeries('IFCB104');\n  }\n  \n  getNewYear(option) {\n      console.log(option);\n  }\n\n  getNewDay(option) {\n    console.log(option);\n  }\n\n  getNewFile(option) {\n    document.getElementById('file_dropdown').classList.toggle('show');\n    document.getElementById('file_label').classList.toggle('hide');\n    document.getElementById('file_bar').classList.toggle('accommodate-dropdown');\n    \n    const file = 'D' + this.state.bin.year + this.state.bin.day.slice(0,2) + this.state.bin.day.slice(3,5) + \n    option.slice(0,3) + option.slice(4,6) + option.slice(7,9);\n    this.setState({\n        loading: true,\n        bin: {\n            timeseries: this.state.bin.timeseries,\n            year: this.state.bin.year,\n            day: this.state.bin.day,\n            file: file\n        },\n        set: 1\n    });\n    axios\n        .get('/process/file/' + this.state.bin.timeseries + '/' + file + '/')\n        .then((res) => this.setState({ setOptions: res.data.options.set_options }))\n        .catch((err) => console.log(err));\n    axios\n        .get('/process/targets/' + this.state.bin.timeseries + '/' + file + '/1/')\n        .then((targetResponse) => {\n            this.setState({ \n                targets: targetResponse.data,\n                scale: targetResponse.data[0].scale,\n                loading: false,\n             });\n        });\n  }\n\n  handleNewSet(option) {\n    this.setState({\n        loading: true,\n        set: option,\n        targets: [],\n    });\n    axios\n      .get('process/targets/' + this.state.bin.timeseries + '/' + this.state.bin.file + '/' + option + '/')\n      .then((res) => {this.setState({ \n          targets: res.data,\n          scale: res.data[0].scale,\n        })})\n      .catch((err) => console.log(err));\n    this.setState({loading: false});\n  }\n\n\n  handleMenuClick(name) {\n      // Fix hover later\n      // Getting error when doing lots of reclassifications? Fix later\n      const ids = document.getElementsByClassName('id');\n      const idTexts = document.getElementsByClassName('id-text');\n      for (let i=0; i<ids.length; i++) {\n          if (ids[i].style.backgroundColor !== '#FFFFFF') {\n            ids[i].style.backgroundColor = '#FFFFFF';\n            idTexts[i].style.color = '#4E4E4E';\n        }\n      }\n      \n      for (const target of this.state.targets) {\n          if (target.classification === name) {\n              const container = document.getElementById(target.id);\n              const text = document.getElementById(target.id+'_text');\n              container.style.backgroundColor = '#16609F';\n              text.style.color = '#FFFFFF';\n          }\n      }\n  }\n\n  /* Fix this entire function later (will need updates to targets and row calls)\n  handleRowClick(row) {\n      for (const sample of this.state.rows[row]) {\n          this.state.targets[sample] = this.state.classPicker;\n          const container = document.getElementById(sample);\n          const text = document.getElementById(sample+'_text');\n          container.style.backgroundColor = '#16609F';\n          text.style.color = '#FFFFFF';\n      }\n      this.setState({targets: this.state.targets});\n  }\n  */\n\n  backToTop() {\n    document.body.scrollTop = 0; // For Safari\n    document.documentElement.scrollTop = 0;\n  }\n\n  handleSelectAllClick() {\n      const targets = this.state.targets;\n      for (let i = 0; i < targets.length; i++) {\n          targets[i].classification = this.state.classPicker;\n          const container = document.getElementById(targets[i].number);\n          const text = document.getElementById(targets[i].number+'_text');\n          container.style.backgroundColor = '#16609F';\n          text.style.color = '#FFFFFF';\n      }\n      this.setState({ targets: targets });\n  }\n\n  handlePlanktonClick(i) {\n    var targets = this.state.targets;\n    const target = (obj => {return obj.number === i});\n    const k = targets.findIndex(target);\n    console.log(k);\n    targets[k].classification = this.state.classPicker;\n    this.setState({ targets: targets });\n    const container = document.getElementById(targets[k].number);\n    const text = document.getElementById(targets[k].number+'_text');\n    container.style.backgroundColor = '#16609F';\n    text.style.color = '#FFFFFF';\n  }\n\n  renderTimeSeriesControl() {\n    return <TimeSeriesControl\n        timeseries={this.state.bin.timeseries}\n        options={this.state.timeSeriesOptions}\n        onClick={(option) => this.getNewTimeSeries(option)}\n    />;\n  }\n\n  renderYearControl() {\n    return <YearControl\n        year={this.state.bin.year}\n        options={this.state.yearOptions}\n        onClick={(option) => this.getNewYear(option)} \n    />;\n  }\n\n  renderDayControl() {\n    return <DayControl\n        day={this.state.bin.day} \n        options={this.state.dayOptions}\n        onClick={(option) => this.getNewDay(option)}\n    />;\n  }\n\n  renderFileControl() {\n    return <FileControl\n        file={this.state.bin.file} \n        options={this.state.fileOptions}\n        onClick={(option) => this.getNewFile(option)} \n    />;\n  }\n\n  renderSetControl() {\n    return <SetControl\n        set={this.state.set} \n        options={this.state.setOptions}\n        onClick={(option) => this.handleNewSet(option)} \n    />;\n  }\n  \n  renderPlankton(i) {\n      return <Plankton \n              ifcb={this.state.bin.timeseries}\n              timestamp={this.state.bin.file}\n              id={i}\n              targetNum={this.state.targets[i].number}\n              classification={this.state.targets[i].classification}\n              scale={this.state.targets[i].scale}\n              width={this.state.targets[i].width}\n              onClick={(i) => this.handlePlanktonClick(i)}\n          />;\n  }\n\n  renderClassMenu() {\n    return <ClassMenu \n          classes={this.state.classes}\n          onClick={(name) => this.handleMenuClick(name)}\n      />;\n  }\n\n  renderMicrometer() {\n      return <Micrometer\n      scale={this.state.scale}/>\n  }\n\n  renderLoader() {\n    console.log('Loading...');\n    return <img src={loader} alt=\"Loading targets...\" width=\"80\" loop=\"infinite\"></img>\n  }\n\n  render() {  \n    return(\n      <div>\n        <h1>Manual Annotations</h1>\n        <div className=\"time-controls\">\n            {this.renderTimeSeriesControl()}\n            {this.renderYearControl()}\n            {this.renderDayControl()}\n            {this.renderFileControl()}\n            {this.renderSetControl()}\n        </div>\n        <div className=\"annotations\">\n            {this.renderClassMenu()}\n            <div>\n                <div className=\"control-box\">\n                    <div className=\"annotation-control\" onClick={() =>  this.handleSelectAllClick()}>\n                        <img className=\"select-all\" src={selectWhite} alt=\"\"></img>\n                        <p className=\"control-text\">Select All</p>\n                    </div>\n                    <div className=\"annotation-control\" onClick={() =>  this.handleSelectAllClick()}>\n                        <p className=\"control-text\">Undo</p>\n                    </div>\n                    {this.renderMicrometer()}\n                </div>\n                <div className=\"image-grid\">\n                    {\n                    this.state.loading ? this.renderLoader() :\n                    this.state.targets.map((target, i) => this.renderPlankton(i))\n                    }\n                    <img src={toTop} alt=\"Back to Top\" className=\"to-top\" onClick={() => this.backToTop()}></img>\n                </div>\n            </div>\n        </div>\n      </div>\n      );\n  }\n}\n\nexport default Annotations;"]},"metadata":{},"sourceType":"module"}