{"ast":null,"code":"var _jsxFileName = \"/Users/jamiewalton/Desktop/Classification_v2/frontend/src/App.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport Draggable from 'react-draggable';\nimport selectWhite from \"./icons/select-white.png\";\nimport calendar from \"./icons/calendar.png\";\nimport dropdown from \"./icons/dropdown.png\";\nimport dropup from \"./icons/dropup.png\";\nimport selectGray from \"./icons/select-gray.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass TimeSeriesControl extends React.Component {\n  handleDropdown() {\n    document.getElementById('timeseries_dropdown').classList.toggle('show');\n    document.getElementById('timeseries_label').classList.toggle('hide');\n    document.getElementById('timeseries_bar').classList.toggle('accommodate-dropdown');\n  }\n\n  render() {\n    const options = this.props.options.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n      onClick: () => this.props.onClick(x),\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        id: x,\n        children: x\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 59\n      }, this)\n    }, x, false, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 9\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time\",\n        id: \"timeseries_bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"time-selection\",\n          children: this.props.timeseries\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: dropdown,\n          className: \"time-icon\",\n          alt: 'Select time series',\n          onClick: () => this.handleDropdown()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-dropdown\",\n        id: \"timeseries_dropdown\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"timeseries-option\",\n          children: options\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"time-label\",\n        id: \"timeseries_label\",\n        children: \"Time Series\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass YearControl extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time\",\n        id: \"year_bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"time-selection\",\n          children: \"2021\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: dropdown,\n          className: \"time-icon\",\n          alt: 'Select year'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-dropdown\",\n        id: \"year_dropdown\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"time-label\",\n        id: \"year_label\",\n        children: \"Year\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass DayControl extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time\",\n        id: \"day_bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"time-selection\",\n          children: \"June 6th\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: dropdown,\n          className: \"time-icon\",\n          alt: 'Select day'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-dropdown\",\n        id: \"day_dropdown\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"time-label\",\n        id: \"day_label\",\n        children: \"Day\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass FileControl extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time\",\n        id: \"file_bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"time-selection\",\n          children: \"T07:22:15Z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: dropdown,\n          className: \"time-icon\",\n          alt: 'Select file'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-dropdown\",\n        id: \"file_dropdown\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"time-label\",\n        id: \"file_label\",\n        children: \"Time Series\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass SetControl extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"set\",\n        id: \"set\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"time-selection\",\n          children: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: dropdown,\n          className: \"time-icon\",\n          alt: \"select time series\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"time-label\",\n        children: \"Set\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass PlanktonImage extends React.Component {\n  render() {\n    const url = this.props.nameSpace + this.props.timestamp + '_' + this.props.ifcb + '_' + this.props.targetNum + '.jpg';\n    return /*#__PURE__*/_jsxDEV(\"img\", {\n      src: url,\n      className: \"image\",\n      alt: this.props.classification,\n      id: this.props.targetNum + '-image'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nclass Plankton extends React.Component {\n  renderImage() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(PlanktonImage, {\n        nameSpace: 'http://128.114.25.154:8888/' + this.props.ifcb + '/',\n        timestamp: this.props.timestamp,\n        ifcb: this.props.ifcb,\n        targetNum: this.props.targetNum,\n        classification: this.props.classification\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"plankton-button\",\n      onClick: () => this.props.onClick(this.props.id),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"plankton\",\n        children: [this.renderImage(), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"id\",\n          id: this.props.targetNum,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"id-text\",\n            id: this.props.targetNum + '_text',\n            children: this.props.classification\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 23\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nclass ClassMenu extends React.Component {\n  render() {\n    const options = this.props.classes.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        id: x,\n        onClick: () => this.props.onClick(x),\n        children: x\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 19\n      }, this)\n    }, x, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"class-menu\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass Micrometer extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(Draggable, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drag-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"micrometer-block\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"micrometer-text\",\n          children: \"10\\xB5m\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass Annotations extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      classes: [],\n      classPicker: 'Unclassified',\n      timeSeriesOptions: [],\n      ifcb: 'IFCB104',\n      timestamp: 'D20210612T212626',\n      bin: {\n        timeseries: '',\n        year: '',\n        day: '',\n        file: ''\n      },\n      targets: []\n    };\n  }\n\n  get_new_timeseries(timeseriesID) {\n    axios.get('/process/timeseries/' + timeseriesID + '/bin/').then(res => this.setState({\n      bin: res.data\n    })).catch(err => console.log(err));\n  }\n\n  get_targets(targetsFile) {\n    axios.get('/process/targets/' + targetsFile + '/').then(res => this.setState({\n      targets: res.data\n    })).catch(err => console.log(err));\n  }\n\n  componentDidMount() {\n    axios.get(\"/api/timeseries/\").then(res => this.setState({\n      timeSeriesOptions: res.data.map(c => c.name)\n    })).catch(err => console.log(err));\n    axios.get(\"/api/classes/\").then(res => this.setState({\n      classes: res.data.map(c => c.name)\n    })).catch(err => console.log(err));\n    this.get_new_timeseries('1');\n    this.get_targets(this.state.bin);\n  }\n\n  handleTimeSeriesClick(option) {\n    console.log('Clicked ' + option);\n  }\n\n  handleMenuClick(name) {\n    // Fix hover later\n    // Getting error when doing lots of reclassifications? Fix later\n    this.state.classPicker = name;\n    const btn = document.getElementById(name);\n    const ids = document.getElementsByClassName('id');\n    const idTexts = document.getElementsByClassName('id-text');\n\n    for (let i = 0; i < ids.length; i++) {\n      if (ids[i].style.backgroundColor !== '#FFFFFF') {\n        ids[i].style.backgroundColor = '#FFFFFF';\n        idTexts[i].style.color = '#4E4E4E';\n      }\n    }\n\n    for (const target of this.state.targets) {\n      if (target.classification === name) {\n        const container = document.getElementById(target.id);\n        const text = document.getElementById(target.id + '_text');\n        container.style.backgroundColor = '#16609F';\n        text.style.color = '#FFFFFF';\n      }\n    }\n  }\n  /* Fix this entire function later (will need updates to targets and row calls)\n  handleRowClick(row) {\n      for (const sample of this.state.rows[row]) {\n          this.state.targets[sample] = this.state.classPicker;\n          const container = document.getElementById(sample);\n          const text = document.getElementById(sample+'_text');\n          container.style.backgroundColor = '#16609F';\n          text.style.color = '#FFFFFF';\n      }\n      this.setState({targets: this.state.targets});\n  }\n  */\n\n\n  handleSelectAllClick() {\n    const targets = this.state.targets;\n\n    for (let i = 0; i < targets.length; i++) {\n      targets[i].classification = this.state.classPicker;\n      const container = document.getElementById(targets[i].number);\n      const text = document.getElementById(targets[i].number + '_text');\n      container.style.backgroundColor = '#16609F';\n      text.style.color = '#FFFFFF';\n    }\n\n    this.setState({\n      targets: targets\n    });\n  }\n\n  handlePlanktonClick(i) {\n    const targets = this.state.targets;\n    targets[i].classification = this.state.classPicker;\n    this.setState({\n      targets: targets\n    });\n    const container = document.getElementById(targets[i].number);\n    const text = document.getElementById(targets[i].number + '_text');\n    container.style.backgroundColor = '#16609F';\n    text.style.color = '#FFFFFF';\n  }\n\n  renderTimeSeriesControl() {\n    return /*#__PURE__*/_jsxDEV(TimeSeriesControl, {\n      timeseries: this.state.bin.timeseries,\n      options: this.state.timeSeriesOptions,\n      onClick: option => this.handleMenuClick(option)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderYearControl() {\n    return /*#__PURE__*/_jsxDEV(YearControl, {\n      year: this.state.bin.year\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderDayControl() {\n    return /*#__PURE__*/_jsxDEV(DayControl, {\n      day: this.state.bin.day\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderFileControl() {\n    return /*#__PURE__*/_jsxDEV(FileControl, {\n      file: this.state.bin.file\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderSetControl() {\n    return /*#__PURE__*/_jsxDEV(SetControl, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderPlankton(i) {\n    return /*#__PURE__*/_jsxDEV(Plankton, {\n      ifcb: this.state.bin.timeseries,\n      timestamp: this.state.bin.file,\n      id: i,\n      targetNum: this.state.targets[i].number,\n      classification: this.state.targets[i].classification,\n      onClick: i => this.handlePlanktonClick(i)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 14\n    }, this);\n  }\n\n  renderClassMenu() {\n    return /*#__PURE__*/_jsxDEV(ClassMenu, {\n      classes: this.state.classes,\n      onClick: name => this.handleMenuClick(name)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderMicrometer() {\n    return /*#__PURE__*/_jsxDEV(Micrometer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 14\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Manual Annotations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-controls\",\n        children: [this.renderTimeSeriesControl(), this.renderYearControl(), this.renderDayControl(), this.renderFileControl(), this.renderSetControl()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"annotations\",\n        children: [this.renderClassMenu(), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"control-box\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"annotation-control\",\n              onClick: () => this.handleSelectAllClick(),\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"select-all\",\n                src: selectWhite,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"control-text\",\n                children: \"Select All\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"annotation-control\",\n              onClick: () => this.handleSelectAllClick(),\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"control-text\",\n                children: \"Undo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-grid\",\n            children: this.state.targets.map(target => this.renderPlankton(target.id))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Annotations;","map":{"version":3,"sources":["/Users/jamiewalton/Desktop/Classification_v2/frontend/src/App.js"],"names":["React","axios","Draggable","selectWhite","calendar","dropdown","dropup","selectGray","TimeSeriesControl","Component","handleDropdown","document","getElementById","classList","toggle","render","options","props","map","x","onClick","timeseries","YearControl","DayControl","FileControl","SetControl","PlanktonImage","url","nameSpace","timestamp","ifcb","targetNum","classification","Plankton","renderImage","id","ClassMenu","classes","Micrometer","Annotations","constructor","state","classPicker","timeSeriesOptions","bin","year","day","file","targets","get_new_timeseries","timeseriesID","get","then","res","setState","data","catch","err","console","log","get_targets","targetsFile","componentDidMount","c","name","handleTimeSeriesClick","option","handleMenuClick","btn","ids","getElementsByClassName","idTexts","i","length","style","backgroundColor","color","target","container","text","handleSelectAllClick","number","handlePlanktonClick","renderTimeSeriesControl","renderYearControl","renderDayControl","renderFileControl","renderSetControl","renderPlankton","renderClassMenu","renderMicrometer"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport Draggable from 'react-draggable';\n\nimport selectWhite from \"./icons/select-white.png\";\nimport calendar from \"./icons/calendar.png\";\nimport dropdown from \"./icons/dropdown.png\";\nimport dropup from \"./icons/dropup.png\";\nimport selectGray from \"./icons/select-gray.png\";\n\nclass TimeSeriesControl extends React.Component {\n    handleDropdown() {\n        document.getElementById('timeseries_dropdown').classList.toggle('show');\n        document.getElementById('timeseries_label').classList.toggle('hide');\n        document.getElementById('timeseries_bar').classList.toggle('accommodate-dropdown');\n    }\n    \n    render() {\n        const options = this.props.options.map((x) => \n        <li key={x} onClick={() => this.props.onClick(x)}><button id={x}>{x}</button></li>)\n        return (\n            <div>\n                <div className=\"time\" id='timeseries_bar'>\n                    <p className=\"time-selection\">{this.props.timeseries}</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select time series'} onClick={() => this.handleDropdown()}></img>\n                </div>\n                <div className=\"time-dropdown\" id='timeseries_dropdown'>\n                    <ul className=\"timeseries-option\">{options}</ul>\n                </div>\n                <p className=\"time-label\" id='timeseries_label'>Time Series</p>\n            </div>\n        );\n    }\n}\n\nclass YearControl extends React.Component {\n    render() {\n        return(\n            <div>\n                <div className=\"time\" id='year_bar'>\n                    <p className=\"time-selection\">2021</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select year'}></img>\n                </div>\n                <div className=\"time-dropdown\" id='year_dropdown'></div>\n                <p className=\"time-label\" id='year_label'>Year</p>\n            </div>\n        );\n    }\n}\n\nclass DayControl extends React.Component {\n    render() {\n        return(\n            <div>\n                <div className=\"time\" id='day_bar'>\n                    <p className=\"time-selection\">June 6th</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select day'}></img>\n                </div>\n                <div className=\"time-dropdown\" id='day_dropdown'></div>\n                <p className=\"time-label\" id='day_label'>Day</p>\n            </div>\n        );\n    }\n}\n\nclass FileControl extends React.Component {\n    render() {\n        return(\n            <div>\n                <div className=\"time\" id='file_bar'>\n                    <p className=\"time-selection\">T07:22:15Z</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select file'}></img>\n                </div>\n                <div className=\"time-dropdown\" id='file_dropdown'></div>\n                <p className=\"time-label\" id='file_label'>Time Series</p>\n            </div>\n        );\n    }\n}\n\nclass SetControl extends React.Component {\n    render() {\n        return(\n            <div>\n                <div className=\"set\" id=\"set\">\n                <p className=\"time-selection\">1</p>\n                <img src={dropdown} className=\"time-icon\" alt=\"select time series\"></img>\n                </div>\n                <p className=\"time-label\">Set</p>\n            </div>\n        );\n    }\n}\n\nclass PlanktonImage extends React.Component {\n\n  render() {\n  const url = this.props.nameSpace + this.props.timestamp + '_' + this.props.ifcb + '_' + this.props.targetNum + '.jpg';\n      return(\n          <img src={url} className=\"image\" alt={this.props.classification} id={this.props.targetNum + '-image'}></img>\n      );\n  }\n}\n\nclass Plankton extends React.Component {\n  \n  renderImage() {\n      return (\n      <div>\n          <PlanktonImage \n              nameSpace={'http://128.114.25.154:8888/' + this.props.ifcb + '/'}\n              timestamp={this.props.timestamp}\n              ifcb={this.props.ifcb}\n              targetNum={this.props.targetNum}\n              classification={this.props.classification}\n          />\n      </div>\n      );\n  }\n\n  render() {\n      return(\n          <button className=\"plankton-button\" onClick={() => this.props.onClick(this.props.id)}>\n              <div className=\"plankton\">\n                  {this.renderImage()}\n                  <div className=\"id\" id={this.props.targetNum}>\n                      <p className=\"id-text\" id={this.props.targetNum + '_text'}>{this.props.classification}</p>\n                  </div>\n              </div>\n          </button>\n      );\n  }\n}\n\nclass ClassMenu extends React.Component {\n  render() {\n      const options = this.props.classes.map((x) => \n      <li key={x}><button id={x} onClick={() => this.props.onClick(x)}>{x}</button></li>);\n      return(\n      <div className=\"class-menu\">\n          <ul>{options}</ul>\n      </div>\n      );\n  }\n}\n\nclass Micrometer extends React.Component {\n    render() {\n        return(\n            <Draggable>\n                <div className=\"drag-box\">\n                    <div className=\"micrometer-block\"></div>\n                    <p className=\"micrometer-text\">10µm</p>\n                </div>\n            </Draggable>\n        );\n    }\n}\n\nclass Annotations extends React.Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n          classes: [],\n          classPicker: 'Unclassified',\n          timeSeriesOptions: [],\n          ifcb: 'IFCB104',\n          timestamp: 'D20210612T212626',\n          bin: {timeseries:'', year:'', day:'', file:''},\n          targets: [],\n      }\n  }\n\n  get_new_timeseries(timeseriesID) {\n    axios\n        .get('/process/timeseries/' + timeseriesID + '/bin/')\n        .then((res) => this.setState({ bin: res.data }))\n        .catch((err) => console.log(err));\n  }\n\n  get_targets(targetsFile) {\n    axios\n        .get('/process/targets/' + targetsFile + '/')\n        .then((res) => this.setState({ targets: res.data }))\n        .catch((err) => console.log(err));\n  }\n\n  componentDidMount() {\n    axios\n      .get(\"/api/timeseries/\")\n      .then((res) => this.setState({ timeSeriesOptions: res.data.map((c) => (c.name)) }))\n      .catch((err) => console.log(err));\n\n    axios\n      .get(\"/api/classes/\")\n      .then((res) => this.setState({ classes: res.data.map((c) => (c.name)) }))\n      .catch((err) => console.log(err));\n\n    this.get_new_timeseries('1');\n    this.get_targets(this.state.bin);\n }\n  \n  handleTimeSeriesClick(option) {\n      console.log('Clicked ' + option)\n  }\n\n  handleMenuClick(name) {\n      // Fix hover later\n      // Getting error when doing lots of reclassifications? Fix later\n      this.state.classPicker = name;\n      const btn = document.getElementById(name);\n\n      const ids = document.getElementsByClassName('id');\n      const idTexts = document.getElementsByClassName('id-text');\n      for (let i=0; i<ids.length; i++) {\n          if (ids[i].style.backgroundColor !== '#FFFFFF') {\n            ids[i].style.backgroundColor = '#FFFFFF';\n            idTexts[i].style.color = '#4E4E4E';\n        }\n      }\n      \n      for (const target of this.state.targets) {\n          if (target.classification === name) {\n              const container = document.getElementById(target.id);\n              const text = document.getElementById(target.id+'_text');\n              container.style.backgroundColor = '#16609F';\n              text.style.color = '#FFFFFF';\n          }\n      }\n  }\n\n  /* Fix this entire function later (will need updates to targets and row calls)\n  handleRowClick(row) {\n      for (const sample of this.state.rows[row]) {\n          this.state.targets[sample] = this.state.classPicker;\n          const container = document.getElementById(sample);\n          const text = document.getElementById(sample+'_text');\n          container.style.backgroundColor = '#16609F';\n          text.style.color = '#FFFFFF';\n      }\n      this.setState({targets: this.state.targets});\n  }\n  */\n\n  handleSelectAllClick() {\n      const targets = this.state.targets;\n      for (let i = 0; i < targets.length; i++) {\n          targets[i].classification = this.state.classPicker;\n          const container = document.getElementById(targets[i].number);\n          const text = document.getElementById(targets[i].number+'_text');\n          container.style.backgroundColor = '#16609F';\n          text.style.color = '#FFFFFF';\n      }\n      this.setState({targets: targets});\n  }\n\n  handlePlanktonClick(i) {\n    const targets = this.state.targets;\n    targets[i].classification = this.state.classPicker;\n    this.setState({targets: targets});\n    const container = document.getElementById(targets[i].number);\n    const text = document.getElementById(targets[i].number+'_text');\n    container.style.backgroundColor = '#16609F';\n    text.style.color = '#FFFFFF';\n  }\n\n  renderTimeSeriesControl() {\n    return <TimeSeriesControl\n        timeseries={this.state.bin.timeseries}\n        options={this.state.timeSeriesOptions}\n        onClick={(option) => this.handleMenuClick(option)}\n    />;\n  }\n\n  renderYearControl() {\n    return <YearControl\n        year={this.state.bin.year} \n    />;\n  }\n\n  renderDayControl() {\n    return <DayControl\n        day={this.state.bin.day} \n    />;\n  }\n\n  renderFileControl() {\n    return <FileControl\n        file={this.state.bin.file}  \n    />;\n  }\n\n  renderSetControl() {\n    return <SetControl \n    />;\n  }\n  \n  renderPlankton(i) {\n      return <Plankton \n              ifcb={this.state.bin.timeseries}\n              timestamp={this.state.bin.file}\n              id={i}\n              targetNum={this.state.targets[i].number}\n              classification={this.state.targets[i].classification}\n              onClick={(i) => this.handlePlanktonClick(i)}\n          />;\n  }\n\n  renderClassMenu() {\n    return <ClassMenu \n          classes={this.state.classes}\n          onClick={(name) => this.handleMenuClick(name)}\n      />;\n  }\n\n  renderMicrometer() {\n      return <Micrometer/>\n  }\n\n  render() {\n      return(\n      <div>\n        <h1>Manual Annotations</h1>\n        <div className=\"time-controls\">\n            {this.renderTimeSeriesControl()}\n            {this.renderYearControl()}\n            {this.renderDayControl()}\n            {this.renderFileControl()}\n            {this.renderSetControl()}\n        </div>\n        <div className=\"annotations\">\n            {this.renderClassMenu()}\n            <div>\n                <div className=\"control-box\">\n                    <div className=\"annotation-control\" onClick={() =>  this.handleSelectAllClick()}>\n                        <img className=\"select-all\" src={selectWhite} alt=\"\"></img>\n                        <p className=\"control-text\">Select All</p>\n                    </div>\n                    <div className=\"annotation-control\" onClick={() =>  this.handleSelectAllClick()}>\n                        <p className=\"control-text\">Undo</p>\n                    </div>\n                </div>\n                <div className=\"image-grid\">\n                    {this.state.targets.map((target) => this.renderPlankton(target.id))}\n                </div>\n            </div>\n        </div>\n      </div>\n      );\n  }\n}\n\nexport default Annotations;"]},"metadata":{},"sourceType":"module"}