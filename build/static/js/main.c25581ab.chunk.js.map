{"version":3,"sources":["actions/types.js","actions/auth.js","components/layout/Header.js","actions/menu.js","actions/preferences.js","components/annotations/Preferences.js","actions/classify.js","components/features/Note.js","components/annotations/BinNote.js","components/annotations/Plankton.js","icons/dropdown.png","components/annotations/time/TimeSeriesControl.js","components/annotations/time/YearControl.js","components/annotations/time/DayControl.js","components/annotations/time/Bar.js","components/annotations/time/FileControl.js","components/annotations/time/Order.js","components/annotations/loader.GIF","components/annotations/Annotations.js","icons/to-top.png","components/features/Notebook.js","components/features/Analysis.js","components/features/ClassDownload.js","components/features/Search.js","components/accounts/Login.js","components/accounts/Register.js","components/common/loader.GIF","components/common/PrivateRoute.js","reducers/auth.js","reducers/menu.js","reducers/classify.js","reducers/index.js","store.js","App.js","reportWebVitals.js","index.js"],"names":["USER_LOADING","USER_LOADED","LOCATION_SAVED","AUTH_ERROR","LOGIN_ATTEMPT","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT_SUCCESS","REGISTER_SUCCESS","REGISTER_FAIL","SCALE_CHANGED","PREFERENCES_LOADED","CLASSIFY_PAGE","NOTEBOOK_PAGE","ANALYSIS_PAGE","CLASSDOWNLOAD_PAGE","SEARCH_PAGE","SAVE_SUCCESS","SAVE_PROGRESS","SYNC_SUCCESS","SYNC_PROGRESS","NOTES_CHANGED","NOTES_RECORDED","REPLY_OPEN","REPLY_RESOLVED","NOTEBOOK_FILTERED","TARGETS_BASIC_SEARCHED","BINS_BASIC_SEARCHED","tokenConfig","getState","token","auth","config","headers","Header","this","props","isAuthenticated","user","onClassify","to","onNotebook","onAnalysis","authLinks","className","username","onClick","goto_classify","goto_notebook","goto_analysis","href","logout","guestLinks","Component","connect","state","dispatch","axios","post","then","res","type","changeScale","newScale","payload","Preferences","recentChecked","initialRecentChecked","sortChecked","AZ","ZA","LS","SL","initialSortChecked","scaleEntry","initialScaleEntry","onSortChange","bind","onScaleChange","onLoadChange","sort","setState","load","scale","document","getElementById","style","display","classList","toggle","history","go","e","target","value","setScalePreference","setSortPreference","setLoadPreference","id","close","name","checked","onChange","for","step","React","loadPref","JSON","stringify","catch","err","console","log","sortPref","sendNotesChange","receiveNotesChange","addBinNote","author","entry","parent","replies","timeseries","ifcb","file","image","note","Note","onSubmit","preventDefault","reset","sendReplyOpen","deleteBinNote","flagBinNote","isFlagged","date","flag","slice","reply","delete","getFlagButton","rows","notes","classify","put","BinNote","parents","getNotes","get","data","count","iters","findIndex","element","margin","String","length","map","renderNote","noteChangeFlag","replyChangeFlag","receiveReplyOpen","PlanktonImage","url","nameSpace","timestamp","targetNum","src","alt","classification","height","Number","Plankton","class_name","width","infoChange","infoStyle","getHeight","getWidth","renderImage","onMouseEnter","onMouseLeave","handleInfoClick","editor","infoShowing","includes","class_abbr","TimeSeriesControl","options","x","dropdown","handleDropdown","YearControl","year","DayControl","day","Bar","num","onHover","number","handleHover","current","FileControl","fileName","Micrometer","ClassMenu","classes","handleSelectAllClick","handleUndoClick","NavButton","text","Annotations","loading","newFile","newTimeSeries","classAbbrs","classPicker","classMark","planktonClickEnabled","bin","timeSeriesOptions","yearOptions","dayOptions","barHeights","fileOptions","setOptions","filledDays","targets","scrollToIndex","undefined","jumpEntry","targetJumpEntry","initialTargetJump","lastEditBin","lastEditTarget","lastScroll","dayOption","previous","next","onTargetJumpChange","contains","option","closeDropdown","urlInfo","location","pathname","split","preferences","jumpToLastEdit","getNewTimeSeries","c","display_name","replace","abbr","Math","round","year_options","reverse","day_options","file_options","set_options","filled_days","targetResponse","prevProps","match","histogram","body","scrollTop","documentElement","dayNumber","handleBar","backgroundColor","prevMenu","addEventListener","handleMouseOver","handleMouseOut","ids","getElementsByClassName","idTexts","i","color","menu","removeEventListener","container","remove","add","classAbbr","concat","save","newHistory","parse","sync","scrollHeight","j","row","k","start","end","targetRow","classifyRow","bool","infoClassList","newInfoShowing","filter","item","classifyTarget","showButton","innerHTML","infoButtons","dir","initialScale","rowResponse","getNewYear","handleNewDay","handleNewFile","handleSyncClick","handleDownload","handleMenuClick","gb","handleBarHover","direction","fileNumber","yearNumber","loader","loop","returnToClassify","event","isNaN","cache","CellMeasurerCache","defaultHeight","minHeight","fixedWidth","closePreferences","renderPreferences","renderTimeSeriesControl","renderYearControl","renderDayControl","renderFileControl","placeholder","showNotes","hideInfo","renderSync","renderDownload","handleHistogramClick","openPreferences","renderBar","renderClassMenu","isSaving","renderLoader","rowCount","rowHeight","rowRenderer","index","key","rowIndex","measure","registerChild","ref","onLoad","handleRowClick","handlePlanktonClick","disablePlanktonClick","scrollToAlignment","clientWidth","backToTop","renderNavButton","newURL","renderNotFound","renderPage","flipBackToTop","startInd","endInd","classifyAll","set","Filter","applyFilter","renderOption","Notebook","searchTerms","newAppliedFilters","appliedFilters","category","choice","filterNotebook","flags","authors","bins","ifcbs","types","filters","Array","fill","getNotebook","applied","handleFilterChoiceClick","handleApplyFilter","handleRemoveFilter","toUpperCase","skips","rendered","renderReply","cellRenderer","columnIndex","noteIndex","includesFlag","handleFilterClick","renderAppliedFilters","renderFilterChoice","columnCount","columnWidth","deferredMeasurementCache","ceil","search","AnalysisOption","heading","description","handleClick","Analysis","analysisOptions","goto_search","goto_classdownload","onClassDownload","onSearch","renderAnalysisOption","ClassDownload","handleNumberChange","classifiers","classChoice","optionalChoices","include","exclude","classifierIncludes","classifierExcludes","indexOf","splice","newExcludes","newIncludes","join","handleClassOptionClick","handleClassifierOptionClick","renderClassOption","renderClassifierOption","min","handleAllClick","download","title","onload","loadFrame","Target","initialWidth","binIndex","showMore","showLess","redirectToFile","Search","basicSearch","renderable","searchTargets","targetSearchResults","redirectInfo","getBins","binsSearchResults","resultsDisplay","renderTarget","binIDs","Login","password","attempted","login","error","push","loginFailed","Register","email","password2","newUser","register","component","rest","render","window","isLoading","initialState","localStorage","getItem","registerFailed","locationCount","isSyncing","combineReducers","action","setItem","removeItem","middleware","thunk","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","App","userRes","prefRes","exact","path","withRouter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM"],"mappings":"qQACaA,EAAe,eACfC,EAAc,cACdC,EAAiB,iBACjBC,EAAa,aACbC,EAAgB,gBAChBC,EAAgB,gBAChBC,EAAa,aACbC,EAAiB,iBACjBC,EAAmB,mBACnBC,EAAgB,gBAGhBC,EAAgB,gBAChBC,EAAqB,cAIrBC,EAAgB,gBAChBC,EAAgB,gBAChBC,EAAgB,gBAChBC,EAAqB,qBACrBC,EAAc,cAGdC,EAAe,eACfC,EAAgB,gBAChBC,EAAe,eACfC,EAAgB,gBAChBC,EAAgB,gBAChBC,EAAiB,iBACjBC,EAAa,aACbC,EAAiB,iBAEjBC,EAAoB,oBACpBC,EAAyB,yBACzBC,EAAsB,sBC0FtBC,EAAc,SAAAC,GAGvB,IAAMC,EAAQD,IAAWE,KAAKD,MAGxBE,EAAS,CACXC,QAAS,CACL,eAAgB,qBASxB,OAJGH,IACCE,EAAOC,QAAP,8BAA2CH,IAGxCE,G,OCxIEE,EAAb,4JASI,WACI,MAAkCC,KAAKC,MAAML,KAArCM,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,KAEzB,GAAGH,KAAKC,MAAMG,WACV,OAAO,cAAC,IAAD,CAAUC,GAAG,cACjB,GAAGL,KAAKC,MAAMK,WACjB,OAAO,cAAC,IAAD,CAAUD,GAAG,eACjB,GAAGL,KAAKC,MAAMM,WACjB,OAAO,cAAC,IAAD,CAAUF,GAAG,cAGxB,IAAMG,EACF,qBAAIC,UAAU,YAAd,UACI,sBAAMA,UAAU,YAAhB,SACI,wBAAQA,UAAU,YAAlB,SACMN,EAAI,mBAAeA,EAAKO,UAAa,OAG/C,sBAAKD,UAAU,eAAf,UACI,6BACI,wBACIE,QAASX,KAAKC,MAAMW,cACpBH,UAAU,iBAFd,wBAMJ,6BACI,wBACIE,QAASX,KAAKC,MAAMY,cACpBJ,UAAU,iBAFd,wBAMJ,6BACI,wBACIE,QAASX,KAAKC,MAAMa,cACpBL,UAAU,iBAFd,wBAMJ,6BACI,mBACIM,KAAK,yCACLN,UAAU,iBAFd,wBAOR,oBAAIA,UAAU,WAAd,SACI,wBACIE,QAASX,KAAKC,MAAMe,OACpBX,GAAG,SACHI,UAAU,SAHd,yBAQNQ,EACF,qBAAIR,UAAU,SAAd,UACI,oBAAIA,UAAU,WAAd,SACI,cAAC,IAAD,CAAMJ,GAAG,YAAYI,UAAU,WAA/B,wBAEJ,oBAAIA,UAAU,WAAd,SACI,cAAC,IAAD,CAAMJ,GAAG,SAASI,UAAU,WAA5B,wBAKZ,OACI,mCACI,qDACEP,EAAkBM,EAAYS,SAhFhD,GAA4BC,aA0FbC,eAJS,SAAAC,GAAK,MAAK,CAC9BxB,KAAMwB,EAAMxB,QAGwB,CAAEoB,ODkBpB,kBAAM,SAACK,EAAU3B,GACnC4B,IACKC,KAAK,oBAAqB,KAAM9B,EAAYC,IAC5C8B,MAAK,SAAAC,GACFJ,EAAS,CACLK,KAAMtD,SCvB4BwC,cCzFrB,kBAAM,SAACS,GAChCA,EAAS,CACLK,KAAMjD,MDuFmDoC,cCnFpC,kBAAM,SAACQ,GAChCA,EAAS,CACLK,KAAMhD,MDiFkEoC,cC7EnD,kBAAM,SAACO,GAChCA,EAAS,CACLK,KAAM/C,OD2ECwC,CAAkFpB,GE7CpF4B,EAAc,SAACC,GAAD,OAAc,SAACP,GACtCA,EAAS,CACLK,KAAMnD,EACNsD,QAASD,MChDXE,G,wDAEF,WAAY7B,GAAQ,IAAD,8BACf,cAAMA,IACDmB,MAAQ,CACTW,eAAe,EACfC,sBAAsB,EACtBC,YAAa,CAACC,IAAI,EAAMC,IAAI,EAAOC,IAAI,EAAOC,IAAI,GAClDC,mBAAoB,CAACJ,IAAI,EAAMC,IAAI,EAAOC,IAAI,EAAOC,IAAI,GACzDE,WAAY,IACZC,kBAAmB,KAEvB,EAAKC,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,cAAgB,EAAKA,cAAcD,KAAnB,gBACrB,EAAKE,aAAe,EAAKA,aAAaF,KAAlB,gBAZL,E,qDAuBnB,WACI,OAAQ1C,KAAKC,MAAM4C,MACf,IAAK,KACD7C,KAAK8C,SAAS,CACVb,YAAa,CAACC,IAAI,EAAMC,IAAI,EAAOC,IAAI,EAAOC,IAAI,GAClDC,mBAAoB,CAACJ,IAAI,EAAMC,IAAI,EAAOC,IAAI,EAAOC,IAAI,KAE7D,MACJ,IAAK,KACDrC,KAAK8C,SAAS,CACVb,YAAa,CAACC,IAAI,EAAOC,IAAI,EAAMC,IAAI,EAAOC,IAAI,GAClDC,mBAAoB,CAACJ,IAAI,EAAOC,IAAI,EAAMC,IAAI,EAAOC,IAAI,KAE7D,MACJ,IAAK,KACDrC,KAAK8C,SAAS,CACVb,YAAa,CAACC,IAAI,EAAOC,IAAI,EAAOC,IAAI,EAAMC,IAAI,GAClDC,mBAAoB,CAACJ,IAAI,EAAOC,IAAI,EAAOC,IAAI,EAAMC,IAAI,KAE7D,MACJ,IAAK,KACDrC,KAAK8C,SAAS,CACVb,YAAa,CAACC,IAAI,EAAOC,IAAI,EAAOC,IAAI,EAAOC,IAAI,GACnDC,mBAAoB,CAACJ,IAAI,EAAOC,IAAI,EAAOC,IAAI,EAAOC,IAAI,KAGtErC,KAAK8C,SAAS,CACVf,cAAiC,WAAlB/B,KAAKC,MAAM8C,KAC1Bf,qBAAwC,WAAlBhC,KAAKC,MAAM8C,KACjCR,WAAYvC,KAAKC,MAAM+C,MACvBR,kBAAmBxC,KAAKC,MAAM+C,U,mBAItC,WACIC,SAASC,eAAe,WAAWC,MAAMC,QAAU,OACnDH,SAASC,eAAe,eAAeG,UAAUC,OAAO,aACxDtD,KAAKC,MAAMsD,QAAQC,GAAG,K,2BAG1B,SAAcC,GACVzD,KAAK8C,SAAS,CAAEP,WAAYkB,EAAEC,OAAOC,QACrC3D,KAAKC,MAAM0B,YAAY8B,EAAEC,OAAOC,OAChC3D,KAAKC,MAAM2D,mBAAmBH,EAAEC,OAAOC,MAAO3D,KAAKC,MAAME,KAAKO,Y,0BAGlE,SAAa+C,GACT,OAAQA,EAAEC,OAAOC,OACb,IAAK,KACD3D,KAAK8C,SAAS,CAAEb,YAAa,CAACC,IAAI,EAAMC,IAAI,EAAOC,IAAI,EAAOC,IAAI,KAClErC,KAAKC,MAAM4D,kBAAkB,CAAC3B,IAAI,EAAMC,IAAI,EAAOC,IAAI,EAAOC,IAAI,GAAQrC,KAAKC,MAAME,KAAKO,UAC1F,MACJ,IAAK,KACDV,KAAK8C,SAAS,CAAEb,YAAa,CAACC,IAAI,EAAOC,IAAI,EAAMC,IAAI,EAAOC,IAAI,KAClErC,KAAKC,MAAM4D,kBAAkB,CAAC3B,IAAI,EAAOC,IAAI,EAAMC,IAAI,EAAOC,IAAI,GAAQrC,KAAKC,MAAME,KAAKO,UAC1F,MACJ,IAAK,KACDV,KAAK8C,SAAS,CAAEb,YAAa,CAACC,IAAI,EAAOC,IAAI,EAAOC,IAAI,EAAMC,IAAI,KAClErC,KAAKC,MAAM4D,kBAAkB,CAAC3B,IAAI,EAAOC,IAAI,EAAOC,IAAI,EAAMC,IAAI,GAAQrC,KAAKC,MAAME,KAAKO,UAC1F,MACJ,IAAK,KACDV,KAAK8C,SAAS,CAAEb,YAAa,CAACC,IAAI,EAAOC,IAAI,EAAOC,IAAI,EAAOC,IAAI,KACnErC,KAAKC,MAAM4D,kBAAkB,CAAC3B,IAAI,EAAOC,IAAI,EAAOC,IAAI,EAAOC,IAAI,GAAOrC,KAAKC,MAAME,KAAKO,a,0BAItG,SAAa+C,GACT,OAAQA,EAAEC,OAAOC,OACb,IAAK,SACD3D,KAAK8C,SAAS,CAAEf,eAAe,IAC/B,MACJ,IAAK,SACD/B,KAAK8C,SAAS,CAAEf,eAAe,IAEvC/B,KAAKC,MAAM6D,kBAAkBL,EAAEC,OAAOC,MAAO3D,KAAKC,MAAME,KAAKO,Y,oBAGjE,WAAU,IAAD,OAEL,OACI,sBAAKD,UAAU,qBAAqBsD,GAAG,cAAvC,UACI,qBAAKtD,UAAU,eAAeE,QAAS,kBAAM,EAAKqD,WAClD,oBAAIvD,UAAU,sBAAd,yBACA,sBAAKA,UAAU,wBAAf,UACI,sBAAKA,UAAU,gBAAf,UACI,sBAAKA,UAAU,gBAAf,UACI,mBAAGA,UAAU,kBAAb,6BACA,sBAAKA,UAAU,YAAf,UACI,sBAAK0C,MAAO,CAAC,QAAU,QAAvB,UACI,uBACIzB,KAAK,QACLuC,KAAK,OACLF,GAAG,SACHtD,UAAU,aACVkD,MAAM,SACNO,QAASlE,KAAKoB,MAAMW,cACpBoC,SAAUnE,KAAK4C,eAEnB,uBAAOnC,UAAU,mBAAmB2D,IAAI,SAAxC,sCAEJ,sBAAKjB,MAAO,CAAC,QAAU,QAAvB,UACI,uBACIzB,KAAK,QACLuC,KAAK,OACLF,GAAG,SACHtD,UAAU,aACVkD,MAAM,SACNO,SAAUlE,KAAKoB,MAAMW,cACrBoC,SAAUnE,KAAK4C,eAEnB,uBAAOnC,UAAU,mBAAmB2D,IAAI,SAAxC,4CAIZ,sBAAK3D,UAAU,gBAAgB0C,MAAO,CAAC,OAAS,aAAhD,UACI,mBAAG1C,UAAU,kBAAb,yBACA,qBAAKA,UAAU,YAAf,SACI,uBACIiB,KAAK,SACLuC,KAAK,QACLF,GAAG,QACHJ,MAAO3D,KAAKoB,MAAMmB,WAClB9B,UAAU,8BACV4D,KAAK,OACLF,SAAUnE,KAAK2C,wBAM/B,qBAAKlC,UAAU,iBAAf,SACI,sBAAKA,UAAU,gBAAf,UACI,mBAAGA,UAAU,kBAAb,6BACA,sBAAKA,UAAU,YAAf,UACI,uBACIiB,KAAK,QACLuC,KAAK,OACLF,GAAG,KACHtD,UAAU,aACVkD,MAAM,KACNO,QAASlE,KAAKoB,MAAMa,YAAYC,GAChCiC,SAAUnE,KAAKyC,eAEnB,uBAAOhC,UAAU,mBAAmB2D,IAAI,SAAxC,mCAA8E,uBAC9E,uBACI1C,KAAK,QACLuC,KAAK,OACLF,GAAG,KACHtD,UAAU,aACVkD,MAAM,KACNO,QAASlE,KAAKoB,MAAMa,YAAYE,GAChCgC,SAAUnE,KAAKyC,eAEnB,uBAAOhC,UAAU,mBAAmB2D,IAAI,SAAxC,mCAA8E,uBAC9E,uBACI1C,KAAK,QACLuC,KAAK,OACLF,GAAG,KACHtD,UAAU,aACVkD,MAAM,KACNO,QAASlE,KAAKoB,MAAMa,YAAYG,GAChC+B,SAAUnE,KAAKyC,eAEnB,uBAAOhC,UAAU,mBAAmB2D,IAAI,SAAxC,+CAA0F,uBAC1F,uBACI1C,KAAK,QACLuC,KAAK,OACLF,GAAG,KACHtD,UAAU,aACVkD,MAAM,KACNO,QAASlE,KAAKoB,MAAMa,YAAYI,GAChC8B,SAAUnE,KAAKyC,eAEnB,uBAAOhC,UAAU,mBAAmB2D,IAAI,SAAxC,+CAA0F,yC,GAtMhGE,IAAMpD,YAoNjBC,eAJS,SAAAC,GAAK,MAAK,CAC9BjB,KAAMiB,EAAMxB,KAAKO,QAGmB,CAACwB,cAAamC,kBDpNrB,SAACS,EAAU7D,GAAX,OAAwB,SAACW,EAAU3B,GAMhE4B,IACKC,KAAK,wBAA0Bb,EAAW,IAAK8D,KAAKC,UAAUF,GANpD,CACXzE,QAAS,CACL,eAAgB,qBAI8DL,EAAYC,IAC7FgF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QC4MqCf,mBDzMvC,SAACZ,EAAOtC,GAAR,OAAqB,SAACW,EAAU3B,GAM9D4B,IACKC,KAAK,yBAA2Bb,EAAW,IAAK8D,KAAKC,UAAUzB,GANrD,CACXlD,QAAS,CACL,eAAgB,qBAI4DL,EAAYC,IAC3FgF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QCiMyDd,kBD9L5D,SAACiB,EAAUpE,GAAX,OAAwB,SAACW,EAAU3B,GAChE,IAMImD,EACAiC,EAAS5C,GACTW,EAAO,KACAiC,EAAS3C,GAChBU,EAAO,KACAiC,EAAS1C,GAChBS,EAAO,KACAiC,EAASzC,KAChBQ,EAAO,MAGXvB,IACKC,KAAK,wBAA0Bb,EAAW,IAAK8D,KAAKC,UAAU5B,GAlBpD,CACX/C,QAAS,CACL,eAAgB,qBAgB0DL,EAAYC,IACzFgF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,SC0KrBxD,CAAkGW,GC1MpGiD,EAAkB,kBAAM,SAAC1D,EAAU3B,GAC5C2B,EAAS,CACLK,KAAMxC,MAID8F,GAAqB,kBAAM,SAAC3D,EAAU3B,GAC/C2B,EAAS,CACLK,KAAMvC,MAgBD8F,GAAa,SAACC,EAAQC,EAAOC,EAAQC,EAASC,EAAYC,EAAMC,EAAMC,GAAzD,OAAmE,SAACpE,EAAU3B,GACpG,IAAMgG,EAAOlB,KAAKC,UAAU,CAAES,SAAQC,QAAOC,SAAQC,UAASC,aAAYC,OAAMC,OAAMC,UAMtFnE,IACKC,KAAK,aAAcmE,EANT,CACX5F,QAAS,CACL,eAAgB,qBAIcL,EAAYC,IAC7CgF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QC5C9BgB,G,4MACFvE,MAAQ,CACJ+D,MAAO,I,EAkCXhB,SAAW,SAAAV,GAAC,OAAI,EAAKX,SAAS,CAAEqC,MAAO1B,EAAEC,OAAOC,S,EAEhDiC,SAAW,SAAAnC,GACPA,EAAEoC,iBACF,EAAK5F,MAAMgF,WAAW,EAAKhF,MAAME,KAAM,EAAKiB,MAAM+D,MAAO,EAAKlF,MAAMyF,KAAK3B,GAAI,GAAI,EAAK9D,MAAMqF,WAAY,EAAKrF,MAAMsF,KAAM,EAAKtF,MAAMuF,KAAM,EAAKvF,MAAMwF,OACrJ,EAAKxF,MAAM8E,kBACO9B,SAASC,eAAe,aAChC4C,QACV7C,SAASC,eAAe,aAAe,EAAKjD,MAAMyF,KAAK3B,IAAIV,UAAUC,OAAO,S,2CA/BhF,SAAMS,GACFd,SAASC,eAAe,aAAea,GAAIV,UAAUC,OAAO,QAC5DtD,KAAKC,MAAM8F,kB,oBAGf,SAAOhC,GACH/D,KAAKC,MAAM+F,cAAcjC,GACzB/D,KAAKC,MAAM8E,oB,kBAGf,SAAKhB,GACD/D,KAAKC,MAAMgG,YAAYlC,GACvB/D,KAAKC,MAAM8E,oB,2BAGf,SAAcmB,GACV,OAAIA,EACO,SAEA,S,oBAef,WAAU,IAAD,OACL,EAAoFlG,KAAKC,MAAMyF,KAAvF3B,EAAR,EAAQA,GAAImB,EAAZ,EAAYA,OAAQiB,EAApB,EAAoBA,KAAMhB,EAA1B,EAA0BA,MAAiDiB,GAA3E,EAAiChB,OAAjC,EAAyCC,QAAzC,EAAkDC,WAAlD,EAA8DE,KAA9D,EAAoEC,MAApE,EAA2EW,MAC3E,OACI,sBAAK3F,UAAWT,KAAKC,MAAMyB,KAAO,QAASqC,GAAIA,EAA/C,UACI,sBAAKtD,UAAWT,KAAKC,MAAMyB,KAAO,eAAlC,UACI,mBAAGjB,UAAU,cAAb,SAA4ByE,IAC5B,mBAAGzE,UAAU,YAAb,SAA0B0F,EAAKE,MAAM,EAAE,MACrCD,EAAQ,qBAAK3F,UAAU,eAAsB,2BAEnD,mBAAGA,UAAWT,KAAKC,MAAMyB,KAAO,cAAhC,SAAgDyD,IAC1B,QAApBnF,KAAKC,MAAMyB,KACT,wBAAQjB,UAAU,eAAeE,QAAS,kBAAM,EAAK2F,MAAMvC,IAA3D,mBACA,wBACFmB,IAAWlF,KAAKC,MAAME,KACpB,wBAAQM,UAAU,eAAeE,QAAS,kBAAM,EAAK4F,OAAOxC,IAA5D,oBACA,wBACFmB,IAAWlF,KAAKC,MAAME,KACpB,wBAAQM,UAAU,eAAeE,QAAS,kBAAM,EAAKyF,KAAKrC,IAA1D,SAAgE/D,KAAKwG,cAAcJ,KACnF,wBACJ,qBAAK3F,UAAU,aAAasD,GAAI,aAAeA,EAA/C,SACQ,sBAAM6B,SAAU5F,KAAK4F,SAAU7B,GAAG,YAAlC,SACI,sBAAKtD,UAAU,WAAf,UACA,uBACIiB,KAAK,WACL+E,KAAK,KACLhG,UAAU,aACVwD,KAAK,aACLF,GAAG,aACHI,SAAUnE,KAAKmE,SACfR,MAAO3D,KAAKmF,QAEhB,wBAAQzD,KAAK,SAASjB,UAAWT,KAAKC,MAAMyB,KAAO,+B,GA9E5D4C,IAAMpD,WA2FVC,gBAJS,SAAAC,GAAK,MAAK,CAC9BsF,MAAOtF,EAAMuF,SAASD,SAGc,CAACzB,cAAYe,cD5CxB,SAACjC,GAAD,OAAQ,SAAC1C,EAAU3B,GAC5C4B,IACKiF,OAAO,gBAAkBxC,EAAK,IAAKtE,EAAYC,IAC/CgF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QCyCgCsB,YDtCzC,SAAClC,GAAD,OAAQ,SAAC1C,EAAU3B,GAC1C4B,IACKsF,IAAI,cAAgB7C,EAAK,IAAKtE,EAAYC,IAC1CgF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QCmC6CI,kBAAiBgB,cDpErE,kBAAM,SAAC1E,EAAU3B,GAC1C2B,EAAS,CACLK,KAAMtC,OCkEC+B,CAAmGwE,ICzFrGkB,GAAb,4MACIzF,MAAQ,CACJ+D,MAAO,GACP2B,QAAS,GACTJ,MAAO,IAJf,EA2EIvC,SAAW,SAAAV,GAAC,OAAI,EAAKX,SAAS,CAAEqC,MAAO1B,EAAEC,OAAOC,SA3EpD,EA6EIiC,SAAW,SAAAnC,GACPA,EAAEoC,iBACF,EAAK5F,MAAMgF,WAAW,EAAKhF,MAAME,KAAKO,SAAU,EAAKU,MAAM+D,MAAO,KAAM,GAAI,EAAKlF,MAAMqF,WAAY,EAAKrF,MAAMsF,KAAM,EAAKtF,MAAMuF,KAAM,EAAKvF,MAAMwF,OAChJ,EAAKxF,MAAM8E,kBACX,EAAKgC,WACY9D,SAASC,eAAe,aAChC4C,SAnFjB,8CAgBI,WAAY,IAAD,OACPxE,IACK0F,IAAI,iBAAmBhH,KAAKC,MAAMqF,WAAa,IAAMtF,KAAKC,MAAMuF,KAAO,IAAMxF,KAAKC,MAAMwF,MAAQ,KAChGjE,MAAK,SAACC,GACH,EAAKqB,SAAS,CAAE4D,MAAOjF,EAAIwF,UAE9BvC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QAtBxC,wBAyBI,SAAWe,EAAMwB,GAAQ,IAAD,OACpB,GAAoB,OAAhBxB,EAAKN,OAAiB,CAGtB,IAFA,IAAIkB,EAAQZ,EACRyB,EAAQ,EACY,OAAjBb,EAAMlB,QAAiB,CAEtBkB,EAAQtG,KAAKoB,MAAMsF,MAAM1G,KAAKoB,MAAMsF,MAAMU,WAD7B,SAACC,GAAD,OAAaA,EAAQtD,KAAOuC,EAAMlB,WAEnD+B,GAAgB,EAEpB,GAAID,IAAQC,EACR,OAGR,OACI,gCACI,cAAC,GAAD,CACIzB,KAAMA,EACNvF,KAAMH,KAAKC,MAAME,KAAKO,SACtB4E,WAAYtF,KAAKC,MAAMqF,WACvBC,KAAMvF,KAAKC,MAAMsF,KACjBC,KAAMxF,KAAKC,MAAMuF,KACjB9D,KAAM1B,KAAKC,MAAMyB,KACjB+D,MAAOzF,KAAKC,MAAMwF,QAEtB,qBAAKhF,UAAU,QAAQ0C,MAAO,CAACmE,OAAQ,SAAWC,OAAQL,EAAM,GAAM,MAAtE,SAC0B,IAAxBxB,EAAKL,QAAQmC,OACX9B,EAAKL,QAAQoC,KAAI,SAACnB,GAAD,OAAW,EAAKoB,WAAWpB,EAAOY,EAAM,MACzD,+BApDpB,+BA4DI,WACIlH,KAAK+G,aA7Db,gCAgEI,WACO/G,KAAKC,MAAM0H,iBACV3H,KAAKC,MAAM+E,qBACXhF,KAAK+G,YAEN/G,KAAKC,MAAM2H,kBACV5H,KAAKC,MAAM4H,mBACX7H,KAAK+G,cAvEjB,oBAsFI,WAAU,IAAD,OACL,OACI,sBAAKtG,UAAWT,KAAKC,MAAMyB,KAAO,iBAAlC,UAC0B,QAApB1B,KAAKC,MAAMyB,KAAkB,qBAAKjB,UAAU,UAAUE,QAAS,kBAAM,EAAKoG,cAAqB,wBACjG,qBAAKhD,GAAG,iBAAR,SACK/D,KAAKoB,MAAMsF,MAAMe,KAAI,SAAC/B,GAAD,OAAU,EAAKgC,WAAWhC,EAAM,QAEtD,qBAAKjF,UAAWT,KAAKC,MAAMyB,KAAO,aAAlC,SACI,uBAAMkE,SAAU5F,KAAK4F,SAAU7B,GAAG,YAAlC,UACI,sBAAKtD,UAAWT,KAAKC,MAAMyB,KAAO,YAAlC,UACA,uBACIA,KAAK,WACL+E,KAAK,KACLhG,UAAWT,KAAKC,MAAMyB,KAAO,cAC7BuC,KAAMjE,KAAKC,MAAMyB,KAAO,cACxBqC,GAAG,aACHI,SAAUnE,KAAKmE,SACfR,MAAO3D,KAAKmF,QAEhB,wBAAQzD,KAAK,SAASjB,UAAWT,KAAKC,MAAMyB,KAAO,oBAEjD1B,KAAKoB,MAAMsF,QAAU,GAAM,mBAAGjG,UAAU,iBAAb,wBAA+C,oCA3GxG,GAA6B6D,IAAMpD,WAyHpBC,gBANS,SAAAC,GAAK,MAAK,CAC9BuG,eAAgBvG,EAAMuF,SAASgB,eAC/BC,gBAAiBxG,EAAMuF,SAASiB,gBAChCzH,KAAMiB,EAAMxB,KAAKO,QAGmB,CAAC8E,cAAYF,kBAAiBC,sBAAoB6C,iBF9F1D,kBAAM,SAACxG,EAAU3B,GAC7C2B,EAAS,CACLK,KAAMrC,OE4FC8B,CAA8F0F,IC5HvGiB,G,4JAEF,WACA,IAAMC,EAAM/H,KAAKC,MAAM+H,UAAYhI,KAAKC,MAAMgI,UAAY,IAAMjI,KAAKC,MAAMsF,KAAO,IAAMvF,KAAKC,MAAMiI,UAAY,OAC3G,OACI,qBAAKC,IAAKJ,EAAKtH,UAAU,QACzB2H,IAAKpI,KAAKC,MAAMoI,eAChBtE,GAAI/D,KAAKC,MAAMiI,UAAY,SAC3B/E,MAAO,CAACmF,OAAQf,OAAOgB,OAAOvI,KAAKC,MAAMqI,QAAQtI,KAAKC,MAAM+C,OAAO,Y,GARnDsB,IAAMpD,WA4FlBsH,G,iKA7EZ,WACE,OACI,cAAC,GAAD,CACIR,UAAW,8BAAgChI,KAAKC,MAAMqF,WAAa,IACnE2C,UAAWjI,KAAKC,MAAMgI,UACtB3C,WAAYtF,KAAKC,MAAMqF,WACvBC,KAAMvF,KAAKC,MAAMsF,KACjB2C,UAAWlI,KAAKC,MAAMiI,UACtBG,eAAgBrI,KAAKC,MAAMwI,WAC3BH,OAAQtI,KAAKC,MAAMqI,OACnBtF,MAAOhD,KAAKC,MAAM+C,U,uBAK5B,WACE,OAAIhD,KAAKC,MAAMqI,OAAS,EACf,IAEEf,OAAQgB,OAAOvI,KAAKC,MAAMqI,QAAUtI,KAAKC,MAAM+C,MAAS,Q,sBAIrE,WACE,OAAIhD,KAAKC,MAAMyI,MAAQ,EACd,IAEEnB,OAAOgB,OAAOvI,KAAKC,MAAMyI,OAAO1I,KAAKC,MAAM+C,S,6BAIxD,WACEhD,KAAKC,MAAM0I,WAAW3I,KAAKC,MAAMiI,WAAW,GAAO,GACnDjF,SAASC,eAAelD,KAAKC,MAAMiI,UAAY,SAAS7E,UAAUC,OAAO,aACzEL,SAASC,eAAelD,KAAKC,MAAMiI,UAAY,UAAU7E,UAAUC,OAAO,QAC1EL,SAASC,eAAelD,KAAKC,MAAMiI,WAAW7E,UAAUC,OAAO,U,oBAGjE,WAAU,IAAD,OACDsF,EAAY,CACdN,OAAQtI,KAAK6I,YAAc,KAC3BH,MAAO1I,KAAK8I,WAAa,MAG7B,OACM,8BACE,qBAAKrI,UAAU,kBAAkBsD,GAAG,kBAAkBpD,QAAS,kBAAM,EAAKV,MAAMU,QAAQ,EAAKV,MAAMiI,YAAnG,SACI,sBAAKzH,UAAU,WAAf,UACKT,KAAK+I,cACN,qBAAKtI,UAAU,OAAOuI,aAAc,kBAAM,EAAK/I,MAAM0I,WAAW,EAAK1I,MAAMiI,WAAW,GAAO,IACzFe,aAAc,kBAAM,EAAKhJ,MAAM0I,WAAW,EAAK1I,MAAMiI,WAAW,GAAM,IACtEvH,QAAS,kBAAM,EAAKuI,qBACxB,sBAAKzI,UAAU,WAAWsD,GAAI/D,KAAKC,MAAMiI,UAAY,QAAS/E,MAAOyF,EAArE,UACI,mBAAGnI,UAAU,sBAAb,SAAoCT,KAAKC,MAAMwI,aAC/C,mBAAGhI,UAAU,kBAAb,SAAgC,UAAYT,KAAKC,MAAMiI,YACvD,mBAAGzH,UAAU,cAAb,SAA4B,iBAAmBT,KAAKC,MAAMkJ,OAAS,MAAQnJ,KAAKC,MAAMkG,OACpFnG,KAAKC,MAAMmJ,YAAYC,SAASrJ,KAAKC,MAAMiI,WAC7C,cAAC,GAAD,CACI5C,WAAYtF,KAAKC,MAAMqF,WACvBC,KAAMvF,KAAKC,MAAMsF,KACjBC,KAAMxF,KAAKC,MAAMuF,KACjB9D,KAAK,SACL+D,MAAOzF,KAAKC,MAAMiI,YAEtB,2BAGJ,qBAAKzH,UAAU,KAAKsD,GAAI/D,KAAKC,MAAMiI,UAAnC,SACI,mBAAGzH,UAAU,UAAUsD,GAAI/D,KAAKC,MAAMiI,UAAY,QAAlD,SAA4DlI,KAAKC,MAAMqJ,0B,GAtE1EhF,IAAMpD,WClBd,w7BC8BCqI,G,oKAzBZ,WACItG,SAASC,eAAe,uBAAuBG,UAAUC,OAAO,QAChEL,SAASC,eAAe,oBAAoBG,UAAUC,OAAO,QAC7DL,SAASC,eAAe,kBAAkBG,UAAUC,OAAO,0B,oBAG/D,WAAU,IAAD,OACCkG,EAAUxJ,KAAKC,MAAMuJ,QAAQ/B,KAAI,SAACgC,GAAD,OACvC,oBAAY9I,QAAS,kBAAM,EAAKV,MAAMU,QAAQ8I,IAA9C,SAAkD,wBAAQ1F,GAAI0F,EAAZ,SAAgBA,KAAzDA,MACT,OACI,gCACI,sBAAKhJ,UAAU,mBAAmBsD,GAAG,iBAArC,UACI,mBAAGtD,UAAU,iBAAb,SAA+BT,KAAKC,MAAMqF,aAC1C,qBAAK6C,IAAKuB,GAAUjJ,UAAU,YAC9B2H,IAAK,qBAAsBzH,QAAS,kBAAM,EAAKgJ,uBAEnD,qBAAKlJ,UAAU,4BAA4BsD,GAAG,sBAA9C,SACI,oBAAItD,UAAU,oBAAd,SAAmC+I,MAEvC,mBAAG/I,UAAU,aAAasD,GAAG,mBAA7B,gC,GApBgBO,IAAMpD,WC0BtB0I,G,oKAzBZ,WACI3G,SAASC,eAAe,iBAAiBG,UAAUC,OAAO,QAC1DL,SAASC,eAAe,cAAcG,UAAUC,OAAO,QACvDL,SAASC,eAAe,YAAYG,UAAUC,OAAO,0B,oBAGzD,WAAU,IAAD,OACCkG,EAAUxJ,KAAKC,MAAMuJ,QAAQ/B,KAAI,SAACgC,GAAD,OACvC,oBAAY9I,QAAS,kBAAM,EAAKV,MAAMU,QAAQ8I,IAA9C,SAAkD,wBAAQ1F,GAAI0F,EAAZ,SAAgBA,KAAzDA,MACT,OACI,gCACI,sBAAKhJ,UAAU,OAAOsD,GAAG,WAAzB,UACI,mBAAGtD,UAAU,iBAAb,SAA+BT,KAAKC,MAAM4J,OAC1C,qBAAK1B,IAAKuB,GAAUjJ,UAAU,YAC9B2H,IAAK,cAAezH,QAAS,kBAAM,EAAKgJ,uBAE5C,qBAAKlJ,UAAU,gBAAgBsD,GAAG,gBAAlC,SACI,oBAAItD,UAAU,cAAd,SAA6B+I,MAEjC,mBAAG/I,UAAU,aAAasD,GAAG,aAA7B,yB,GApBUO,IAAMpD,WC0BhB4I,G,oKAzBZ,WACI7G,SAASC,eAAe,gBAAgBG,UAAUC,OAAO,QACzDL,SAASC,eAAe,aAAaG,UAAUC,OAAO,QACtDL,SAASC,eAAe,WAAWG,UAAUC,OAAO,0B,oBAGxD,WAAU,IAAD,OACCkG,EAAUxJ,KAAKC,MAAMuJ,QAAQ/B,KAAI,SAACgC,GAAD,OACvC,oBAAY9I,QAAS,kBAAM,EAAKV,MAAMU,QAAQ8I,IAA9C,SAAkD,wBAAQ1F,GAAI0F,EAAZ,SAAgBA,KAAzDA,MACT,OACI,gCACI,sBAAKhJ,UAAU,OAAOsD,GAAG,UAAzB,UACI,mBAAGtD,UAAU,iBAAiBsD,GAAG,WAAjC,SAA6C/D,KAAKC,MAAM8J,MACxD,qBAAK5B,IAAKuB,GAAUjJ,UAAU,YAC9B2H,IAAK,aAAczH,QAAS,kBAAM,EAAKgJ,uBAE3C,qBAAKlJ,UAAU,gBAAgBsD,GAAG,eAAlC,SACI,oBAAItD,UAAU,cAAd,SAA6B+I,MAEjC,mBAAG/I,UAAU,aAAasD,GAAG,YAA7B,wB,GApBSO,IAAMpD,WCgBb8I,G,iKAhBd,SAAYC,GACRjK,KAAKC,MAAMiK,QAAQD,K,oBAEvB,WAAU,IAAD,OACL,OACI,sBAAKxJ,UAAU,gBAAf,UACI,qBAAKA,UAAU,MAAMsD,GAAI,MAAQ/D,KAAKC,MAAMkK,OAA5C,SAAqDnK,KAAKC,MAAM8J,MAChE,qBAAKtJ,UAAU,MAAMsD,GAAI,MAAQ/D,KAAKC,MAAMkK,OACxCxJ,QAAS,kBAAM,EAAKV,MAAMU,QAAQ,EAAKV,MAAMkK,SAC7CnB,aAAc,kBAAM,EAAKoB,YAAY,EAAKnK,MAAMkK,SAChDlB,aAAc,kBAAM,EAAKmB,YAAY,EAAKnK,MAAMoK,UAChDlH,MAAO,CAACmF,OAAQf,OAAyB,EAAlBvH,KAAKC,MAAMqI,QAAY,e,GAZhDhE,IAAMpD,WC6BRoJ,G,oKA3BZ,WACIrH,SAASC,eAAe,iBAAiBG,UAAUC,OAAO,QAC1DL,SAASC,eAAe,cAAcG,UAAUC,OAAO,QACvDL,SAASC,eAAe,YAAYG,UAAUC,OAAO,0B,oBAGzD,WAAU,IAAD,OACCkG,EAAUxJ,KAAKC,MAAMuJ,QAAQ/B,KAAI,SAACgC,GAAD,OACvC,oBAAY9I,QAAS,kBAAM,EAAKV,MAAMU,QAAQ8I,IAA9C,SAAkD,wBAAQ1F,GAAI0F,EAAZ,SAAgBA,KAAzDA,MACLc,EAAWvK,KAAKC,MAAMuF,KACpBA,EAAO+E,EAASlE,MAAM,EAAE,IAAM,IAAMkE,EAASlE,MAAM,GAAG,IAAM,IAAMkE,EAASlE,MAAM,GAAG,IAAM,IAChG,OACI,gCACI,sBAAK5F,UAAU,OAAOsD,GAAG,WAAzB,UACI,mBAAGtD,UAAU,iBAAb,SAA+B+E,IAC/B,qBAAK2C,IAAKuB,GAAUjJ,UAAU,YAC9B2H,IAAK,cAAezH,QAAS,kBAAM,EAAKgJ,uBAE5C,qBAAKlJ,UAAU,gBAAgBsD,GAAG,gBAAlC,SACI,oBAAItD,UAAU,cAAd,SAA6B+I,MAEjC,mBAAG/I,UAAU,aAAasD,GAAG,aAA7B,yB,GAtBUO,IAAMpD,W,ICDZoD,IAAMpD,U,OCHX,OAA0B,mCCwBnCsJ,G,4JACF,WACI,OACI,sBAAK/J,UAAU,WAAf,UACI,qBAAKA,UAAU,mBACf0C,MAAO,CAACuF,MAAQnB,OAAO,GAAGvH,KAAKC,MAAM+C,OAAS,QAC9C,mBAAGvC,UAAU,kBAAb,4B,GANS6D,IAAMpD,WAYzBuJ,G,4JACJ,WAAU,IAAD,OACCjB,EAAUxJ,KAAKC,MAAMyK,QAAQjD,KAAI,SAACgC,GAAD,OACvC,6BAAY,wBAAQ1F,GAAI0F,EAAG9I,QAAS,kBAAM,EAAKV,MAAMU,QAAQ8I,IAAjD,SAAsDA,KAAzDA,MACT,OACA,sBAAKhJ,UAAU,UAAf,UACA,sBAAKA,UAAU,aAAf,UACI,sBAAKA,UAAU,cAAf,UACE,qBAAKA,UAAU,qBAAqBE,QAAS,kBAAO,EAAKV,MAAM0K,wBAA/D,SACI,mBAAGlK,UAAU,eAAb,0BAEJ,qBAAKA,UAAU,qBAAqBE,QAAS,kBAAO,EAAKV,MAAM2K,mBAA/D,SACI,mBAAGnK,UAAU,eAAb,uBAGN,oBAAIA,UAAU,qBAAd,SAAoC+I,OAExC,cAAC,GAAD,CAAYxG,MAAOhD,KAAKC,MAAM+C,e,GAjBZsB,IAAMpD,WAuBxB2J,G,4JACF,WAAU,IAAD,OACL,OACI,qBAAKpK,UAAWT,KAAKC,MAAMQ,UAAWE,QAAS,kBAAM,EAAKV,MAAMU,WAAhE,SACI,4BAAIX,KAAKC,MAAM6K,a,GAJPxG,IAAMpD,WAUxB6J,G,kDACJ,WAAY9K,GAAQ,IAAD,8BACf,cAAMA,IACDmB,MAAQ,CACT4J,SAAS,EACTC,QAAS,GACTC,cAAe,GACfR,QAAS,GACTS,WAAY,GACZC,YAAa,eACbC,UAAW,MACXC,sBAAsB,EACtBlC,YAAa,GACbmC,IAAK,CAACjG,WAAW,GAAIC,KAAK,GAAIsE,KAAK,GAAIE,IAAI,GAAIvE,KAAK,IACpDgG,kBAAmB,GACnBC,YAAa,GACbC,WAAY,GACZC,WAAY,GACZC,YAAa,GACbC,WAAY,GACZC,WAAY,GACZC,QAAS,GACTxI,QAAS,GACTkD,KAAM,GACNuF,mBAAeC,EACfC,UAAW,GACXC,gBAAiB,GACjBC,kBAAmB,GACnBC,YAAa,GACbC,eAAgB,GAChBtJ,MAAO,KACPuJ,WAAY,EACZC,UAAW,GACXC,SAAU,WACVC,KAAM,QAEV,EAAKC,mBAAqB,EAAKA,mBAAmBjK,KAAxB,gBAnCX,E,iDAwDnB,SAAc2E,GACRpE,SAASC,eAAemE,EAAU,aAAahE,UAAUuJ,SAAS,UAClE3J,SAASC,eAAemE,EAAU,aAAahE,UAAUC,OAAO,QAChEL,SAASC,eAAemE,EAAU,UAAUhE,UAAUC,OAAO,QAC7DL,SAASC,eAAemE,EAAU,QAAQhE,UAAUC,OAAO,2B,8BAIjE,SAAiBuJ,GAAS,IAAD,OACvB7M,KAAK8M,cAAc,cACnB9M,KAAK8C,SAAS,CAAEkI,SAAS,IACzB1J,IACK0F,IAAI,uBAAyB6F,EAAS,KACtCrL,MAAK,SAACC,GAAU,EAAKqB,SAAS,CAC3BoI,cAAe2B,EACf5B,QAASxJ,EAAIwF,KAAKsE,IAAI/F,UAEzBd,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,Q,+BAGlC,WAAqB,IAAD,OAClB3E,KAAK8C,SAAS,CAAEkI,SAAS,IACzB,IAAM+B,EAAU/M,KAAKC,MAAM+M,SAASC,SAASC,MAAM,KACnD,GAAGH,EAAQvF,OAAO,EACmB,WAA9BxH,KAAKC,MAAMkN,YAAYpK,KACtB/C,KAAKoN,iBAELpN,KAAKqN,iBAAiB,eAEvB,CACH,IAAM/H,EAAayH,EAAQ,GACrBvH,EAAOuH,EAAQ,GAErBzL,IACK0F,IAAI,oBACJxF,MAAK,SAACC,GAAS,EAAKqB,SAAS,CAAE0I,kBAAmB/J,EAAIwF,KAAKQ,KAAI,SAAC6F,GAAD,OAAQA,EAAErJ,aACzES,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MAE5B3E,KAAK8C,SAAS,CACVkI,SAAS,IAEb1J,IACK0F,IAAI,qBACJxF,MAAK,SAACC,GACP,EAAKqB,SAAS,CACV4H,QAASjJ,EAAIwF,KAAKQ,KAAI,SAAC6F,GAAD,OAAQA,EAAEC,aAAaC,QAAQ,IAAK,QAC1DrC,WAAY1J,EAAIwF,KAAKQ,KAAI,SAAC6F,GAAD,OAAQA,EAAEG,aAGtC/I,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MAEpCrD,IACK0F,IAAI,iBAAmB1B,EAAa,IAAME,EAAO,IAAMxF,KAAKC,MAAMkN,YAAYtK,KAC3E,IAAM6K,KAAKC,MAAqC,IAA/B3N,KAAKC,MAAMkN,YAAYnK,OAAgB,KAC3DxB,MAAK,SAACC,GACH,EAAKqB,SAAS,CACVyI,IAAK9J,EAAIwF,KAAKsE,IACdE,YAAahK,EAAIwF,KAAKuC,QAAQoE,aAAaC,UAC3ClC,WAAYlK,EAAIwF,KAAKuC,QAAQsE,YAAY,GACzCpC,WAAYjK,EAAIwF,KAAKuC,QAAQsE,YAAY,GACzClC,YAAanK,EAAIwF,KAAKuC,QAAQuE,aAC9BlC,WAAYpK,EAAIwF,KAAKuC,QAAQwE,YAC7BvH,KAAMhF,EAAIwF,KAAKuC,QAAQ/C,KACvBqF,WAAYrK,EAAIwF,KAAKuC,QAAQyE,YAC7BzB,UAAW/K,EAAIwF,KAAKsE,IAAIxB,MAE5BzI,IACK0F,IAAI,oBAAsB1B,EAAa,IAAME,EAAO,IAAM,EAAKvF,MAAMkN,YAAYtK,KAAO,KACxFrB,MAAK,SAAC0M,GACH,EAAKpL,SAAS,CACViJ,QAASmC,EAAejH,KACxB1D,QAAS,CAACiB,KAAKC,UAAUyJ,EAAejH,OACxC+D,SAAS,UAIxBtG,OAAM,SAACC,GACJC,QAAQC,IAAIF,GACZ,EAAK7B,SAAS,CAAEyI,IAAK,CAACjG,WAAW,GAAIC,KAAK,GAAIsE,KAAK,GAAIE,IAAI,GAAIvE,KAAK,kBAK5ExF,KAAKC,MAAMsC,aAAevC,KAAKC,MAAMkN,YAAYnK,OACjDhD,KAAKC,MAAM0B,YAAY3B,KAAKC,MAAMkN,YAAYnK,S,gCAIpD,SAAmBmL,GACbnO,KAAKC,MAAMmO,MAAMrG,MAAQoG,EAAUC,MAAMrG,KACzC/H,KAAKC,MAAMsD,QAAQC,GAAG,K,wBAI5B,SAAWqJ,GAAS,IAAD,OACjB7M,KAAK8M,cAAc,QACnB9M,KAAK8C,SAAS,CAAEkI,SAAS,IACzB1J,IACK0F,IAAI,iBAAmBhH,KAAKoB,MAAMmK,IAAIjG,WAAa,IAAMuH,EAAS,KAClErL,MAAK,SAACC,GAAU,EAAKqB,SAAS,CAC3BoI,cAAe,EAAK9J,MAAMmK,IAAIjG,WAC9B2F,QAASxJ,EAAIwF,KAAKsE,IAAI/F,UAEzBd,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,Q,4BAGlC,SAAekI,GACX7M,KAAK8C,SAAS,CAAE0J,UAAWxM,KAAKoB,MAAMsK,WAAWmB,O,uBAGrD,SAAUA,GAAS,IAAD,OACVwB,EAAYpL,SAASC,eAAe,sBAAsBG,UAC5DgL,EAAUzB,SAAS,aACnByB,EAAU/K,OAAO,YAGrBtD,KAAK8M,cAAc,OACnB9M,KAAK8C,SAAS,CAAEkI,SAAS,IACzB1J,IACK0F,IAAI,gBAAkBhH,KAAKoB,MAAMmK,IAAIjG,WAAa,IAAMtF,KAAKoB,MAAMmK,IAAI1B,KAAO,IAAOgD,EAAS,KAC9FrL,MAAK,SAACC,GAAU,EAAKqB,SAAS,CAC3BoI,cAAe,EAAK9J,MAAMmK,IAAIjG,WAC9B2F,QAASxJ,EAAIwF,KAAKsE,IAAI/F,UAEzBd,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,Q,0BAGlC,SAAakI,GACX5J,SAASqL,KAAKC,UAAY,EAC1BtL,SAASuL,gBAAgBD,UAAY,EACrC,IACME,EAAYzO,KAAKoB,MAAMsK,WAAWtE,WADzB,SAACC,GAAD,OAAaA,IAAYwF,KAExC7M,KAAK0O,UAAUD,K,2BAGjB,SAAc5B,GAEZ5J,SAASqL,KAAKC,UAAY,EAC1BtL,SAASuL,gBAAgBD,UAAY,EACrCvO,KAAK8M,cAAc,QAEnB,IAAMtH,EAAO,IAAMxF,KAAKoB,MAAMmK,IAAI1B,KAAO7J,KAAKoB,MAAMmK,IAAIxB,IAAI1D,MAAM,EAAE,GAAKrG,KAAKoB,MAAMmK,IAAIxB,IAAI1D,MAAM,EAAE,GACpGwG,EAAOxG,MAAM,EAAE,GAAKwG,EAAOxG,MAAM,EAAE,GAAKwG,EAAOxG,MAAM,EAAE,GAEvDrG,KAAK8C,SAAS,CACVoI,cAAelL,KAAKoB,MAAMmK,IAAIjG,WAC9B2F,QAASzF,M,6BAIf,SAAgB6B,GACdA,EAAQlE,MAAMwL,gBAAkB,Y,4BAGlC,SAAetH,GACbA,EAAQlE,MAAMwL,gBAAkB,Y,6BAGlC,SAAgB1K,GACZ,IAAM2K,EAAW3L,SAASC,eAAelD,KAAKoB,MAAMgK,aACpDwD,EAASzL,MAAMwL,gBAAkB,UACjCC,EAASC,iBAAiB,YAAa7O,KAAK8O,gBAAgBF,IAC5DA,EAASC,iBAAiB,WAAY7O,KAAK+O,eAAeH,IAI1D,IAFA,IAAMI,EAAM/L,SAASgM,uBAAuB,MACtCC,EAAUjM,SAASgM,uBAAuB,WACvCE,EAAE,EAAGA,EAAEH,EAAIxH,OAAQ2H,IACa,YAAjCH,EAAIG,GAAGhM,MAAMwL,kBACfK,EAAIG,GAAGhM,MAAMwL,gBAAkB,UAC/BO,EAAQC,GAAGhM,MAAMiM,MAAQ,WAK/BpP,KAAK8C,SAAS,CACVsI,YAAanH,EACboH,UAAWrL,KAAKoB,MAAM+J,WAAWnL,KAAKoB,MAAMsJ,QAAQtD,WAHvC,SAACC,GAAD,OAAaA,IAAYpD,QAK1C,IAAMoL,EAAOpM,SAASC,eAAee,GACrCoL,EAAKC,oBAAoB,WAAYtP,KAAK+O,eAAeM,IACzDA,EAAKlM,MAAMwL,gBAAkB,UAtBX,oBAwBG3O,KAAKoB,MAAM2K,SAxBd,IAwBlB,2BAAyC,CAAC,IAA/BrI,EAA8B,QACrC,GAAIA,EAAO+E,aAAexE,EAAM,CAC5B,IAAMsL,EAAYtM,SAASC,eAAeQ,EAAOyG,QAC3CW,EAAO7H,SAASC,eAAeQ,EAAOyG,OAAO,SACnDoF,EAAUpM,MAAMwL,gBAAkB,UAClC7D,EAAK3H,MAAMiM,MAAQ,YA7BT,iC,uBAkCtB,WACKnM,SAASqL,KAAKC,UAAY,GAAKtL,SAASuL,gBAAgBD,UAAY,GACpC,IAA5BtL,SAASqL,KAAKC,UACbvO,KAAK8C,SAAS,CAAEyJ,WAAYtJ,SAASqL,KAAKC,YAE1CvO,KAAK8C,SAAS,CAAEyJ,WAAYtJ,SAASuL,gBAAgBD,YAEzDtL,SAASqL,KAAKC,UAAY,EAC1BtL,SAASuL,gBAAgBD,UAAY,IAErCtL,SAASqL,KAAKC,UAAYvO,KAAKoB,MAAMmL,WACrCtJ,SAASuL,gBAAgBD,UAAYvO,KAAKoB,MAAMmL,c,2BAItD,WAC4C,OAAtCtJ,SAASC,eAAe,YACrBD,SAASqL,KAAKC,UAAY,GAAKtL,SAASuL,gBAAgBD,UAAY,EACnEtL,SAASC,eAAe,UAAUG,UAAUmM,OAAO,QAC3CvM,SAASC,eAAe,UAAUG,UAAUuJ,SAAS,SAC7D3J,SAASC,eAAe,UAAUG,UAAUoM,IAAI,W,kCAK1D,WAKI,IALoB,IAAD,OACf1D,EAAU/L,KAAKoB,MAAM2K,QACnBtL,EAAYT,KAAKoB,MAAMgK,YAEvBsE,EAAY1P,KAAKoB,MAAM+J,WAAWnL,KAAKoB,MAAMsJ,QAAQtD,WADrC,SAACC,GAAD,OAAaA,IAAY,EAAKjG,MAAMgK,gBAEjD+D,EAAI,EAAGA,EAAIpD,EAAQvE,OAAQ2H,IAAK,CACrCpD,EAAQoD,GAAG1G,WAAahI,EACxBsL,EAAQoD,GAAG7F,WAAaoG,EACxB3D,EAAQoD,GAAGhG,OAASnJ,KAAKC,MAAME,KAAKO,SACpC,IAAM6O,EAAYtM,SAASC,eAAe6I,EAAQoD,GAAGhF,QAC/CW,EAAO7H,SAASC,eAAe6I,EAAQoD,GAAGhF,OAAO,SACvDoF,EAAUpM,MAAMwL,gBAAkB,UAClC7D,EAAK3H,MAAMiM,MAAQ,UAEvBpP,KAAK8C,SAAS,CACViJ,QAASA,EACTxI,QAASvD,KAAKoB,MAAMmC,QAAQoM,OAAO,CAACnL,KAAKC,UAAUsH,OAExD/L,KAAKC,MAAM2P,KAAK7D,EAAS/L,KAAKoB,MAAMmK,IAAIjG,WAAYtF,KAAKoB,MAAMmK,IAAI/F,KAAMxF,KAAKC,MAAMkN,YAAYtK,Q,6BAGnG,WACE,GAAI7C,KAAKoB,MAAMmC,QAAQiE,OAAS,EAAG,CACjC,IAAMqI,EAAa7P,KAAKoB,MAAMmC,QAAQ8C,MAAM,EAAGrG,KAAKoB,MAAMmC,QAAQiE,OAAO,GACnEuE,EAAUvH,KAAKsL,MAAMD,EAAWA,EAAWrI,OAAO,IAClDf,EAAOzG,KAAKoB,MAAMqF,KACxBzG,KAAK8C,SAAS,CAAE2D,KAAM,KACtBzG,KAAK8C,SAAS,CACViJ,QAASA,EACTxI,QAASsM,IAEb7P,KAAK8C,SAAS,CAAE2D,KAAMA,IACtBzG,KAAKC,MAAM2P,KAAK7D,EAAS/L,KAAKoB,MAAMmK,IAAIjG,WAAYtF,KAAKoB,MAAMmK,IAAI/F,KAAMxF,KAAKC,MAAMkN,YAAYtK,S,6BAIpG,WAAmB,IAAD,OAChBI,SAASC,eAAe,QAAQG,UAAUC,OAAO,WACjDtD,KAAK8C,SAAS,CAAE2D,KAAM,KACtBzG,KAAKC,MAAM8P,KAAK/P,KAAKoB,MAAMmK,IAAIjG,WAAYtF,KAAKoB,MAAMmK,IAAI1B,KAAM7J,KAAKoB,MAAMmK,IAAIxB,IAAK/J,KAAKoB,MAAMmK,IAAI/F,MACnGlE,IACK0F,IAAI,oBAAsBhH,KAAKoB,MAAMmK,IAAIjG,WAAa,IAAMtF,KAAKoB,MAAMmK,IAAI/F,KAAO,IAAMxF,KAAKC,MAAMkN,YAAYtK,KAAO,KACtHrB,MAAK,SAAC0M,GACH,EAAKpL,SAAS,CACViJ,QAASmC,EAAejH,KACxB1D,QAAS,EAAKnC,MAAMmC,QAAQoM,OAAO,CAACnL,KAAKC,UAAUyJ,EAAejH,aAG9E3F,IACK0F,IAAI,gBAAkBhH,KAAKoB,MAAMmK,IAAIjG,WAAa,IAAMtF,KAAKoB,MAAMmK,IAAI/F,KAAnE,KACKxF,KAAKC,MAAMkN,YAAYtK,KAAO,IAAM6K,KAAKC,MAAyB,IAAnB3N,KAAKoB,MAAM4B,OAAgB,KACnFxB,MAAK,SAACC,GAAS,EAAKqB,SAAS,CAC1B2D,KAAMhF,EAAIwF,KAAKuC,QAAQ/C,KACvBuE,SAAS,OAEZtG,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MAChC1B,SAASC,eAAe,QAAQG,UAAUC,OAAO,a,kCAGnD,WACE,IAAM+K,EAAYpL,SAASC,eAAe,aACfD,SAASC,eAAe,sBAChCG,UAAUC,OAAO,YACpC+K,EAAUE,UAAYF,EAAU2B,e,4BAGlC,SAAeC,GAAI,IAAD,OACZlE,EAAU/L,KAAKoB,MAAM2K,QACnBmE,EAAMlQ,KAAKoB,MAAMqF,KAAKwJ,GAC5B,IAAK,IAAId,KAAKe,EAAK,CACf,IAAIC,EAAID,EAAIf,GAEZpD,EAAQoE,GAAG1H,WAAazI,KAAKoB,MAAMgK,YACnCW,EAAQoE,GAAG7G,WAAatJ,KAAKoB,MAAM+J,WAAWnL,KAAKoB,MAAMsJ,QAAQtD,WAF/C,SAACC,GAAD,OAAaA,IAAY,EAAKjG,MAAMgK,gBAGtDW,EAAQoE,GAAGhH,OAASnJ,KAAKC,MAAME,KAAKO,SACpC,IAAM6O,EAAYtM,SAASC,eAAe6I,EAAQoE,GAAGhG,QAC/CW,EAAO7H,SAASC,eAAe6I,EAAQoE,GAAGhG,OAAO,SACvDoF,EAAUpM,MAAMwL,gBAAkB,UAClC7D,EAAK3H,MAAMiM,MAAQ,UAEvBpP,KAAK8C,SAAS,CACViJ,QAASA,EACTxI,QAASvD,KAAKoB,MAAMmC,QAAQoM,OAAO,CAACnL,KAAKC,UAAUsH,OAEvD,IAAMqE,EAAQF,EAAI,GACZG,EAAMH,EAAIf,GACVmB,EAAYvE,EAAQ1F,MAAM+J,EAAOC,EAAI,GAE3CrQ,KAAKC,MAAMsQ,YAAYD,EAAWtQ,KAAKoB,MAAMmK,IAAIjG,WAAYtF,KAAKoB,MAAMmK,IAAI/F,KAAMxF,KAAKC,MAAMkN,YAAYtK,KAAMuN,EAAOC,K,kCAGxH,SAAqBnI,EAAWsI,EAAMpH,GACpC,IAAMqH,EAAgBxN,SAASC,eAAegF,EAAY,SAAS7E,UACnE,GAAK+F,GAAiBqH,EAAc7D,SAAS,aACpC5M,KAAKoB,MAAMgI,YAAYC,SAASnB,IACjClI,KAAK8C,SAAS,CAAEsG,YAAapJ,KAAKoB,MAAMgI,YAAYuG,OAAO,CAACzH,MAEhElI,KAAK8C,SAAS,CAAEwI,sBAAsB,QACnC,CACH,IAAMoF,EAAiB1Q,KAAKoB,MAAMgI,YAAYuH,QAAO,SAASC,GAC1D,OAAOA,IAAS1I,KAEpBlI,KAAK8C,SAAS,CAAEwI,qBAAsBkF,EAAMpH,YAAasH,O,iCAI/D,SAAoBvB,GAAI,IAAD,OACrB,GAAInP,KAAKoB,MAAMkK,qBAAsB,CACjC,IAAIS,EAAU/L,KAAKoB,MAAM2K,QACnBoE,EAAIpE,EAAQ3E,WAAU,SAAA1D,GAAM,OAAIA,EAAOyG,SAAWgF,KAExDpD,EAAQoE,GAAG1H,WAAazI,KAAKoB,MAAMgK,YACnCW,EAAQoE,GAAG7G,WAAatJ,KAAKoB,MAAM+J,WAAWnL,KAAKoB,MAAMsJ,QAAQtD,WAF/C,SAACC,GAAD,OAAaA,IAAY,EAAKjG,MAAMgK,gBAGtDW,EAAQoE,GAAGhH,OAASnJ,KAAKC,MAAME,KAAKO,SACpC,IAAM6C,EAAUvD,KAAKoB,MAAMmC,QAC3BvD,KAAK8C,SAAS,CACVS,QAASA,EAAQoM,OAAO,CAACnL,KAAKC,UAAUsH,KACxCA,QAASA,IAEb,IAAMwD,EAAYtM,SAASC,eAAe6I,EAAQoE,GAAGhG,QAC/CW,EAAO7H,SAASC,eAAe6I,EAAQoE,GAAGhG,OAAO,SACvDoF,EAAUpM,MAAMwL,gBAAkB,UAClC7D,EAAK3H,MAAMiM,MAAQ,UAEnBpP,KAAKC,MAAM4Q,eAAe9E,EAAQoE,GAAInQ,KAAKoB,MAAMmK,IAAIjG,WAAYtF,KAAKoB,MAAMmK,IAAI/F,KAAMuG,EAAQoE,GAAGhG,W,uBAIvG,WACyBlH,SAASC,eAAe,iBAChCG,UAAUC,OAAO,QAC9B,IAAMwN,EAAa7N,SAASC,eAAe,qBACjB,eAAzB4N,EAAWC,UAA8BD,EAAWC,UAAY,aAAeD,EAAWC,UAAY,e,sBAI3G,WACE,IAAMD,EAAa7N,SAASC,eAAe,oBACjB,cAAzB4N,EAAWC,UAA6BD,EAAWC,UAAY,YAAcD,EAAWC,UAAY,YAEnG,IADF,IAAMC,EAAc/N,SAASgM,uBAAuB,QACzCE,EAAI,EAAGA,EAAI6B,EAAYxJ,OAAQ2H,IACpC6B,EAAY7B,GAAG9L,UAAUC,OAAO,U,yBAIxC,SAAY2N,GAAM,IAAD,OACTC,EAAelR,KAAKoB,MAAM4B,MAC3BpB,EAAW,EACJ,OAARqP,EACArP,EAAWsP,EAAe,IACV,SAARD,IACRrP,EAAWsP,EAAe,KAE9B5P,IACG0F,IAAI,gBAAkBhH,KAAKoB,MAAMmK,IAAIjG,WAAa,IAAMtF,KAAKoB,MAAMmK,IAAI/F,KAAnE,KACGxF,KAAKC,MAAMkN,YAAYtK,KAAO,IAAM6K,KAAKC,MAAmB,IAAZ/L,GAAoB,KAC3EJ,MAAK,SAAC2P,GAAkB,EAAKrO,SAAS,CACnCE,MAAOpB,EACP6E,KAAM0K,EAAYlK,KAAKuC,QAAQ/C,Y,4BAIvC,WACExD,SAASC,eAAe,gBAAgBiF,IAAM,uCAAyCnI,KAAKoB,MAAMmK,IAAIhG,KAAO,IAAMvF,KAAKoB,MAAMmK,IAAI/F,KAAO,M,6BAG3I,WACEvC,SAASC,eAAe,WAAWC,MAAMC,QAAU,QACnDH,SAASC,eAAe,eAAeG,UAAUC,OAAO,e,8BAG1D,WACEL,SAASC,eAAe,WAAWC,MAAMC,QAAU,OACnDH,SAASC,eAAe,eAAeG,UAAUC,OAAO,aACxDtD,KAAKC,MAAMsD,QAAQC,GAAG,K,+BAGxB,WACI,OACE,cAAC,EAAD,CACID,QAASvD,KAAKC,MAAMsD,QACpBR,KAAM/C,KAAKC,MAAMkN,YAAYpK,KAC7BC,MAAOhD,KAAKC,MAAMkN,YAAYnK,MAC9BH,KAAM7C,KAAKC,MAAMkN,YAAYtK,S,qCAKvC,WAA2B,IAAD,OACxB,OAAO,cAAC,GAAD,CACHyC,WAAYtF,KAAKoB,MAAMmK,IAAIjG,WAC3BkE,QAASxJ,KAAKoB,MAAMoK,kBACpB7K,QAAS,SAACkM,GAAD,OAAY,EAAKQ,iBAAiBR,Q,+BAIjD,WAAqB,IAAD,OAClB,OAAO,cAAC,GAAD,CACHhD,KAAM7J,KAAKoB,MAAMmK,IAAI1B,KACrBL,QAASxJ,KAAKoB,MAAMqK,YACpB9K,QAAS,SAACkM,GAAD,OAAY,EAAKuE,WAAWvE,Q,8BAI3C,WAAoB,IAAD,OACXrD,EAAUxJ,KAAKoB,MAAM0K,WAAWzF,QAAQwH,UAC9C,OAAO,cAAC,GAAD,CACH9D,IAAK/J,KAAKoB,MAAMmK,IAAIxB,IACpBP,QAASA,EACT7I,QAAS,SAACkM,GAAD,OAAY,EAAKwE,aAAaxE,Q,+BAI7C,WAAqB,IAAD,OAClB,OAAO,cAAC,GAAD,CACHrH,KAAMxF,KAAKoB,MAAMmK,IAAI/F,KACrBgE,QAASxJ,KAAKoB,MAAMwK,YACpBjL,QAAS,SAACkM,GAAD,OAAY,EAAKyE,cAAczE,Q,wBAI9C,WAAc,IAAD,OACX,OACI,qBAAKpM,UAAU,oBAAoBsD,GAAG,cAAcpD,QAAS,kBAAM,EAAK4Q,uB,4BAI9E,WAAkB,IAAD,OACb,OACE,qBAAK9Q,UAAU,wBAAwBE,QAAS,kBAAM,EAAK6Q,kBAA3D,SACI,qBAAKrO,MAAO,CAACC,QAAS,QAAtB,SACG,wBAAQW,GAAG,uB,6BAMxB,WAAmB,IAAD,OAChB,OAAO,cAAC,GAAD,CACD2G,QAAS1K,KAAKoB,MAAMsJ,QACpB/J,QAAS,SAACsD,GAAD,OAAU,EAAKwN,gBAAgBxN,IACxC0G,qBAAsB,kBAAM,EAAKA,wBACjCC,gBAAiB,kBAAM,EAAKA,mBAC5B5H,MAAOhD,KAAKoB,MAAM4B,U,uBAI1B,SAAU0O,EAAIvC,GAAI,IAAD,OAEf,OAAO,cAAC,GAAD,CAEHxO,QAAS,SAACwO,GAAD,OAAO,EAAKT,UAAUS,IAC/BjF,QAAS,SAACiF,GAAD,OAAO,EAAKwC,eAAexC,IACpChF,OAAQgF,EACR7G,OAAQoJ,EACR3H,IAAK/J,KAAKoB,MAAMsK,WAAWyD,GAC3B9E,QAASrK,KAAKoB,MAAMsK,WAAWtE,WARhB,SAACC,GAAD,OAAaA,IAAY,EAAKjG,MAAMmK,IAAIxB,QAElDoF,K,6BAUX,SAAgByC,GAAY,IACtBX,EACAnG,EACArK,EAHqB,OAICwQ,EAAX,SAAdW,EAA+B,GAAa,EACnBnR,EAAX,SAAdmR,EAAqC,cAA4B,kBAElE,IAGMC,EAAa7R,KAAKoB,MAAMwK,YAAYxE,WAHtB,SAACC,GAAD,MAChB,IAAM,EAAKjG,MAAMmK,IAAI1B,KAAO,EAAKzI,MAAMmK,IAAIxB,IAAI1D,MAAM,EAAE,GAAK,EAAKjF,MAAMmK,IAAIxB,IAAI1D,MAAM,EAAE,GACvFgB,EAAQhB,MAAM,EAAE,GAAKgB,EAAQhB,MAAM,EAAE,GAAKgB,EAAQhB,MAAM,EAAE,KAAO,EAAKjF,MAAMmK,IAAI/F,QAEpF,GAAKqM,IAAe7R,KAAKoB,MAAMwK,YAAYpE,OAAO,GAAa,IAARyJ,GAA8B,IAAfY,IAA6B,IAATZ,EAAa,CACnG,IACMxC,EAAYzO,KAAKoB,MAAM0K,WAAW1E,WADrB,SAACC,GAAD,OAAaA,IAAY,EAAKjG,MAAMmK,IAAIxB,OAE3D,GAAK0E,IAAczO,KAAKoB,MAAM0K,WAAWtE,OAAO,GAAa,IAARyJ,GAA6B,IAAdxC,IAA4B,IAATwC,EAAa,CAChG,IACMxF,EAAczL,KAAKoB,MAAMqK,YAAYpF,QAAQwH,UAC7CiE,EAAarG,EAAYrE,WAFX,SAACC,GAAD,OAAaA,IAAYkB,OAAO,EAAKnH,MAAMmK,IAAI1B,SAGnE,OAAKiI,IAAerG,EAAYjE,OAAO,GAAa,IAARyJ,EACjC,cAAC,GAAD,CACHnG,KAAM,aACNrK,UAAW,sBAEO,IAAfqR,IAA6B,IAATb,EACpB,cAAC,GAAD,CACHnG,KAAM,mBACNrK,UAAW,uBAGfqK,EAAsB,SAAd8G,EAAyB,gBAAoB,oBAC9C,cAAC,GAAD,CACH9G,KAAMA,EACNnK,QAAS,kBAAM,EAAKyQ,WAAW3F,EAAYqG,EAAab,KACxDxQ,UAAWA,KAKnB,OADAqK,EAAsB,SAAd8G,EAAyB,eAAmB,mBAC7C,cAAC,GAAD,CACH9G,KAAMA,EACNnK,QAAS,kBAAM,EAAK0Q,aAAa,EAAKjQ,MAAM0K,WAAW2C,EAAYwC,KACnExQ,UAAWA,IAKnB,OADAqK,EAAsB,SAAd8G,EAAyB,gBAAoB,oBAC9C,cAAC,GAAD,CACH9G,KAAMA,EACNnK,QAAS,kBAAM,EAAK2Q,cAAc,EAAKlQ,MAAMwK,YAAYiG,EAAaZ,KACtExQ,UAAWA,M,0BAOrB,WACE,OAAO,qBAAK0H,IAAK4J,GAAQ3J,IAAI,qBAAqBM,MAAM,KAAKsJ,KAAK,WAAW7O,MAAO,CAAC,OAAS,iB,8BAGhG,WACEnD,KAAK8C,SAAS,CAAEmI,QAAS,Y,4BAG3B,WAAkB,IAAD,OACf3J,IACK0F,IAAI,aAAehH,KAAKC,MAAME,KAAKO,SAAW,KAC9Cc,MAAK,SAACC,GAAD,OAAS,EAAKqB,SAAS,CAAEuJ,YAAa5K,EAAIwF,KAAKsE,IAAKe,eAAgB7K,EAAIwF,KAAKuC,aAClF9E,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,Q,4BAGlC,WAAkB,IAAD,OACb,OACE,qBAAKlE,UAAU,OAAf,SACI,qBAAKA,UAAU,OAAf,SACI,qBAAKA,UAAU,UAAf,SACI,sBAAKA,UAAU,gBAAf,UACI,gDACA,mBAAGA,UAAU,oBAAb,2IACA,qBAAKA,UAAU,gBAAgBE,QAAS,kBAAM,EAAKsR,oBAAnD,2C,gCAQtB,SAAmBC,GACjB,IAAI/B,EAAInQ,KAAKoB,MAAM2K,QAAQ3E,WAAU,SAAA1D,GAAM,OAAIA,EAAOyG,SAAW+H,EAAMxO,OAAOC,SAC1EqI,EAAgBhM,KAAKoB,MAAMqF,KAAKW,WAAU,SAAA8I,GAAG,OAAIA,EAAI7G,SAAS8G,OAE9DgC,MAAMnG,IAAkBA,EAAc,KACxCA,OAAgBC,GAGlBjM,KAAK8C,SAAS,CACVoJ,UAAWgG,EAAMxO,OAAOC,MACxBqI,cAAeA,M,wBAIrB,WAAc,IAAD,OACLoG,EAAQ,IAAIC,KAAkB,CAChCC,cAAe,GACfC,UAAW,GACXC,YAAY,IAGVtG,EAAYlM,KAAKoB,MAAM8K,UACvBF,EAAgBhM,KAAKoB,MAAM4K,cA8C/B,OAEE,qBAAKvL,UAAU,OAAf,SACI,qBAAKA,UAAU,OAAf,SACA,sBAAKA,UAAU,UAAf,UACI,qBAAKA,UAAU,UAAUsD,GAAG,UAAUpD,QAAS,kBAAM,EAAK8R,sBACzDzS,KAAK0S,oBACF,sBAAKjS,UAAU,gBAAf,UACI,oBAAIE,QAAS,kBAAM,EAAKyM,kBAAxB,8BACA,wDACA,sBAAK3M,UAAU,gBAAf,UACKT,KAAK2S,0BACL3S,KAAK4S,oBACL5S,KAAK6S,mBACL7S,KAAK8S,oBACN,sBAAKrS,UAAU,wBAAf,UACI,uBACIiB,KAAK,WACLjB,UAAU,oBACV0D,SAAUnE,KAAK2M,mBACfhJ,MAAOuI,GAAa,GACpB6G,YAAY,cAEhB,mBAAGtS,UAAU,wBAAwBsD,GAAG,mBAAxC,+BAEJ,qBAAKtD,UAAU,oBAAoBsD,GAAG,oBAAoBpD,QAAS,kBAAM,EAAKqS,aAA9E,wBACA,qBAAKvS,UAAU,mBAAmBsD,GAAG,mBAAmBpD,QAAS,kBAAM,EAAKsS,YAA5E,uBACCjT,KAAKkT,aACLlT,KAAKmT,iBACN,qBAAK1S,UAAU,yBAAyBE,QAAS,kBAAM,EAAKyS,0BAC5D,qBAAK3S,UAAU,qBAAqBE,QAAS,kBAAM,EAAK0S,wBAE5D,sBAAK5S,UAAU,+BAA+BsD,GAAG,qBAAjD,UACI,qBAAKtD,UAAU,qBAAqBsD,GAAG,YAAvC,SACI,sBAAKtD,UAAU,WAAf,UACI,qBAAKA,UAAU,OAAf,SACKT,KAAKoB,MAAMuK,WAAWlE,KAAI,SAACiK,EAAIvC,GAAL,OAAW,EAAKmE,UAAU5B,EAAIvC,QAE7D,sBAAK1O,UAAU,OAAf,UACI,mBAAGA,UAAU,QAAb,iBACA,mBAAGA,UAAU,QAAb,iBACA,mBAAGA,UAAU,QAAb,iBACA,mBAAGA,UAAU,QAAb,iBACA,mBAAGA,UAAU,QAAb,iBACA,mBAAGA,UAAU,QAAb,iBACA,mBAAGA,UAAU,QAAb,iBACA,mBAAGA,UAAU,QAAb,iBACA,mBAAGA,UAAU,QAAb,iBACA,mBAAGA,UAAU,QAAb,iBACA,mBAAGA,UAAU,QAAb,iBACA,mBAAGA,UAAU,QAAb,yBAIZ,qBAAKA,UAAU,aAAf,SACI,mBAAGA,UAAU,kBAAb,SAAgCT,KAAKoB,MAAMoL,iBAGnD,qBAAK/L,UAAU,iBAAiBsD,GAAG,gBAAnC,SACsC,KAA/B/D,KAAKoB,MAAMmK,IAAIjG,YAA8C,KAAxBtF,KAAKoB,MAAMmK,IAAI/F,KACvD,wBACA,cAAC,GAAD,CACIF,WAAYtF,KAAKoB,MAAMmK,IAAIjG,WAC3BC,KAAMvF,KAAKoB,MAAMmK,IAAIhG,KACrBC,KAAMxF,KAAKoB,MAAMmK,IAAI/F,KACrB9D,KAAK,MACL+D,MAAM,WAGd,sBAAKhF,UAAU,cAAf,UACKT,KAAKuT,kBACN,sBAAK9S,UAAU,aAAasD,GAAG,aAA/B,UAEK/D,KAAKoB,MAAM4J,SAAWhL,KAAKC,MAAMuT,SAAYxT,KAAKyT,eAAiB7O,QAAQC,MAE5E,cAAC,KAAD,CACIyD,OAAQ,IACRoL,SAAU1T,KAAKoB,MAAMqF,KAAKe,OAC1BmM,UAAWvB,EAAMuB,UACjBC,YA1HZ,SAAC,GAAD,IAAEC,EAAF,EAAEA,MAAOC,EAAT,EAASA,IAAK1O,EAAd,EAAcA,OAAQjC,EAAtB,EAAsBA,MAAtB,OAEf,EAAK/B,MAAM2K,QAAQvE,OAAS,EAAK,wBAE9B,cAAC,KAAD,CACI4K,MAAOA,EAEPhN,OAAQA,EACR2O,SAAUF,EAJd,SAMC,gBAAGG,EAAH,EAAGA,QAASC,EAAZ,EAAYA,cAAZ,OACD,qBAAKC,IAAKD,EAAyB9Q,MAAOA,EAA1C,SACI,sBAAKgR,OAAQH,EAASvT,UAAU,MAAhC,UACI,qBAAKA,UAAU,aACX2H,IAAK,aAAczH,QAAS,kBAAM,EAAKyT,eAAeP,MAE1D,qBAAKpT,UAAU,YAAf,SACK,EAAKW,MAAMqF,KAAKoN,GAAOpM,KAAI,SAAC0H,GAAD,OACxB,cAAC,GAAD,CACI7J,WAAY,EAAKlE,MAAMmK,IAAIjG,WAC3BE,KAAM,EAAKpE,MAAMmK,IAAI/F,KACrByC,UAAW,EAAK7G,MAAMmK,IAAI/F,KAC1BzB,GAAIoL,EACJjH,UAAW,EAAK9G,MAAM2K,QAAQoD,GAAGhF,OACjC1B,WAAY,EAAKrH,MAAM2K,QAAQoD,GAAG1G,WAClCa,WAAY,EAAKlI,MAAM2K,QAAQoD,GAAG7F,WAClChB,OAAQ,EAAKlH,MAAM2K,QAAQoD,GAAG7G,OAC9BI,MAAO,EAAKtH,MAAM2K,QAAQoD,GAAGzG,MAC7B1F,MAAO,EAAK/C,MAAMsC,WAAa,GAC/BgD,KAAM,EAAKnE,MAAMmK,IAAIhG,KACrB4D,OAAQ,EAAK/H,MAAM2K,QAAQoD,GAAGhG,OAC9BhD,KAAM,EAAK/E,MAAM2K,QAAQoD,GAAGhJ,KAC5BxF,QAAS,SAACwO,GAAD,OAAO,EAAKkF,oBAAoBlF,IACzCxG,WAAY,SAACT,EAAWsI,EAAMpH,GAAlB,OAAkC,EAAKkL,qBAAqBpM,EAAWsI,EAAMpH,IACzFA,YAAa,EAAKhI,MAAMgI,uBAvBd0K,KALrBA,IAqHeS,kBAAkB,QAClBvI,cAAeA,EACftD,MAA4C,IAArCzF,SAASuL,gBAAgBgG,cAEpC,qBAAKrM,IC10BtB,i7KD00BkCC,IAAI,cAAc3H,UAAU,SAASsD,GAAG,SAASpD,QAAS,kBAAM,EAAK8T,qBAG9F,qBAAKhU,UAAU,uBAAf,SACI,sBAAK0C,MAAO,CAAC,QAAU,QAAvB,UACKnD,KAAK0U,gBAAgB,YACrB1U,KAAK0U,gBAAgB,yB,oBAWpD,WAEE,GAAG1U,KAAKC,MAAMK,WACV,OAAO,cAAC,IAAD,CAAUD,GAAG,eAGxB,GAAGL,KAAKC,MAAMM,WACV,OAAO,cAAC,IAAD,CAAUF,GAAG,eAGxB,GAAiC,IAA9BL,KAAKoB,MAAM6J,QAAQzD,OAAc,CAChC,GAA2B,UAAvBxH,KAAKoB,MAAM6J,QACX,OAAO,cAAC,IAAD,CAAU5K,GAAG,eAExB,IAAMsU,EAAS,aAAe3U,KAAKoB,MAAM8J,cAAgB,IAAMlL,KAAKoB,MAAM6J,QAC1E,OAAO,cAAC,IAAD,CAAU5K,GAAIsU,IAGzB,GAAI3U,KAAKoB,MAAMqF,OAAS,IAAuC,KAAjCzG,KAAKoB,MAAMgL,oBAA6BpM,KAAKoB,MAAM4J,QAAS,CACtF,IAAM+B,EAAU/M,KAAKC,MAAM+M,SAASC,SAASC,MAAM,KACnD,GAAIH,EAAQvF,OAAS,EAAG,CACpB,IAAMU,EAAY6E,EAAQ,GACtBoD,EAAInQ,KAAKoB,MAAM2K,QAAQ3E,WAAU,SAAA1D,GAAM,OAAIA,EAAOyG,SAAWjC,KAC7D8D,EAAgBhM,KAAKoB,MAAMqF,KAAKW,WAAU,SAAA8I,GAAG,OAAIA,EAAI7G,SAAS8G,OAE9DgC,MAAMnG,IAAkBA,EAAc,KACtCA,OAAgBC,GAGpBjM,KAAK8C,SAAS,CACVoJ,UAAWhE,EACXkE,kBAAmBlE,EACnB8D,cAAeA,KAK3B,GAAuC,kBAA5BhM,KAAKoB,MAAMiL,YAA2B,CAC7CrM,KAAK8C,SAAS,CAAEkI,SAAS,IACzB,IAAMO,EAAMvL,KAAKoB,MAAMiL,YACnB,OAAO,cAAC,IAAD,CAAUhM,GAAI,aAAekL,EAAIjG,WAAa,IAAMiG,EAAI/F,KAAO,IAAMxF,KAAKoB,MAAMkL,eAAe5I,SAG9G,OACI,sBAAKjD,UAAU,OAAf,UACA,gCAAQ,UAAYT,KAAKoB,MAAMmK,IAAI/F,OACnC,cAAC,EAAD,IAC0B,cAAxBxF,KAAKoB,MAAMmK,IAAI/F,KAAwBxF,KAAK4U,iBAAmB5U,KAAK6U,aAEtE,iCAAS5R,SAAS4L,iBAAiB,SAAU7O,KAAK8U,wB,GAv0BhCxQ,IAAMpD,WAs1BjBC,gBATS,SAAAC,GAAK,MAAK,CAC9B+L,YAAa/L,EAAMxB,KAAKuN,YACxBqG,SAAUpS,EAAMuF,SAAS6M,SACzBrT,KAAMiB,EAAMxB,KAAKO,KACjBoC,WAAYnB,EAAMuF,SAASpE,WAC3BjC,WAAYc,EAAMiO,KAAK/O,WACvBC,WAAYa,EAAMiO,KAAK9O,cAGa,CAAEsQ,eZpyBZ,SAACnN,EAAQ4B,EAAYE,EAAM2E,GAA3B,OAAsC,SAAC9I,EAAU3B,GAC3E4B,IACKsF,IAAI,gBAAkBtB,EAAa,IAAME,EACtC,IAAM2E,EAAS,IAAKzG,EAAQjE,EAAYC,IAC3CgF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QYgyBsB4L,YZ7xB/B,SAACxE,EAASzG,EAAYE,EAAM3C,EAAMkS,EAAUC,GAA5C,OAAuD,SAAC3T,EAAU3B,GACzF4B,IACKsF,IAAI,mBAAqBtB,EAAa,IAAME,EACzC,IAAM3C,EAAO,IAAMkS,EAAW,IAAMC,EAAS,IAC7CjJ,EAAStM,EAAYC,IACxBgF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QYwxBmCsQ,YZrxB5C,SAAC3P,EAAYE,EAAM0P,EAAKrS,EAAMpC,EAAWiP,GAAzC,OAAuD,SAACrO,EAAU3B,GACzF4B,IACKsF,IAAI,aAAetB,EAAa,IAAME,EACnC,IAAM0P,EAAM,IAAMrS,EAAO,IAAMpC,EAC/B,IAAMiP,EAAY,IAAKjQ,EAAYC,IACtCgF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QYgxBgDiL,KZ7wBhE,SAAC7D,EAASzG,EAAYE,EAAM3C,GAA5B,OAAqC,SAACxB,EAAU3B,GAChE2B,EAAS,CACLK,KAAM3C,IAEVuC,IACKsF,IAAI,SAAWtB,EAAa,IAAME,EAC/B,IAAM3C,EAAO,IAAKkJ,EAClBtM,EAAYC,IACf8B,MAAK,SAAAC,GACFJ,EAAS,CACLK,KAAM5C,OAGb4F,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QYgwBsDoL,KZ5vBtE,SAACzK,EAAYuE,EAAME,EAAKvE,GAAxB,OAAiC,SAACnE,EAAU3B,GAC5D2B,EAAS,CACLK,KAAMzC,IAEVqC,IACK0F,IAAI,QAAU1B,EAAa,IAAMuE,EAAO,IAAME,EAAM,IAAMvE,EAAO,KACjEhE,MAAK,SAAAC,GACFJ,EAAS,CACLK,KAAM1C,OAGb0F,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QYivB4DhD,eAAjFR,CAAgG4J,IE/4BzGoK,I,wKACF,SAAatI,GAAS,IAAD,OACjB,OACI,qBAAKpM,UAAU,gBAAgBE,QAAS,kBAAM,EAAKV,MAAMmV,YAAY,EAAKnV,MAAM0Q,OAAQ9D,IAAxF,SAAkGA,M,oBAI1G,WAAU,IAAD,OACL,OACI,gCACI,sBAAKpM,UAAU,gBAAgBE,QAAS,kBAAM,EAAKV,MAAMU,QAAQ,EAAKV,MAAM0Q,SAA5E,UACI,mBAAGlQ,UAAU,qBAAb,SAAmCT,KAAKC,MAAM0Q,SAC9C,mBAAGlQ,UAAU,qBAAqBsD,GAAI/D,KAAKC,MAAM0Q,OAAS,QAA1D,kBAEJ,qBAAKlQ,UAAU,kBAAkBsD,GAAI/D,KAAKC,MAAM0Q,OAAS,YAAzD,SACK3Q,KAAKC,MAAMuJ,QAAQ/B,KAAI,SAACoF,GAAD,OAAa,EAAKwI,aAAaxI,EAAO,EAAK5M,MAAM0Q,qB,GAfxEzP,cAsBfoU,G,kDACF,WAAYrV,GAAQ,IAAD,8BACf,cAAMA,IAiFVkE,SAAW,SAAAV,GAAC,OAAI,EAAKX,SAAS,CAAEyS,YAAa9R,EAAEC,OAAOC,SAlFnC,EAoFnBiC,SAAW,SAAAnC,GACPA,EAAEoC,iBACF,IAAM2P,EAAoB,EAAKpU,MAAMqU,eAAe9F,OAAO,CAAE,CAAC+F,SAAU,SAAUC,OAAQ,EAAKvU,MAAMmU,eACrG,EAAKzS,SAAS,CAAE2S,eAAgBD,IAChC,EAAKvV,MAAM2V,eAAeJ,IAtF1B,EAAKpU,MAAQ,CACTsF,MAAO,CAAC,CACJ,GAAM,GACN,OAAU,GACV,KAAQ,GACR,MAAS,GACT,OAAU,KACV,QAAW,GACX,WAAc,GACd,KAAQ,GACR,KAAQ,GACR,MAAS,KAEbmP,MAAO,GACPnL,QAAS,GACT6K,YAAa,GACbO,QAAS,CAAC,CAAC5Q,OAAQ,KACnB6Q,KAAM,CAAC,CAACxK,IAAK,KACbjG,WAAY,CAAC,CAACA,WAAY,KAC1B0Q,MAAO,CAAC,CAACzQ,KAAM,KACf0Q,MAAO,CACH,CAACvU,KAAM,YACP,CAACA,KAAM,gBAEX+T,eAAgB,IA1BL,E,+CAwCnB,SAAYS,GAAU,IAAD,OACM,IAAnBA,EAAQ1O,OACRlG,IACK0F,IAAI,cACJxF,MAAK,SAACC,GACH,EAAKqB,SAAS,CACV4D,MAAOjF,EAAIwF,KACX4O,MAAOM,MAAM1U,EAAIwF,KAAKO,QAAQ4O,KAAK,SAG1C1R,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MAEhC3E,KAAKC,MAAM2V,eAAeM,K,+BAIlC,WAAqB,IAAD,OAChBlW,KAAKqW,YAAY,IACjB/U,IACK0F,IAAI,sBACJxF,MAAK,SAACC,GACH,EAAKqB,SAAS,CACVgT,QAASrU,EAAIwF,KAAKuC,QAAQsM,QAC1BC,KAAMtU,EAAIwF,KAAKuC,QAAQuM,KACvBzQ,WAAY7D,EAAIwF,KAAKuC,QAAQlE,WAC7B0Q,MAAOvU,EAAIwF,KAAKuC,QAAQwM,WAG/BtR,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,Q,gCAGpC,WACQ3E,KAAKC,MAAM0H,iBACX3H,KAAKqW,YAAYrW,KAAKoB,MAAMqU,gBAC5BzV,KAAKC,MAAM+E,wB,+BAInB,WACI/B,SAASC,eAAe,mBAAmBG,UAAUC,OAAO,U,qCAYhE,SAAwBuJ,GACpB5J,SAASC,eAAe2J,EAAS,SAASxJ,UAAUC,OAAO,eAC3DL,SAASC,eAAe2J,EAAS,aAAaxJ,UAAUC,OAAO,U,+BAGnE,SAAkBoS,EAAUC,GAExB,GAA0B,IADP3V,KAAKoB,MAAMqU,eAAe9E,QAAO,SAAAxL,GAAK,OAAKA,EAAK,WAAiBuQ,GAAcvQ,EAAK,SAAewQ,KACvGnO,OAAc,CACzB,IAAMgO,EAAoBxV,KAAKoB,MAAMqU,eAAe9F,OAAO,CAAE,CAAC+F,SAAUA,EAAUC,OAAQA,KAC1F3V,KAAKqW,YAAYb,GACjBxV,KAAK8C,SAAS,CAAE2S,eAAgBD,O,gCAIxC,SAAmB7E,GACf,IAAM2F,EAAUtW,KAAKoB,MAAMqU,eACrB5B,EAAQyC,EAAQlP,WAAU,SAAAjC,GAAK,OAAIA,IAAUwL,KAC7C6E,EAAoBc,EAAQjQ,MAAM,EAAGwN,GAAOlE,OAAO2G,EAAQjQ,MAAMwN,EAAM,EAAEyC,EAAQ9O,SACvFxH,KAAK8C,SAAS,CAAE2S,eAAgBD,IAChCxV,KAAKqW,YAAYb,K,gCAGrB,SAAmB7E,EAAQnH,GAAU,IAAD,OAChC,OACI,cAAC,GAAD,CACImH,OAAQA,EACRnH,QAASA,EACT7I,QAAS,SAACkM,GAAD,OAAY,EAAK0J,wBAAwB1J,IAClDuI,YAAa,SAACM,EAAUC,GAAX,OAAsB,EAAKa,kBAAkBd,EAAUC,Q,kCAKhF,SAAqBhF,GAAS,IAAD,OACzB,OACI,sBAAKlQ,UAAU,wBAAwBE,QAAS,kBAAM,EAAK8V,mBAAmB9F,IAA9E,UACI,mBAAGlQ,UAAU,kCAAb,SAAgDkQ,EAAO+E,SAASgB,cAAgB,KAAO/F,EAAOgF,SAC9F,mBAAGlV,UAAU,8CAA8CsD,GAAI/D,KAAKC,MAAM0Q,OAAS,QAAnF,oB,oBAMd,WAAU,IAAD,OACP,GAAG3Q,KAAKC,MAAMG,WACV,OAAO,cAAC,IAAD,CAAUC,GAAG,cAGxB,GAAGL,KAAKC,MAAMM,WACV,OAAO,cAAC,IAAD,CAAUF,GAAG,eAGxB,IAAM+R,EAAQ,IAAIC,KAAkB,CAChCC,cAAe,IACfC,UAAW,IACXC,YAAY,IAIV9L,EAAQ1G,KAAKoB,MAAMsF,MACnBhG,EAAWV,KAAKC,MAAME,KAAKO,SAC7BiW,EAAQ,EACRC,EAAW,GAEf,SAASC,EAAYnR,EAAMwB,GACvB,OACI,sBAAKzG,UAAU,QAAQ0C,MAAO,CAACmE,OAAQ,SAAWC,OAAOL,GAAS,MAAlE,UACI,cAAC,GAAD,CACIxB,KAAMA,EACNvF,KAAMO,EACN4E,WAAYI,EAAKJ,WACjBC,KAAMG,EAAKH,KACXC,KAAME,EAAKF,KACX9D,KAAK,MACL+D,MAAOC,EAAKD,QAEhB,qBAAKhF,UAAU,QAAQ0C,MAAO,CAACmE,OAAQ,SAAWC,OAAQL,EAAM,GAAM,MAAtE,SAC0B,IAAxBxB,EAAKL,QAAQmC,OACX9B,EAAKL,QAAQoC,KAAI,SAACnB,GAAD,OAAWuQ,EAAYvQ,EAAOY,EAAM,MACrD,6BAOhB,SAAS4P,EAAT,GAAoE,IAA7CC,EAA4C,EAA5CA,YAAajD,EAA+B,EAA/BA,IAAK1O,EAA0B,EAA1BA,OAAQ2O,EAAkB,EAAlBA,SAAU5Q,EAAQ,EAARA,MACrC,IAAb4Q,GAAoC,IAAhBgD,IACrBJ,EAAQ,EACRC,EAAW,IAEf,IAAII,EAAa,EAAEjD,EAAYgD,EAAcJ,EAC7C,GAAKK,EAAatQ,EAAMc,OAAQ,CAC5B,GAAiC,OAA5Bd,EAAMsQ,GAAW5R,QAAqBwR,EAASvN,SAAS2N,GACzD,KAAmC,OAA5BtQ,EAAMsQ,GAAW5R,QAAoBwR,EAASvN,SAAS2N,IAG1D,GADAL,GAAgB,GADhBK,GAAwB,IAEPtQ,EAAMc,OACnB,OAIZoP,EAAWA,EAASjH,OAAO,CAACqH,IAC5B,IAAMtR,EAAOgB,EAAMsQ,GAEfjP,EAAM,GACS,SAAfrC,EAAKD,QACLsC,EAAM,8BAAgCrC,EAAKJ,WAAa,IAAMI,EAAKF,KAAO,IAAME,EAAKH,KAAO,IAAMG,EAAKD,MAAQ,QAEnH,IACMwR,EADWzS,KAAKC,UAAUiB,GACF2D,SAAS,QACvC,OACI,cAAC,KAAD,CACI+I,MAAOA,EACP2E,YAAaA,EAEb3R,OAAQA,EACR2O,SAAUA,EALd,SAOC,gBAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,cAAZ,OACG,qBAAKC,IAAKD,EAAyB9Q,MAAOA,EAA1C,SACI,sBAAK1C,UAAU,gBAAgB0T,OAAQH,EAAvC,UACc,KAARjM,EAAc,wBAChB,qBAAKI,IAAKJ,EAAKtH,UAAU,iBAAiB2H,IAAK,UAAY1C,EAAKD,QAC9DwR,EAAgB,qBAAKxW,UAAU,SAAgB,wBACjD,qBAAKA,UAAU,iBAAf,SACI,gCACqB,SAAfiF,EAAKD,MACP,qBAAKhF,UAAU,iBAAf,SACI,mBAAGA,UAAU,yBAAb,SAAuCiF,EAAKJ,WAAa,KAAOI,EAAKF,SAEzE,sBAAK/E,UAAU,iBAAf,UACI,mBAAGA,UAAU,yBAAb,SAAuC,UAAYiF,EAAKD,QACxD,mBAAGhF,UAAU,0BAAb,SAAwCiF,EAAKJ,WAAa,KAAOI,EAAKF,UAG1E,cAAC,GAAD,CACIE,KAAMA,EACNvF,KAAMO,EACN4E,WAAYI,EAAKJ,WACjBC,KAAMG,EAAKH,KACXC,KAAME,EAAKF,KACX9D,KAAK,MACL+D,MAAOC,EAAKD,QAEU,IAAxBC,EAAKL,QAAQmC,OACX9B,EAAKL,QAAQoC,KAAI,SAACnB,GAAD,OAAWuQ,EAAYvQ,EAAOY,MAC/C,iCA3BU4M,KALzBA,IA4CrB,OACQ,gCACI,cAAC,EAAD,IACA,oDACA,qBAAKrT,UAAU,OAAf,SACI,qBAAKA,UAAU,OAAf,SACI,gCACI,sBAAKA,UAAU,mBAAf,UACI,oBAAIA,UAAU,kBAAd,sBACA,qBAAKA,UAAU,gBAAgBE,QAAS,kBAAM,EAAKuW,qBAAnD,uBAEJ,qBAAKzW,UAAU,0BAA0BsD,GAAG,kBAA5C,SACI,uBAAMtD,UAAU,cAAcsD,GAAG,cAAc6B,SAAU5F,KAAK4F,SAA9D,UACI,sBAAKnF,UAAU,aAAf,UACI,qBAAKA,UAAU,gBACf,uBACIiB,KAAK,OACLjB,UAAU,eACVwD,KAAK,cACLE,SAAUnE,KAAKmE,SACfR,MAAO3D,KAAKoB,MAAMmU,iBAG1B,qBAAK9U,UAAU,kBAAf,SAAkCT,KAAKoB,MAAMqU,eAAehO,KAAI,SAACkJ,GAAD,OAAa,EAAKwG,qBAAqBxG,QACvG,sBAAKlQ,UAAU,iBAAf,UACKT,KAAKoX,mBAAmB,SAAUpX,KAAKoB,MAAM0U,SAC7C9V,KAAKoX,mBAAmB,OAAQpX,KAAKoB,MAAM2U,MAC3C/V,KAAKoX,mBAAmB,aAAcpX,KAAKoB,MAAMkE,YACjDtF,KAAKoX,mBAAmB,OAAQpX,KAAKoB,MAAM4U,eAIxD,qBAAKvV,UAAU,mBAAf,SACI,cAAC,KAAD,UACC,gBAAGiI,EAAH,EAAGA,MAAOJ,EAAV,EAAUA,OAAV,OACG,cAAC,KAAD,CACIwO,aAAcA,EACdO,YAAa,EACbC,YAAkD,IAArCrU,SAASuL,gBAAgBgG,YACtCb,UAAWvB,EAAMuB,UACjB4D,yBAA0BnF,EAC1BsB,SAAUhG,KAAK8J,KAAK,EAAKpW,MAAMsF,MAAMc,OAAO,GAC5Cc,OAAQA,EACRI,MAAOA,EACPhC,MAAO,EAAKzG,MAAMyG,2B,GAvSnCxF,aA2TRC,gBAPS,SAAAC,GAAK,MAAK,CAC9BjB,KAAMiB,EAAMxB,KAAKO,KACjBC,WAAYgB,EAAMiO,KAAKjP,WACvBG,WAAYa,EAAMiO,KAAK9O,WACvBoH,eAAgBvG,EAAMuF,SAASgB,kBAGK,CAACiO,ed5RX,SAACH,EAAgBgC,GAAjB,OAA4B,SAACpW,EAAU3B,GACjE,IAAMwW,EAAU1R,KAAKC,UAAUgR,EAAgBgC,GAM/CnW,IACKC,KAAK,0BAA2B2U,EANtB,CACXpW,QAAS,CACL,eAAgB,qBAI8BL,EAAYC,IAC7D8B,MAAK,SAAAC,GACFJ,EAAS,CACLK,KAAMpC,EACNuC,QAASJ,EAAIwF,UAGpBvC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,Qc6QqBK,uBAA1C7D,CAA+DmU,ICnVxEoC,I,kKACF,WACI,OACI,sBAAKjX,UAAU,4BAAf,UACI,oBAAIA,UAAU,0BAAd,SAAyCT,KAAKC,MAAM0X,UACpD,mBAAGlX,UAAU,8BAAb,SAA4CT,KAAKC,MAAM2X,cACvD,qBAAKnX,UAAU,yBAAyBE,QAASX,KAAKC,MAAM4X,YAA5D,0B,GANa3W,cAYvB4W,G,kDACF,WAAY7X,GAAQ,IAAD,8BACf,cAAMA,IACDmB,MAAQ,CACT2W,gBAAiB,CACb,CAACJ,QAAS,SAAUC,YAAa,6GACjC,CAACD,QAAS,oBAAqBC,YAAa,2GAEhDrM,IAAK,GACL7H,OAAQ,IARG,E,wDAsBnB,SAAqBmJ,GACjB,IAAIgL,EAMJ,MALuB,WAAnBhL,EAAO8K,QACPE,EAAc7X,KAAKC,MAAM+X,YACC,sBAAnBnL,EAAO8K,UACdE,EAAc7X,KAAKC,MAAMgY,oBAGzB,cAAC,GAAD,CAEIN,QAAS9K,EAAO8K,QAChBC,YAAa/K,EAAO+K,YACpBC,YAAaA,GAHRhL,EAAO8K,W,oBAQxB,WAAU,IAAD,OACL,OAAG3X,KAAKC,MAAMG,WACH,cAAC,IAAD,CAAUC,GAAG,cAGrBL,KAAKC,MAAMK,WACH,cAAC,IAAD,CAAUD,GAAG,eAGrBL,KAAKC,MAAMiY,gBACH,cAAC,IAAD,CAAU7X,GAAG,4BAGrBL,KAAKC,MAAMkY,SACH,cAAC,IAAD,CAAU9X,GAAG,qBAIpB,gCACI,cAAC,EAAD,IACA,oDACA,qBAAKI,UAAU,OAAf,SACI,qBAAKA,UAAU,OAAf,SACI,gCACI,qBAAKA,UAAU,mBAAf,SACI,oBAAIA,UAAU,kBAAd,wBAEJ,qBAAKA,UAAU,mBAAf,SACKT,KAAKoB,MAAM2W,gBAAgBtQ,KAAI,SAACoF,GAAD,OAAa,EAAKuL,qBAAqBvL,sB,GApEhF3L,aAuFRC,gBARS,SAAAC,GAAK,MAAK,CAC9BjB,KAAMiB,EAAMxB,KAAKO,KACjBC,WAAYgB,EAAMiO,KAAKjP,WACvBE,WAAYc,EAAMiO,KAAK/O,WACvB4X,gBAAiB9W,EAAMiO,KAAK6I,gBAC5BC,SAAU/W,EAAMiO,KAAK8I,YAGe,CAAEF,mBlBnFR,kBAAM,SAAC5W,GACrCuD,QAAQC,IAAI,qBACZxD,EAAS,CACLK,KAAM9C,MkBgFgDoZ,YlB5EnC,kBAAM,SAAC3W,GAC9BuD,QAAQC,IAAI,qBACZxD,EAAS,CACLK,KAAM7C,OkByECsC,CAA8D2W,IClGvEO,G,kDACF,WAAYpY,GAAQ,IAAD,8BACf,cAAMA,IA4GVkE,SAAW,SAAAV,GAAC,OAAK,EAAK6U,mBAAmB7U,IA3GrC,EAAKrC,MAAQ,CACTsJ,QAAS,GACT6N,YAAa,GACbC,YAAa,GACbC,gBAAiB,CACbC,QAAS,GACTC,QAAS,GACTxO,OAAQ,OAEZa,SAAS,GAXE,E,qDAsBnB,WAAqB,IAAD,OAChB1J,IACK0F,IAAI,qBACJxF,MAAK,SAACC,GACH,EAAKqB,SAAS,CACV4H,QAASjJ,EAAIwF,KAAKQ,KAAI,SAAC6F,GAAD,OAAQA,EAAEC,qBAGvC7I,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MAChCrD,IACK0F,IAAI,+BACJxF,MAAK,SAACC,GACH,EAAKqB,SAAS,CACVyV,YAAa9W,EAAIwF,KAAKuC,QAAQ+O,iBAGrC7T,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,Q,oCAGpC,SAAuBkI,GACY,KAA3B7M,KAAKoB,MAAMoX,cACXvV,SAASC,eAAelD,KAAKoB,MAAMoX,YAAc,SAASrV,MAAMiM,MAAQ,UACxEnM,SAASC,eAAelD,KAAKoB,MAAMoX,YAAc,SAASrV,MAAMwL,gBAAkB,WAEtF3O,KAAK8C,SAAS,CAAE0V,YAAa3L,IAC7B5J,SAASC,eAAe2J,EAAS,SAAS1J,MAAMiM,MAAQ,UACxDnM,SAASC,eAAe2J,EAAS,SAAS1J,MAAMwL,gBAAkB,Y,yCAGtE,SAA4B9B,GACxB,IAAM+L,EAAqB5Y,KAAKoB,MAAMqX,gBAAgBC,QAChDG,EAAqB7Y,KAAKoB,MAAMqX,gBAAgBE,QAGtD,GAFA1V,SAASC,eAAe2J,EAAS,SAAS1J,MAAMiM,MAAQ,UACxDnM,SAASC,eAAe2J,EAAS,SAAS1J,MAAMwL,gBAAkB,UAC9DiK,EAAmBvP,SAASwD,GAAS,CACrC,IAAMgH,EAAQ+E,EAAmBE,QAAQjM,GACzC+L,EAAmBG,OAAOlF,EAAO,GACjC,IAAMmF,EAAcH,EAAmBlJ,OAAO,CAAC9C,IAC/C7M,KAAK8C,SAAS,CAAE2V,gBAAiB,CAC7BC,QAASE,EACTD,QAASK,EACT7O,OAAQnK,KAAKoB,MAAMqX,gBAAgBtO,UAEvClH,SAASC,eAAe2J,EAAS,SAAS1J,MAAMwL,gBAAkB,UAClE1L,SAASC,eAAe2J,EAAS,SAAS1J,MAAMiM,MAAQ,eACrD,GAAIyJ,EAAmBxP,SAASwD,GAAS,CAC5C,IAAMgH,EAAQgF,EAAmBC,QAAQjM,GACzCgM,EAAmBE,OAAOlF,EAAO,GACjC7T,KAAK8C,SAAS,CAAE2V,gBAAiB,CAC7BC,QAASE,EACTD,QAASE,EACT1O,OAAQnK,KAAKoB,MAAMqX,gBAAgBtO,UAEvClH,SAASC,eAAe2J,EAAS,SAAS1J,MAAMwL,gBAAkB,UAClE1L,SAASC,eAAe2J,EAAS,SAAS1J,MAAMiM,MAAQ,cACrD,CACH,IAAM6J,EAAcL,EAAmBjJ,OAAO,CAAC9C,IAC/C7M,KAAK8C,SAAS,CAAE2V,gBAAiB,CAC7BC,QAASO,EACTN,QAASE,EACT1O,OAAQnK,KAAKoB,MAAMqX,gBAAgBtO,UAEvClH,SAASC,eAAe2J,EAAS,SAAS1J,MAAMwL,gBAAkB,UAClE1L,SAASC,eAAe2J,EAAS,SAAS1J,MAAMiM,MAAQ,a,4BAIhE,WACInM,SAASC,eAAe,YAAYC,MAAMwL,gBAAkB,UAC5D1L,SAASC,eAAe,YAAYC,MAAMiM,MAAQ,UAClDpP,KAAK8C,SAAS,CAAE2V,gBAAiB,CAC7BC,QAAS1Y,KAAKoB,MAAMqX,gBAAgBC,QACpCC,QAAS3Y,KAAKoB,MAAMqX,gBAAgBE,QACpCxO,OAAQ,W,gCAIhB,SAAmB1G,GACfzD,KAAK8C,SAAS,CAAE2V,gBAAiB,CAC7BC,QAAS1Y,KAAKoB,MAAMqX,gBAAgBC,QACpCC,QAAS3Y,KAAKoB,MAAMqX,gBAAgBE,QACpCxO,OAAQ1G,EAAEC,OAAOC,SAErBV,SAASC,eAAe,YAAYC,MAAMwL,gBAAkB,UAC5D1L,SAASC,eAAe,YAAYC,MAAMiM,MAAQ,Y,sBAKtD,WACIpP,KAAK8C,SAAS,CAAEkI,SAAS,IACzB,IAAM0N,EAAW1Y,KAAKoB,MAAMqX,gBAAgBC,QAAQlR,OAAS,EAAM,OAAWxH,KAAKoB,MAAMqX,gBAAgBC,QAAQQ,KAAK,KAChHP,EAAW3Y,KAAKoB,MAAMqX,gBAAgBE,QAAQnR,OAAS,EAAM,OAAWxH,KAAKoB,MAAMqX,gBAAgBE,QAAQO,KAAK,KAChH/O,EAASnK,KAAKoB,MAAMqX,gBAAgBtO,OAC1ClH,SAASC,eAAe,gBAAgBiF,IAAM,iDAAmDnI,KAAKoB,MAAMoX,YAAc,IAAME,EAAU,IAAMC,EAAU,IAAMxO,EAAS,M,uBAG7K,WACInK,KAAK8C,SAAS,CAAEkI,SAAS,M,+BAG7B,SAAkB6B,GAAS,IAAD,OACtB,OACI,qBAAKpM,UAAU,gCAAgCsD,GAAI8I,EAAS,QAASlM,QAAS,kBAAM,EAAKwY,uBAAuBtM,IAAhH,SACI,mBAAGpM,UAAU,qBAAqBsD,GAAI8I,EAAS,QAA/C,SAAyDA,Q,oCAKrE,SAAuBA,GAAS,IAAD,OAC3B,OACI,qBAAKpM,UAAU,gCAAgCsD,GAAI8I,EAAS,QAASlM,QAAS,kBAAM,EAAKyY,4BAA4BvM,IAArH,SACI,mBAAGpM,UAAU,qBAAqBsD,GAAI8I,EAAS,QAA/C,SAAyDA,Q,0BAKrE,WACI,OAAO,qBAAK1E,IAAK4J,GAAQ3J,IAAI,qBAAqBM,MAAM,KAAKsJ,KAAK,WAAW7O,MAAO,CAACmE,OAAO,iB,oBAGhG,WAAU,IAAD,OACL,OAAGtH,KAAKC,MAAMG,WACH,cAAC,IAAD,CAAUC,GAAG,cAGrBL,KAAKC,MAAMK,WACH,cAAC,IAAD,CAAUD,GAAG,eAGrBL,KAAKC,MAAMM,WACH,cAAC,IAAD,CAAUF,GAAG,cAIpB,gCACI,cAAC,EAAD,IACA,0DACA,qBAAKI,UAAU,OAAf,SACI,qBAAKA,UAAU,OAAf,SACI,gCACI,qBAAKA,UAAU,mBAAf,SACI,oBAAIA,UAAU,kBAAd,wBAEJ,oBAAIA,UAAU,uCAAd,+BACA,sBAAKA,UAAU,iBAAf,UACI,sBAAKA,UAAU,0BAAf,UACI,sBAAKA,UAAU,wBAAf,UACI,qBAAKA,UAAU,YAAf,eACA,mBAAGA,UAAU,qBAAb,wCAEJ,mBAAGA,UAAU,wBAAb,6CACA,qBAAKA,UAAU,gBAAf,SACKT,KAAKoB,MAAMsJ,QAAQjD,KAAI,SAACoF,GAAD,OAAa,EAAKwM,kBAAkBxM,WAGpE,gCACI,sBAAKpM,UAAU,sCAAf,UACI,sBAAKA,UAAU,wBAAf,UACI,qBAAKA,UAAU,YAAf,eACA,mBAAGA,UAAU,qBAAb,8CAEJ,mBAAGA,UAAU,wBAAb,wEACA,qBAAKA,UAAU,gBAAf,SACKT,KAAKoB,MAAMmX,YAAY9Q,KAAI,SAACoF,GAAD,OAAa,EAAKyM,uBAAuBzM,EAAO1D,gBAGpF,sBAAK1I,UAAU,0BAAf,UACA,sBAAKA,UAAU,wBAAf,UACI,qBAAKA,UAAU,YAAf,eACA,mBAAGA,UAAU,qBAAb,yCAEJ,mBAAGA,UAAU,wBAAb,uDACA,sBAAKA,UAAU,gBAAf,UACI,+BACA,uBACIiB,KAAK,SACLqC,GAAG,SACHE,KAAK,SACLsV,IAAI,IACJpV,SAAUnE,KAAKmE,SACfR,MAAO3D,KAAKoB,MAAMqX,gBAAgBtO,WAGtC,qBAAK1J,UAAU,gCAAgCsD,GAAI,WAAnD,SACI,mBAAGtD,UAAU,qBAAqBsD,GAAI,WAAYpD,QAAS,kBAAM,EAAK6Y,kBAAtE,yBAIZ,qBAAK/Y,UAAU,kBAAkBE,QAAS,kBAAM,EAAK8Y,YAArD,sBACA,qBAAKtW,MAAO,CAACC,QAAS,QAAtB,SACI,wBAAQsW,MAAM,kBAAkB3V,GAAG,eAAe4V,OAAQ,kBAAM,EAAKC,iBAEzE,8BAAQ5Z,KAAKoB,MAAM4J,QAAWhL,KAAKyT,eAAiB,8C,GAxNxDvS,aA2ObC,gBAPS,SAAAC,GAAK,MAAK,CAC9BjB,KAAMiB,EAAMxB,KAAKO,KACjBC,WAAYgB,EAAMiO,KAAKjP,WACvBE,WAAYc,EAAMiO,KAAKjP,WACvBG,WAAYa,EAAMiO,KAAK9O,cAGZY,CAAyBkX,IC1OlCwB,G,8JAEF,WACI5W,SAASC,eAAelD,KAAKC,MAAMyD,OAAOK,GAAK,SAASZ,MAAMC,QAAU,QACxEH,SAASC,eAAelD,KAAKC,MAAMyD,OAAOK,GAAK,YAAYZ,MAAMC,QAAU,OAE3E,IAAM0W,EAAevR,OAAOvI,KAAKC,MAAMyD,OAAO4E,QAExCtF,EADUC,SAASC,eAAelD,KAAKC,MAAMyD,OAAOK,GAAK,SAASZ,MAAMuF,MACtDoR,EAClB3W,EAAQ,CAACmF,OAAQf,OAAwC,KAAjCgB,OAAOvI,KAAKC,MAAMyD,OAAO4E,QAActF,GAAO,MAC5EC,SAASC,eAAelD,KAAKC,MAAMyD,OAAOK,GAAK,UAAUZ,MAAQA,I,sBAIrE,WACIF,SAASC,eAAelD,KAAKC,MAAMyD,OAAOK,GAAK,SAASZ,MAAMC,QAAU,OACxEH,SAASC,eAAelD,KAAKC,MAAMyD,OAAOK,GAAK,YAAYZ,MAAMC,QAAU,OAC3E,IAAMD,EAAQoE,OAAwC,KAAjCgB,OAAOvI,KAAKC,MAAMyD,OAAO4E,SAAe,KAC7DrF,SAASC,eAAelD,KAAKC,MAAMyD,OAAOK,GAAK,UAAUZ,MAAMmF,OAASnF,I,oBAG5E,WAAU,IAAD,OACL,GAAInD,KAAKC,MAAM8V,OAAS,GAAI,CAExB,IACMgE,EAAW/Z,KAAKC,MAAM8V,KAAK3O,WADd,SAACC,GAAD,OAAaA,EAAQtD,KAAO,EAAK9D,MAAMyD,OAAO6H,OAE3DA,EAAMvL,KAAKC,MAAM8V,KAAKgE,GACtBhS,EAAM,8BAAgCwD,EAAIjG,WAAa,IAAMiG,EAAI/F,KAAO,IAAM+F,EAAIhG,KAAO,IAAMvF,KAAKC,MAAMyD,OAAOyG,OAAS,OAEhI,OACI,sBAAK1J,UAAU,gBAAf,UACI,qBAAK0H,IAAKJ,EAAKtH,UAAU,2BACrB2H,IAAKpI,KAAKC,MAAMyD,OAAO+E,WACvB1E,GAAI/D,KAAKC,MAAMyD,OAAOK,GAAK,SAC3BZ,MAAO,CAACmF,OAAQf,OAAwC,KAAjCgB,OAAOvI,KAAKC,MAAMyD,OAAO4E,SAAe,QAEnE,qBAAK7H,UAAU,KAAKsD,GAAI/D,KAAKC,MAAMyD,OAAOK,GAAK,WAA/C,SACI,qBAAKtD,UAAU,qBAAqBsD,GAAI/D,KAAKC,MAAMyD,OAAOK,GAAK,QAASpD,QAAS,kBAAM,EAAKqZ,YAA5F,SAAwG,mBAAGvZ,UAAU,OAAb,mBAE5G,sBAAKA,UAAU,iBAAiB0C,MAAO,CAACC,QAAS,QAASW,GAAI/D,KAAKC,MAAMyD,OAAOK,GAAK,QAArF,UACI,qBAAKtD,UAAU,0BAA0BE,QAAS,kBAAM,EAAKsZ,YAA7D,SACI,mBAAGxZ,UAAU,SAAb,iBAEJ,mBAAGA,UAAU,sBAAb,SAAoCT,KAAKC,MAAMyD,OAAO+E,aACtD,sBAAKtF,MAAO,CAACC,QAAS,QAAtB,UACI,mBAAG3C,UAAU,oBAAb,SAAkC,WAClC,4BAAI8K,EAAI/F,UAEZ,sBAAKrC,MAAO,CAACC,QAAS,QAAtB,UACI,mBAAG3C,UAAU,oBAAb,SAAkC,kBAClC,4BAAI8K,EAAIjG,gBAEZ,sBAAKnC,MAAO,CAACC,QAAS,QAAtB,UACI,mBAAG3C,UAAU,oBAAb,SAAkC,WAClC,4BAAI8K,EAAIhG,UAEZ,sBAAKpC,MAAO,CAACC,QAAS,QAAtB,UACI,mBAAG3C,UAAU,oBAAb,SAAkC,aAClC,4BAAIT,KAAKC,MAAMyD,OAAOyG,YAE1B,sBAAKhH,MAAO,CAACC,QAAS,QAAtB,UACI,mBAAG3C,UAAU,oBAAb,SAAkC,gBAClC,4BAAIT,KAAKC,MAAMyD,OAAOyF,YAE1B,sBAAKhG,MAAO,CAACC,QAAS,QAAtB,UACI,mBAAG3C,UAAU,oBAAb,SAAkC,WAClC,4BAAIT,KAAKC,MAAMyD,OAAOyC,UAE1B,qBAAK1F,UAAU,yBAAyBE,QAAS,kBAAM,EAAKV,MAAMia,eAAe3O,EAAIjG,WAAYiG,EAAI/F,OAArG,8BAMZ,OAAO,4B,GA1EEtE,aA+EfiZ,G,kDACF,WAAYla,GAAQ,IAAD,8BACf,cAAMA,IAqBVkE,SAAW,SAAAV,GAAC,OAAI,EAAKX,SAAS,CAAEsX,YAAa3W,EAAEC,OAAOC,SAtBnC,EAwBnBiC,SAAW,SAAAnC,GACPA,EAAEoC,iBACF,EAAK/C,SAAS,CAAEuX,YAAY,IAC5BpX,SAASC,eAAe,cAAcC,MAAMC,QAAU,OACtD,EAAKnD,MAAMqa,cAAc,EAAKlZ,MAAMgZ,aACpC,EAAKtX,SAAS,CACViJ,QAAS,EAAK9L,MAAMsa,sBAEpB,EAAKta,MAAMsa,sBAAwB,CAAC,MACpCtX,SAASC,eAAe,cAAcC,MAAMC,QAAU,SA/B1D,EAAKhC,MAAQ,CACT2K,QAAS,CAAC,IACVgK,KAAM,CAAC,IACPqE,YAAa,GACbpP,SAAS,EACTqP,YAAY,EACZG,aAAc,IARH,E,sDAqCnB,SAAmBrM,GAEX,IAAIpC,EADJoC,EAAUoM,sBAAwBva,KAAKC,MAAMsa,sBAGzCxO,OAD6CE,IAA7CjM,KAAKC,MAAMsa,oBAAoB,GAAG/S,OACxBxH,KAAKC,MAAMsa,oBAAoB,GAE/Bva,KAAKC,MAAMsa,oBAEzBva,KAAKC,MAAMwa,QAAQ1O,EAAQtE,KAAI,SAAA/D,GAAM,OAAIA,EAAO6H,SAGhD4C,EAAUuM,oBAAsB1a,KAAKC,MAAMya,mBAC3C1a,KAAK8C,SAAS,CACVuX,YAAY,M,4BAKxB,SAAe/U,EAAYE,GACvBxF,KAAK8C,SAAS,CAAE0X,aAAc,CAAClV,WAAYA,EAAYE,KAAMA,O,0BAGjE,SAAa9B,GAAS,IAAD,OACjB,OACI,cAAC,GAAD,CACIA,OAAQA,EACRqS,KAAM/V,KAAKC,MAAMya,kBAAkB,GAEnCR,eAAgB,SAAC5U,EAAYE,GAAb,OAAsB,EAAK0U,eAAe5U,EAAYE,KADjE9B,EAAOK,M,0BAMxB,WACI,OAAO,qBAAKoE,IAAK4J,GAAQ3J,IAAI,qBAAqBM,MAAM,KAAKsJ,KAAK,e,oBAGtE,WAAU,IAmBFjG,EACA4O,EApBC,OACL,GAAG3a,KAAKC,MAAMG,WACV,OAAO,cAAC,IAAD,CAAUC,GAAG,cAGxB,GAAGL,KAAKC,MAAMK,WACV,OAAO,cAAC,IAAD,CAAUD,GAAG,eAGxB,GAAGL,KAAKC,MAAMM,WACV,OAAO,cAAC,IAAD,CAAUF,GAAG,cAGxB,GAA+B,KAA5BL,KAAKoB,MAAMoZ,aAAqB,CAC/B,IAAMlV,EAAatF,KAAKoB,MAAMoZ,aAAalV,WACrCE,EAAOxF,KAAKoB,MAAMoZ,aAAahV,KACrC,OAAO,cAAC,IAAD,CAAUnF,GAAI,aAAeiF,EAAa,IAAME,EAAO,QAS/D,OAFuBmV,EAAN,KADd5O,EADgD,qBAA7C/L,KAAKC,MAAMsa,oBAAoB,GAAG/S,OAC3BxH,KAAKC,MAAMsa,oBAAoB,GAAiBva,KAAKC,MAAMsa,qBAClE/S,OAAkC,CAACpE,QAAS,QAA6B,CAACA,QAAS,QAGxF,gCACI,cAAC,EAAD,IACA,kDACA,qBAAK3C,UAAU,OAAf,SACI,qBAAKA,UAAU,OAAf,SACI,gCACI,qBAAKA,UAAU,mBAAf,SACI,oBAAIA,UAAU,kBAAd,wBAEJ,oBAAIA,UAAU,uCAAd,oBACA,8BACI,sBAAMA,UAAU,cAAcsD,GAAG,cAAc6B,SAAU5F,KAAK4F,SAA9D,SACI,sBAAKnF,UAAU,aAAf,UACI,qBAAKA,UAAU,gBACf,uBACIiB,KAAK,OACLjB,UAAU,eACVwD,KAAK,cACLE,SAAUnE,KAAKmE,SACfR,MAAO3D,KAAKoB,MAAMgZ,qBAKlC,gCACI,mBAAG3Z,UAAU,aAAasD,GAAG,aAAaZ,MAAOwX,EAAjD,wBACA,qBAAKla,UAAU,aAAf,SAEKT,KAAKoB,MAAM4J,QAAWhL,KAAKyT,eAC3BzT,KAAKoB,MAAMiZ,WAAetO,EAAQtE,KAAI,SAAC/D,GAAD,OAAY,EAAKkX,aAAalX,MAAa,2C,GAlIjGxC,aAwJNC,gBATS,SAAAC,GAAK,MAAK,CAC9BjB,KAAMiB,EAAMxB,KAAKO,KACjBC,WAAYgB,EAAMiO,KAAKjP,WACvBE,WAAYc,EAAMiO,KAAKjP,WACvBG,WAAYa,EAAMiO,KAAK9O,WACvBga,oBAAqBnZ,EAAMuF,SAAS4T,oBACpCG,kBAAmBtZ,EAAMuF,SAAS+T,qBAGE,CAAEJ,cjBhKb,SAAC7C,GAAD,OAAY,SAACpW,EAAU3B,GAChD,IAAM6V,EAAc/Q,KAAKC,UAAUgT,GAMnCnW,IACKC,KAAK,kBAAmBgU,EANd,CACXzV,QAAS,CACL,eAAgB,qBAI0BL,EAAYC,IACzD8B,MAAK,SAAAC,GACFJ,EAAS,CACLK,KAAMnC,EACNsC,SAAiBJ,EAAIwF,KAAKO,OAA2B/F,EAAIwF,WAGhEvC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QiBiJqB8V,QjB9IlC,SAAC1E,GAAD,OAAU,SAAC1U,EAAU3B,GACxC,IAAMmb,EAASrW,KAAKC,UAAUsR,GAM9BzU,IACKC,KAAK,SAAUsZ,EANL,CACX/a,QAAS,CACL,eAAgB,qBAIYL,EAAYC,IAC3C8B,MAAK,SAAAC,GACFJ,EAAS,CACLK,KAAMlC,EACNqC,QAASJ,EAAIwF,UAGpBvC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,SiB+HrBxD,CAAqDgZ,I,SC1OvDW,I,OAAb,4MACI1Z,MAAQ,CACJV,SAAU,GACVqa,SAAU,GACVC,WAAW,GAJnB,EAcIpV,SAAW,SAAAnC,GACPA,EAAEoC,iBACF,EAAK5F,MAAMgb,MAAM,EAAK7Z,MAAMV,SAAU,EAAKU,MAAM2Z,UACjD,EAAKjY,SAAS,CAAEkY,WAAW,KAjBnC,EAoBI7W,SAAW,SAAAV,GAAC,aAAI,EAAKX,UAAL,oBACXW,EAAEC,OAAOO,KAAOR,EAAEC,OAAOC,OADd,4BAED,GAFC,KApBpB,4CAyBI,WACI,GAAGV,SAASC,eAAe,SAAU,CACjC,IAAMgY,EAAQjY,SAASC,eAAe,SAASG,UAC/C,GAAGrD,KAAKC,MAAMC,gBACV,OAAO,cAAC,IAAD,CAAUib,MAAI,EAAC9a,GAAIL,KAAKC,MAAM+M,WAC/BhN,KAAKC,MAAMmb,aAAepb,KAAKoB,MAAM4Z,UACtCE,EAAMtO,SAAS,SAChBsO,EAAMzL,IAAI,QAGVyL,EAAMtO,SAAS,SACfsO,EAAM1L,OAAO,QAKzB,MAA+BxP,KAAKoB,MAA5BV,EAAR,EAAQA,SAAUqa,EAAlB,EAAkBA,SAClB,OACI,sBAAKta,UAAU,OAAf,UACI,iDACA,uBAAMA,UAAU,aAAhB,UACA,sBAAKA,UAAU,SAAf,UACI,qDACA,qBAAIA,UAAU,SAAd,UACI,oBAAIA,UAAU,WAAd,SACI,cAAC,IAAD,CAAMJ,GAAG,YAAYI,UAAU,WAA/B,wBAEJ,oBAAIA,UAAU,WAAd,SACI,cAAC,IAAD,CAAMJ,GAAG,SAASI,UAAU,WAA5B,2BAIZ,qBAAKA,UAAU,iBAAf,SACI,sBAAKA,UAAU,gBAAf,UACA,+CACA,mBAAGA,UAAU,YAAb,2CACA,uBAAMmF,SAAU5F,KAAK4F,SAArB,UACI,sBAAKnF,UAAU,aAAf,UACA,uBACIiB,KAAK,OACLjB,UAAU,eACVwD,KAAK,WACLE,SAAUnE,KAAKmE,SACfR,MAAOjD,IAEX,gDAEA,sBAAKD,UAAU,aAAf,UACA,uBACIiB,KAAK,WACLjB,UAAU,eACVwD,KAAK,WACLE,SAAUnE,KAAKmE,SACfR,MAAOoX,IAEX,gDAEA,sBAAKta,UAAU,aAAf,UACA,mBAAGA,UAAU,gBAAgBsD,GAAG,QAAhC,6CACA,wBAAQrC,KAAK,SAASjB,UAAU,eAAhC,wCApFxB,GAA2BS,cAuGZC,gBANS,SAAAC,GAAK,MAAK,CAC/BlB,gBAAiBkB,EAAMxB,KAAKM,gBAC5Bkb,YAAaha,EAAMxB,KAAKwb,YACxBpO,SAAU5L,EAAMxB,KAAKoN,YAGgB,CAAEiO,MvBzDrB,SAACva,EAAUqa,GAAX,OAAwB,SAAA1Z,GAEzCA,EAAS,CACLK,KAAMzD,IAIV,IAOMqQ,EAAO9J,KAAKC,UAAU,CAAE/D,WAAUqa,aAExCzZ,IACKC,KAAK,kBAAmB+M,EAVd,CACXxO,QAAS,CACL,eAAgB,sBASnB0B,MAAK,SAAAC,GACFJ,EAAS,CACLK,KAAMxD,EACN2D,QAASJ,EAAIwF,UAGpBvC,OAAM,SAAAC,GACHtD,EAAS,CACLK,KAAMvD,UuB+BPgD,CAAoC2Z,IC1GtCO,GAAb,4MACIja,MAAQ,CACJV,SAAU,GACV4a,MAAO,GACPP,SAAU,GACVQ,UAAW,IALnB,EAaI3V,SAAW,SAAAnC,GACPA,EAAEoC,iBACF,MAAiD,EAAKzE,MAA9CV,EAAR,EAAQA,SAAU4a,EAAlB,EAAkBA,MAAOP,EAAzB,EAAyBA,SACzB,GAAGA,IADH,EAAmCQ,UAE/B3W,QAAQC,IAAI,+BACT,CACH,IAAM2W,EAAU,CACZ9a,WACA4a,QACAP,YAEJ,EAAK9a,MAAMwb,SAASD,KAxBhC,EA4BIrX,SAAW,SAAAV,GAAC,OAAI,EAAKX,SAAL,gBAAiBW,EAAEC,OAAOO,KAAOR,EAAEC,OAAOC,SA5B9D,4CA8BI,WACI,GAAG3D,KAAKC,MAAMC,gBACV,OAAO,cAAC,IAAD,CAAUG,GAAG,cAGxB,MAAiDL,KAAKoB,MAA9CV,EAAR,EAAQA,SAAU4a,EAAlB,EAAkBA,MAAOP,EAAzB,EAAyBA,SAAUQ,EAAnC,EAAmCA,UACnC,OACI,sBAAK9a,UAAU,OAAf,UACI,oDACA,uBAAMA,UAAU,gBAAhB,UACA,sBAAKA,UAAU,SAAf,UACI,qDACA,qBAAIA,UAAU,SAAd,UACI,oBAAIA,UAAU,WAAd,SACI,cAAC,IAAD,CAAMJ,GAAG,YAAYI,UAAU,WAA/B,wBAEJ,oBAAIA,UAAU,WAAd,SACI,cAAC,IAAD,CAAMJ,GAAG,SAASI,UAAU,WAA5B,2BAIZ,qBAAKA,UAAU,iBAAf,SACI,sBAAKA,UAAU,gBAAf,UACA,mEACA,mBAAIA,UAAU,YAAd,qDACA,uBAAMmF,SAAU5F,KAAK4F,SAArB,UACI,sBAAKnF,UAAU,aAAf,UACA,uBACIiB,KAAK,OACLjB,UAAU,eACVwD,KAAK,WACLE,SAAUnE,KAAKmE,SACfR,MAAOjD,IAEX,gDAEA,sBAAKD,UAAU,aAAf,UACA,uBACIiB,KAAK,OACLjB,UAAU,eACVwD,KAAK,QACLE,SAAUnE,KAAKmE,SACfR,MAAO2X,IAEX,6CAEA,sBAAK7a,UAAU,aAAf,UACA,uBACIiB,KAAK,WACLjB,UAAU,eACVwD,KAAK,WACLE,SAAUnE,KAAKmE,SACfR,MAAOoX,IAEX,gDAEA,sBAAKta,UAAU,aAAf,UACA,uBACIiB,KAAK,WACLjB,UAAU,eACVwD,KAAK,YACLE,SAAUnE,KAAKmE,SACfR,MAAO4X,IAEX,wDAEA,qBAAK9a,UAAU,aAAf,SACA,wBAAQiB,KAAK,SAASjB,UAAU,kBAAhC,gDAjGxB,GAA8BS,aAkHdC,gBAJQ,SAAAC,GAAK,MAAK,CAC9BlB,gBAAiBkB,EAAMxB,KAAKM,mBAGS,CAAEub,SxBjCnB,SAAC,GAAD,IAAG/a,EAAH,EAAGA,SAAUqa,EAAb,EAAaA,SAAUO,EAAvB,EAAuBA,MAAvB,OAAmC,SAAAja,GAGvD,IAOMiN,EAAO9J,KAAKC,UAAU,CAAE/D,WAAU4a,QAAOP,aAE/CzZ,IACKC,KAAK,qBAAsB+M,EAVjB,CACXxO,QAAS,CACL,eAAgB,sBASnB0B,MAAK,SAAAC,GACFJ,EAAS,CACLK,KAAMrD,EACNwD,QAASJ,EAAIwF,UAGpBvC,OAAM,SAAAC,GACHtD,EAAS,CACLK,KAAMpD,UwBWN6C,CAAuCka,I,iBCxHxC,OAA0B,mC,wBC0B1Bla,gBAJS,SAAAC,GAAK,MAAK,CAC9BxB,KAAMwB,EAAMxB,QAGDuB,EApBM,SAAC,GAAD,IAAcD,EAAd,EAAGwa,UAAsB9b,EAAzB,EAAyBA,KAAS+b,EAAlC,0BACjB,cAAC,IAAD,6BACQA,GADR,IAEIC,OAAQ,SAAA3b,GAEJ,OADa4b,OAAO7O,SAASC,SAC1BrN,EAAKkc,UACG,qBAAK3T,IAAK4J,GAAQ3J,IAAI,aAAaM,MAAM,KAAKsJ,KAAK,aACnDpS,EAAKM,gBAGL,cAACgB,EAAD,gBAAejB,IAFf,cAAC,IAAD,CAAUI,GAAG,kB,2BCE9B0b,GAAe,CACjBpc,MAAOqc,aAAaC,QAAQ,SAC5B/b,gBAAiB,KACjBkb,aAAa,EACbc,gBAAgB,EAChBJ,WAAW,EACX3b,KAAM,KACNgN,YAAa,KACbH,SAAU6O,OAAO7O,SAASC,SAC1BkP,cAAe,GCjBbJ,GAAe,CACjB3b,YAAY,EACZE,YAAY,EACZC,YAAY,EACZ2X,iBAAiB,EACjBC,UAAU,GCER4D,GAAe,CACjBvI,UAAU,EACV4I,WAAW,EACX7Z,WAAY,IACZoF,gBAAgB,EAChBC,iBAAiB,EACjBlB,MAAO,GACP6T,oBAAqB,CAAC,IACtBG,kBAAmB,CAAC,KClBT2B,8BAAgB,CAC7Bzc,KHsBa,WAAwC,IAA/BwB,EAA8B,uDAAtB2a,GAAcO,EAAQ,uCAClD,OAAOA,EAAO5a,MACV,KAAK7D,EACD,OAAO,6BACAuD,GADP,IAEI0a,WAAW,IAEnB,KAAKhe,EACD,OAAO,6BACAsD,GADP,IAEIlB,iBAAiB,EACjB4b,WAAW,EACX3b,KAAMmc,EAAOza,QAAQ1B,KACrBgN,YAAamP,EAAOza,QAAQsL,cAEpC,KAAK3O,EACD,OAAO,6BACA4C,GADP,IAEI+L,YAAamP,EAAOza,UAE5B,KAAK9D,EACD,OAAO,6BACAqD,GADP,IAEI4L,SAAUsP,EAAOza,UAEzB,KAAK5D,EACD,OAAO,0CACAmD,GACAkb,EAAOza,SAFd,IAGIuZ,aAAa,IAErB,KAAKld,EACL,KAAKG,EAED,OADA2d,aAAaO,QAAQ,QAASD,EAAOza,QAAQlC,OACtC,0CACAyB,GACAkb,EAAOza,SAFd,IAGI3B,iBAAiB,EACjB4b,WAAW,IAEnB,KAAK9d,EACL,KAAKI,EACL,KAAKE,EAED,OADA0d,aAAaQ,WAAW,SACjB,6BACApb,GADP,IAEIzB,MAAO,KACPQ,KAAM,KACND,iBAAiB,EACjB4b,WAAW,EACXI,gBAAgB,IAExB,KAAK5d,EAED,OADA0d,aAAaQ,WAAW,SACjB,6BACApb,GADP,IAEIzB,MAAO,KACPQ,KAAM,KACND,iBAAiB,EACjB4b,WAAW,IAEnB,KAAK3d,EAED,OADA6d,aAAaQ,WAAW,SACjB,6BACApb,GADP,IAEIzB,MAAO,KACPQ,KAAM,KACND,iBAAiB,EACjB4b,WAAW,EACXV,aAAa,IAGrB,QACI,OAAOha,IG9FjBiO,KFSa,WAAwC,IAA/BjO,EAA8B,uDAAtB2a,GAAcO,EAAQ,uCAClD,OAAOA,EAAO5a,MACV,KAAKjD,EACD,OAAO,6BACA2C,GADP,IAEIhB,YAAY,EACZE,YAAY,EACZC,YAAY,EACZ2X,iBAAiB,EACjBC,UAAU,IAElB,KAAKzZ,EACD,OAAO,6BACA0C,GADP,IAEIhB,YAAY,EACZE,YAAY,EACZC,YAAY,EACZ2X,iBAAiB,EACjBC,UAAU,IAGlB,KAAKxZ,EACD,OAAO,6BACAyC,GADP,IAEIhB,YAAY,EACZE,YAAY,EACZC,YAAY,EACZ2X,iBAAiB,EACjBC,UAAU,IAGlB,KAAKvZ,EACD,OAAO,6BACAwC,GADP,IAEIhB,YAAY,EACZE,YAAY,EACZC,YAAY,EACZ2X,iBAAiB,EACjBC,UAAU,IAGlB,KAAKtZ,EACD,OAAO,6BACAuC,GADP,IAEIhB,YAAY,EACZE,YAAY,EACZC,YAAY,EACZ2X,iBAAiB,EACjBC,UAAU,IAGlB,QACI,OAAO/W,IE5DjBuF,SDkBa,WAAwC,IAA/BvF,EAA8B,uDAAtB2a,GAAcO,EAAQ,uCAClD,OAAOA,EAAO5a,MACV,KAAK3C,EACD,OAAO,6BACAqC,GADP,IAEIoS,UAAU,IAElB,KAAK1U,EACD,OAAO,6BACAsC,GADP,IAEIoS,UAAU,IAElB,KAAKvU,EACD,OAAO,6BACAmC,GADP,IAEIgb,WAAW,IAEnB,KAAKpd,EACD,OAAO,6BACAoC,GADP,IAEIgb,WAAW,IAEnB,KAAK7d,EACD,OAAO,6BACA6C,GADP,IAEImB,WAAY+Z,EAAOza,UAE3B,KAAK3C,EACD,OAAO,6BACAkC,GADP,IAEIuG,gBAAgB,IAExB,KAAKxI,EACD,OAAO,6BACAiC,GADP,IAEIuG,gBAAgB,IAExB,KAAKvI,EACD,OAAO,6BACAgC,GADP,IAEIuG,gBAAgB,IAExB,KAAKtI,EACD,OAAO,6BACA+B,GADP,IAEIuG,gBAAgB,IAExB,KAAKrI,EACD,OAAO,6BACA8B,GADP,IAEIsF,MAAO4V,EAAOza,UAEtB,KAAKtC,EACD,OAAO,6BACA6B,GADP,IAEImZ,2BAA8B+B,EAAOza,UAAasU,MAAUmG,EAAOza,QAAY,CAACya,EAAOza,WAE/F,KAAKrC,EACD,OAAO,6BACA4B,GADP,IAEIsZ,yBAA4B4B,EAAOza,UAAasU,MAAUmG,EAAOza,QAAY,CAACya,EAAOza,WAE7F,QACI,OAAOT,MElFbqb,GAAa,CAACC,MAQLC,GANDC,uBACZC,GALmB,GAOnBC,+BAAoBC,mBAAe,WAAf,EAAmBN,MCwC1BO,G,uKAjCX,WACIL,GAAMtb,UhCHgB,SAACA,EAAU3B,GAErC2B,EAAS,CAAEK,KAAM7D,IAGjByD,IACK0F,IAAI,iBAAkBvH,EAAYC,IAClC8B,MAAK,SAAAyb,GACF3b,IACK0F,IAAI,gBAAkBiW,EAAQhW,KAAKvG,SAAW,KAC9Cc,MAAK,SAAA0b,GACF7b,EAAS,CACLK,KAAM5D,EACN+D,QAAS,CAAC1B,KAAM8c,EAAQhW,KAAMkG,YAAa+P,EAAQjW,WAG1DvC,OAAM,SAAAC,GACHtD,EAAS,CACLK,KDpBS,4BCwBxBgD,OAAM,SAAAC,GACHtD,EAAS,CACLK,KAAM1D,Y,oBgClBlB,WACI,OACI,cAAC,IAAD,CAAU2e,MAAOA,GAAjB,SACI,cAAC,IAAD,UACI,eAAC,IAAD,WACI,cAAC,GAAD,CACIQ,OAAK,EAACC,KAAK,8BAEX1B,UAAW2B,YAAWtS,KADjB8Q,OAAO7O,SAASC,UAEzB,cAAC,GAAD,CACIkQ,OAAK,EAACC,KAAK,sCAEX1B,UAAW2B,YAAWtS,KADjB8Q,OAAO7O,SAASC,UAEzB,cAAC,GAAD,CAAckQ,OAAK,EAACC,KAAK,aAAa1B,UAAW3Q,KACjD,cAAC,GAAD,CAAcoS,OAAK,EAACC,KAAK,aAAa1B,UAAWpG,KACjD,cAAC,GAAD,CAAc6H,OAAK,EAACC,KAAK,YAAY1B,UAAW5D,KAChD,cAAC,GAAD,CAAcqF,OAAK,EAACC,KAAK,0BAA0B1B,UAAWrD,KAC9D,cAAC,GAAD,CAAc8E,OAAK,EAACC,KAAK,mBAAmB1B,UAAWvB,KACvD,cAAC,IAAD,CAAOgD,OAAK,EAACC,KAAK,YAAY1B,UAAWL,KACzC,cAAC,IAAD,CAAO8B,OAAK,EAACC,KAAK,SAAS1B,UAAWZ,KACtC,cAAC,GAAD,CAAcqC,OAAK,EAACC,KAAK,IAAI1B,UAAW3Q,gB,GA1B9C7J,aCLHoc,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBhc,MAAK,YAAkD,IAA/Cic,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASlC,OACL,cAAC,GAAD,IACF3Y,SAASC,eAAe,SAM1Boa,M","file":"static/js/main.c25581ab.chunk.js","sourcesContent":["// Authentication\nexport const USER_LOADING = \"USER_LOADING\";\nexport const USER_LOADED = \"USER_LOADED\";\nexport const LOCATION_SAVED = \"LOCATION_SAVED\";\nexport const AUTH_ERROR = \"AUTH_ERROR\";\nexport const LOGIN_ATTEMPT = \"LOGIN_ATTEMPT\";\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport const LOGIN_FAIL = \"LOGIN_FAIL\";\nexport const LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\";\nexport const REGISTER_SUCCESS = \"REGISTER_SUCCESS\";\nexport const REGISTER_FAIL = \"REGISTER_FAIL\";\n\n// Preferences\nexport const SCALE_CHANGED = \"SCALE_CHANGED\";\nexport const PREFERENCES_LOADED = \"USER_LOADED\";\nexport const PREFERENCES_ERROR = \"PREFERENCES_ERROR\";\n\n// Menu\nexport const CLASSIFY_PAGE = \"CLASSIFY_PAGE\";\nexport const NOTEBOOK_PAGE = \"NOTEBOOK_PAGE\";\nexport const ANALYSIS_PAGE = \"ANALYSIS_PAGE\";\nexport const CLASSDOWNLOAD_PAGE = \"CLASSDOWNLOAD_PAGE\";\nexport const SEARCH_PAGE = \"SEARCH_PAGE\";\n\n// Classification\nexport const SAVE_SUCCESS = \"SAVE_SUCCESS\";\nexport const SAVE_PROGRESS = \"SAVE_PROGRESS\";\nexport const SYNC_SUCCESS = \"SYNC_SUCCESS\";\nexport const SYNC_PROGRESS = \"SYNC_PROGRESS\";\nexport const NOTES_CHANGED = \"NOTES_CHANGED\";\nexport const NOTES_RECORDED = \"NOTES_RECORDED\";\nexport const REPLY_OPEN = \"REPLY_OPEN\";\nexport const REPLY_RESOLVED = \"REPLY_RESOLVED\";\nexport const NOTE_SUCCESS = \"NOTE_SUCCESS\";\nexport const NOTEBOOK_FILTERED = \"NOTEBOOK_FILTERED\";\nexport const TARGETS_BASIC_SEARCHED = \"TARGETS_BASIC_SEARCHED\";\nexport const BINS_BASIC_SEARCHED = \"BINS_BASIC_SEARCHED\";","import axios from 'axios';\nimport {\n    USER_LOADED,\n    USER_LOADING,\n    PREFERENCES_LOADED,\n    PREFERENCES_ERROR,\n    LOCATION_SAVED,\n    AUTH_ERROR,\n    LOGIN_ATTEMPT,\n    LOGIN_SUCCESS,\n    LOGIN_FAIL,\n    LOGOUT_SUCCESS,\n    REGISTER_SUCCESS,\n    REGISTER_FAIL\n} from '../actions/types';\n\n// CHECK TOKEN & LOAD USER\nexport const loadUser = () => (dispatch, getState) => {\n    // User Loading\n    dispatch({ type: USER_LOADING });\n\n    \n    axios\n        .get('/api/auth/user', tokenConfig(getState))\n        .then(userRes => {\n            axios\n                .get('/preferences/' + userRes.data.username + '/')\n                .then(prefRes => {\n                    dispatch({\n                        type: USER_LOADED,\n                        payload: {user: userRes.data, preferences: prefRes.data}\n                    });\n                })\n                .catch(err => {\n                    dispatch({\n                        type: PREFERENCES_ERROR\n                    });\n                });\n        })\n        .catch(err => {\n            dispatch({\n                type: AUTH_ERROR\n            });\n        })\n}\n\n// SAVE LOCATION\nexport const saveLocation = (location) => (dispatch) => {\n    dispatch({ \n        type: LOCATION_SAVED,\n        payload: location\n    });\n}\n\n// LOGIN USER\nexport const login = (username, password) => dispatch => {\n    \n    dispatch({\n        type: LOGIN_ATTEMPT\n    });\n    \n    // Headers\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n\n    // Request Body\n    const body = JSON.stringify({ username, password });\n\n    axios\n        .post('/api/auth/login', body, config)\n        .then(res => {\n            dispatch({\n                type: LOGIN_SUCCESS,\n                payload: res.data\n            });\n        })\n        .catch(err => {\n            dispatch({\n                type: LOGIN_FAIL\n            });\n        })\n};\n\n// REGISTER USER\nexport const register = ({ username, password, email }) => dispatch => {\n    \n    // Headers\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n\n    // Request Body\n    const body = JSON.stringify({ username, email, password });\n\n    axios\n        .post('/api/auth/register', body, config)\n        .then(res => {\n            dispatch({\n                type: REGISTER_SUCCESS,\n                payload: res.data\n            });\n        })\n        .catch(err => {\n            dispatch({\n                type: REGISTER_FAIL\n            });\n        })\n};\n\n// LOGOUT USER\nexport const logout = () => (dispatch, getState) => {\n    axios\n        .post('/api/auth/logout/', null, tokenConfig(getState))\n        .then(res => {\n            dispatch({\n                type: LOGOUT_SUCCESS\n            });\n        });\n};\n\n// Setup config with token (helper function)\nexport const tokenConfig = getState => {\n    \n    // Get token from state\n    const token = getState().auth.token\n    \n    // Headers\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n\n    // if token, add to headers config\n    if(token) {\n        config.headers['Authorization'] = `Token ${token}`;\n    }\n\n    return config;\n}","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link,  Redirect } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { logout } from \"../../actions/auth\";\nimport { goto_classify, goto_notebook, goto_analysis } from \"../../actions/menu\";\n\nexport class Header extends Component {\n    static propTypes = {\n        auth: PropTypes.object.isRequired,\n        logout: PropTypes.func.isRequired,\n        goto_classify: PropTypes.func.isRequired,\n        goto_notebook: PropTypes.func.isRequired,\n        goto_analysis: PropTypes.func.isRequired,\n    };\n\n    render() {\n        const { isAuthenticated, user } = this.props.auth;\n\n        if(this.props.onClassify) {\n            return <Redirect to=\"/classify\" />\n        } else if(this.props.onNotebook) {\n            return <Redirect to=\"/notebook/\" />\n        } else if(this.props.onAnalysis) {\n            return <Redirect to=\"/analysis\" />\n        }\n\n        const authLinks = (\n            <ul className=\"logoutbar\">\n                <span className='nav-hello'>\n                    <strong className='nav-hello'>\n                        { user ? `Welcome, ${user.username}` : \"\" }\n                    </strong>\n                </span>\n                <div className=\"login-navbar\">\n                    <li>\n                        <button \n                            onClick={this.props.goto_classify}\n                            className=\"login-nav-link\">\n                                Classify\n                        </button>\n                    </li>\n                    <li>\n                        <button  \n                            onClick={this.props.goto_notebook}\n                            className=\"login-nav-link\">\n                                Notebook\n                        </button>\n                    </li>\n                    <li>\n                        <button  \n                            onClick={this.props.goto_analysis}\n                            className=\"login-nav-link\">\n                                Analysis\n                        </button>\n                    </li>\n                    <li>\n                        <a  \n                            href=\"http://dhcp-25-80.ucsc.edu:8000/admin/\" // TODO: Fix URL later\n                            className=\"login-nav-link\">\n                                Admin\n                        </a>\n                    </li>\n                </div>\n                <li className=\"nav-item\">\n                    <button \n                        onClick={this.props.logout} \n                        to=\"/login\" \n                        className=\"logout\">Logout</button>\n                </li>\n            </ul>\n        );\n\n        const guestLinks = (\n            <ul className=\"navbar\">\n                <li className=\"nav-item\">\n                    <Link to=\"/register\" className=\"nav-link\">Register</Link>\n                </li>\n                <li className=\"nav-item\">\n                    <Link to=\"/login\" className=\"nav-link\">Login</Link>\n                </li>\n            </ul>\n        );\n        \n        return (\n            <header>\n                <h3>IFCB Classification</h3>\n                { isAuthenticated ? authLinks : guestLinks }\n            </header>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    auth: state.auth,\n});\n\nexport default connect(mapStateToProps, { logout, goto_classify, goto_notebook, goto_analysis })(Header);","import {\n    CLASSIFY_PAGE,\n    NOTEBOOK_PAGE,\n    ANALYSIS_PAGE,\n    CLASSDOWNLOAD_PAGE,\n    SEARCH_PAGE,\n} from '../actions/types';\n\nexport const goto_classify = () => (dispatch) => {\n    dispatch({\n        type: CLASSIFY_PAGE\n    });\n};\n\nexport const goto_notebook = () => (dispatch) => {\n    dispatch({\n        type: NOTEBOOK_PAGE\n    });\n};\n\nexport const goto_analysis = () => (dispatch) => {\n    dispatch({\n        type: ANALYSIS_PAGE\n    });\n};\n\nexport const goto_classdownload = () => (dispatch) => {\n    console.log('Going to Download');\n    dispatch({\n        type: CLASSDOWNLOAD_PAGE\n    });\n};\n\nexport const goto_search = () => (dispatch) => {\n    console.log('Going to Download');\n    dispatch({\n        type: SEARCH_PAGE\n    });\n};","import axios from \"axios\";\nimport { tokenConfig } from './auth';\nimport { \n    SCALE_CHANGED,\n} from \"./types\";\n\n\nexport const setLoadPreference = (loadPref, username) => (dispatch, getState) => {\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n    axios\n        .post('/preferences/setload/' + username + '/', JSON.stringify(loadPref), config, tokenConfig(getState))\n        .catch((err) => console.log(err));\n}\n\nexport const setScalePreference = (scale, username) => (dispatch, getState) => {\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n    axios\n        .post('/preferences/setscale/' + username + '/', JSON.stringify(scale), config, tokenConfig(getState))\n        .catch((err) => console.log(err));\n}\n\nexport const setSortPreference = (sortPref, username) => (dispatch, getState) => {\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n\n    var sort;\n    if (sortPref.AZ) {\n        sort = 'AZ';\n    } else if (sortPref.ZA) {\n        sort = 'ZA';\n    } else if (sortPref.LS) {\n        sort = 'LS';\n    } else if (sortPref.SL) {\n        sort = 'SL';\n    }\n\n    axios\n        .post('/preferences/setsort/' + username + '/', JSON.stringify(sort), config, tokenConfig(getState))\n        .catch((err) => console.log(err));\n}\n\nexport const changeScale = (newScale) => (dispatch) => {\n    dispatch({\n        type: SCALE_CHANGED,\n        payload: newScale\n    });\n}","import React from \"react\";\nimport axios from \"axios\";\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { changeScale, setLoadPreference, setScalePreference, setSortPreference } from \"../../actions/preferences\";\nimport '../../css/classify-styles.css';\n\nclass Preferences extends React.Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            recentChecked: true,\n            initialRecentChecked: true,\n            sortChecked: {AZ: true, ZA: false, LS: false, SL: false},\n            initialSortChecked: {AZ: true, ZA: false, LS: false, SL: false},\n            scaleEntry: 560,\n            initialScaleEntry: 560,\n        }\n        this.onSortChange = this.onSortChange.bind(this);\n        this.onScaleChange = this.onScaleChange.bind(this);\n        this.onLoadChange = this.onLoadChange.bind(this);\n    }\n\n    static propTypes = {\n        user: PropTypes.object,\n        changeScale: PropTypes.func,\n        setLoadPreference: PropTypes.func,\n        setScalePreference: PropTypes.func,\n        setSortPreference: PropTypes.func,\n    }\n\n    componentDidMount() {\n        switch (this.props.sort) {\n            case 'AZ':\n                this.setState({ \n                    sortChecked: {AZ: true, ZA: false, LS: false, SL: false},\n                    initialSortChecked: {AZ: true, ZA: false, LS: false, SL: false},\n                });\n                break\n            case 'ZA':\n                this.setState({ \n                    sortChecked: {AZ: false, ZA: true, LS: false, SL: false},\n                    initialSortChecked: {AZ: false, ZA: true, LS: false, SL: false},\n                });\n                break\n            case 'LS':\n                this.setState({ \n                    sortChecked: {AZ: false, ZA: false, LS: true, SL: false},\n                    initialSortChecked: {AZ: false, ZA: false, LS: true, SL: false},\n                });\n                break\n            case 'SL':\n                this.setState({ \n                    sortChecked: {AZ: false, ZA: false, LS: false, SL: true},\n                    initialSortChecked: {AZ: false, ZA: false, LS: false, SL: true}, \n                });\n        }\n        this.setState({\n            recentChecked: this.props.load==='recent',\n            initialRecentChecked: this.props.load==='recent',\n            scaleEntry: this.props.scale,\n            initialScaleEntry: this.props.scale,\n        });\n    }\n    \n    close() {\n        document.getElementById(\"overlay\").style.display = \"none\";\n        document.getElementById('preferences').classList.toggle('show-pref');\n        this.props.history.go(0);\n    }\n\n    onScaleChange(e) {\n        this.setState({ scaleEntry: e.target.value });\n        this.props.changeScale(e.target.value);\n        this.props.setScalePreference(e.target.value, this.props.user.username);\n    }\n\n    onSortChange(e) {\n        switch (e.target.value){\n            case 'AZ':\n                this.setState({ sortChecked: {AZ: true, ZA: false, LS: false, SL: false} });\n                this.props.setSortPreference({AZ: true, ZA: false, LS: false, SL: false}, this.props.user.username);\n                break\n            case 'ZA':\n                this.setState({ sortChecked: {AZ: false, ZA: true, LS: false, SL: false} });\n                this.props.setSortPreference({AZ: false, ZA: true, LS: false, SL: false}, this.props.user.username);\n                break\n            case 'LS':\n                this.setState({ sortChecked: {AZ: false, ZA: false, LS: true, SL: false} });\n                this.props.setSortPreference({AZ: false, ZA: false, LS: true, SL: false}, this.props.user.username);\n                break\n            case 'SL':\n                this.setState({ sortChecked: {AZ: false, ZA: false, LS: false, SL: true} });\n                this.props.setSortPreference({AZ: false, ZA: false, LS: false, SL: true}, this.props.user.username);\n        }\n    } \n    \n    onLoadChange(e) {\n        switch (e.target.value){\n            case 'recent':\n                this.setState({ recentChecked: true });\n                break\n            case 'edited':\n                this.setState({ recentChecked: false })\n        }\n        this.props.setLoadPreference(e.target.value, this.props.user.username);\n    }\n    \n    render() {\n\n        return(\n            <div className=\"preferences-window\" id=\"preferences\">\n                <div className=\"window-close\" onClick={() => this.close()}></div>\n                <h1 className=\"preferences-heading\">Preferences</h1>\n                <div className=\"preferences-container\">\n                    <div className=\"left-pref-col\">\n                        <div className=\"pref-category\">\n                            <p className=\"pref-subheading\">On Website Load</p>\n                            <div className=\"pref-form\">\n                                <div style={{'display':'flex'}}>\n                                    <input \n                                        type=\"radio\" \n                                        name=\"load\" \n                                        id=\"recent\" \n                                        className=\"pref-radio\" \n                                        value=\"recent\"\n                                        checked={this.state.recentChecked}\n                                        onChange={this.onLoadChange}\n                                    />\n                                    <label className=\"pref-radio-label\" for=\"recent\">Load most recent file</label>\n                                </div>\n                                <div style={{'display':'flex'}}>\n                                    <input \n                                        type=\"radio\" \n                                        name=\"load\" \n                                        id=\"edited\" \n                                        className=\"pref-radio\" \n                                        value=\"edited\"\n                                        checked={!this.state.recentChecked}\n                                        onChange={this.onLoadChange}\n                                    />\n                                    <label className=\"pref-radio-label\" for=\"edited\">Load last edited file</label>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"pref-category\" style={{'margin':'2vw 0 0 0'}}>\n                            <p className=\"pref-subheading\">Image Scale</p>\n                            <div className=\"pref-form\">\n                                <input \n                                    type=\"number\" \n                                    name=\"scale\" \n                                    id=\"scale\" \n                                    value={this.state.scaleEntry}\n                                    className=\"target-jump-container scale\"\n                                    step='0.01'\n                                    onChange={this.onScaleChange}\n                                />\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"right-pref-col\">\n                        <div className=\"pref-category\">\n                            <p className=\"pref-subheading\">On Website Load</p>\n                            <div className=\"pref-form\">\n                                <input \n                                    type=\"radio\" \n                                    name=\"sort\" \n                                    id=\"AZ\" \n                                    className=\"pref-radio\" \n                                    value=\"AZ\"\n                                    checked={this.state.sortChecked.AZ}\n                                    onChange={this.onSortChange}\n                                />\n                                <label className=\"pref-radio-label\" for=\"recent\">By class, from A to Z</label><br></br>\n                                <input \n                                    type=\"radio\" \n                                    name=\"sort\" \n                                    id=\"ZA\" \n                                    className=\"pref-radio\" \n                                    value=\"ZA\"\n                                    checked={this.state.sortChecked.ZA}\n                                    onChange={this.onSortChange} \n                                />\n                                <label className=\"pref-radio-label\" for=\"edited\">By class, from Z to A</label><br></br>\n                                <input \n                                    type=\"radio\" \n                                    name=\"sort\" \n                                    id=\"LS\" \n                                    className=\"pref-radio\" \n                                    value=\"LS\"\n                                    checked={this.state.sortChecked.LS}\n                                    onChange={this.onSortChange}\n                                />\n                                <label className=\"pref-radio-label\" for=\"edited\">By size, from largest to smallest</label><br></br>\n                                <input \n                                    type=\"radio\" \n                                    name=\"sort\" \n                                    id=\"SL\" \n                                    className=\"pref-radio\" \n                                    value=\"SL\"\n                                    checked={this.state.sortChecked.SL}\n                                    onChange={this.onSortChange}\n                                />\n                                <label className=\"pref-radio-label\" for=\"edited\">By size, from smallest to largest</label><br></br>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    user: state.auth.user,\n});\n\nexport default connect(mapStateToProps, {changeScale, setLoadPreference, setScalePreference, setSortPreference})(Preferences)","import axios from \"axios\";\nimport { tokenConfig } from './auth';\nimport { \n    SAVE_PROGRESS,\n    SAVE_SUCCESS,\n    SYNC_PROGRESS,\n    SYNC_SUCCESS,\n    NOTES_CHANGED,\n    NOTES_RECORDED,\n    REPLY_OPEN,\n    REPLY_RESOLVED,\n    NOTEBOOK_FILTERED,\n    TARGETS_BASIC_SEARCHED,\n    BINS_BASIC_SEARCHED\n} from \"./types\";\n\n\nexport const sendNotesChange = () => (dispatch, getState) => {\n    dispatch({\n        type: NOTES_CHANGED\n    });\n}\n\nexport const receiveNotesChange = () => (dispatch, getState) => {\n    dispatch({\n        type: NOTES_RECORDED\n    });\n}\n\nexport const sendReplyOpen = () => (dispatch, getState) => {\n    dispatch({\n        type: REPLY_OPEN\n    });\n}\n\nexport const receiveReplyOpen = () => (dispatch, getState) => {\n    dispatch({\n        type: REPLY_RESOLVED\n    });\n}\n\nexport const addBinNote = (author, entry, parent, replies, timeseries, ifcb, file, image) => (dispatch, getState) => {\n    const note = JSON.stringify({ author, entry, parent, replies, timeseries, ifcb, file, image});\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n    axios\n        .post('/add/note/', note, config, tokenConfig(getState))\n        .catch((err) => console.log(err));\n}\n\nexport const deleteBinNote = (id) => (dispatch, getState) => {\n    axios\n        .delete('/delete/note/' + id + '/', tokenConfig(getState))\n        .catch((err) => console.log(err));\n}\n\nexport const flagBinNote = (id) => (dispatch, getState) => {\n    axios\n        .put('/flag/note/' + id + '/', tokenConfig(getState))\n        .catch((err) => console.log(err));\n}\n\nexport const filterNotebook = (appliedFilters, search) => (dispatch, getState) => {\n    const filters = JSON.stringify(appliedFilters, search)\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n    axios\n        .post('/notebook/applyfilters/', filters, config, tokenConfig(getState))\n        .then(res => {\n            dispatch({\n                type: NOTEBOOK_FILTERED,\n                payload: res.data\n            });\n        })\n        .catch((err) => console.log(err));\n}\n\nexport const searchTargets = (search) => (dispatch, getState) => {\n    const searchTerms = JSON.stringify(search)\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n    axios\n        .post('/searchtargets/', searchTerms, config, tokenConfig(getState))\n        .then(res => {\n            dispatch({\n                type: TARGETS_BASIC_SEARCHED,\n                payload: (typeof res.data.length !== \"undefined\") ? (res.data) : (res.data)\n            });\n        })\n        .catch((err) => console.log(err));\n}\n\nexport const getBins = (bins) => (dispatch, getState) => {\n    const binIDs = JSON.stringify(bins);\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n    axios\n        .post('/bins/', binIDs, config, tokenConfig(getState))\n        .then(res => {\n            dispatch({\n                type: BINS_BASIC_SEARCHED,\n                payload: res.data\n            });\n        })\n        .catch((err) => console.log(err));\n}\n\nexport const classifyTarget = (target, timeseries, file, number) => (dispatch, getState) => {\n    axios\n        .put('/edit/target/' + timeseries + '/' + file + \n            '/' + number + '/', target, tokenConfig(getState))\n        .catch((err) => console.log(err));\n}\n\nexport const classifyRow = (targets, timeseries, file, sort, startInd, endInd) => (dispatch, getState) => {\n    axios\n        .put('/edit/targetrow/' + timeseries + '/' + file + \n            '/' + sort + '/' + startInd + '/' + endInd + '/', \n            targets, tokenConfig(getState))\n        .catch((err) => console.log(err));\n}\n\nexport const classifyAll = (timeseries, file, set, sort, className, classAbbr) => (dispatch, getState) => {\n    axios\n        .put('/edit/all/' + timeseries + '/' + file + \n            '/' + set + '/' + sort + '/' + className + \n            '/' + classAbbr + '/', tokenConfig(getState))\n        .catch((err) => console.log(err));\n}\n\nexport const save = (targets, timeseries, file, sort) => (dispatch, getState) => {\n    dispatch({\n        type: SAVE_PROGRESS,\n    });\n    axios\n        .put('/save/' + timeseries + '/' + file + \n            '/' + sort + '/', targets, \n            tokenConfig(getState))\n        .then(res => {\n            dispatch({\n                type: SAVE_SUCCESS,\n            });\n        })\n        .catch((err) => console.log(err));\n    return \n}\n\nexport const sync = (timeseries, year, day, file) => (dispatch, getState) => {\n    dispatch({\n        type: SYNC_PROGRESS,\n    });\n    axios\n        .get('sync/' + timeseries + '/' + year + '/' + day + '/' + file + '/')\n        .then(res => {\n            dispatch({\n                type: SYNC_SUCCESS,\n            });\n        })\n        .catch((err) => console.log(err));\n    return \n}","import React from \"react\";\nimport { connect } from 'react-redux';\nimport { PropTypes } from \"prop-types\";\n\nimport { addBinNote, deleteBinNote, flagBinNote, sendNotesChange, sendReplyOpen } from \"../../actions/classify\";\n\nclass Note extends React.Component {\n    state = {\n        entry: '',\n    }\n\n    static propTypes = {\n        addBinNote: PropTypes.func,\n        deleteBinNote: PropTypes.func,\n        sendNotesChange: PropTypes.func,\n        sendReplyOpenChange: PropTypes.func,\n        notes: PropTypes.array,\n    };\n    \n    reply(id) {\n        document.getElementById('reply-form' + id).classList.toggle('show');\n        this.props.sendReplyOpen();\n    }\n\n    delete(id) {\n        this.props.deleteBinNote(id);\n        this.props.sendNotesChange();\n    }\n\n    flag(id) {\n        this.props.flagBinNote(id);\n        this.props.sendNotesChange();\n    }\n\n    getFlagButton(isFlagged) {\n        if (isFlagged) {\n            return 'Unflag'\n        } else {\n            return 'Flag'\n        }\n    }\n\n    onChange = e => this.setState({ entry: e.target.value })\n\n    onSubmit = e => {\n        e.preventDefault();\n        this.props.addBinNote(this.props.user, this.state.entry, this.props.note.id, [], this.props.timeseries, this.props.ifcb, this.props.file, this.props.image);\n        this.props.sendNotesChange();\n        const replyForm = document.getElementById(\"note-form\");\n        replyForm.reset()\n        document.getElementById('reply-form' + this.props.note.id).classList.toggle('show');\n    }\n    \n    render() {\n        const { id, author, date, entry, parent, replies, timeseries, file, image, flag } = this.props.note;\n        return (\n            <div className={this.props.type + \"-note\"} id={id}>\n                <div className={this.props.type + \"-note-header\"}>\n                    <p className=\"note-author\">{author}</p>\n                    <p className=\"note-date\">{date.slice(0,10)}</p>\n                    {(flag) ? <div className=\"flag-small\"></div> : <div></div>}\n                </div>\n                <p className={this.props.type + \"-note-entry\"}>{entry}</p>\n                {(this.props.type === 'bin') ? \n                    <button className=\"reply-button\" onClick={() => this.reply(id)}>Reply</button> :\n                    <div></div>}\n                {(author === this.props.user) ? \n                    <button className=\"reply-button\" onClick={() => this.delete(id)}>Delete</button> :\n                    <div></div>}\n                {(author === this.props.user) ? \n                    <button className=\"reply-button\" onClick={() => this.flag(id)}>{this.getFlagButton(flag)}</button> :\n                    <div></div>}\n                <div className=\"reply-form\" id={\"reply-form\" + id}>\n                        <form onSubmit={this.onSubmit} id=\"note-form\">\n                            <div className=\"new-note\">\n                            <input\n                                type=\"textarea\"\n                                rows=\"10\"\n                                className=\"note-input\"\n                                name=\"note-entry\"\n                                id=\"note-entry\"\n                                onChange={this.onChange}\n                                value={this.entry}\n                            />\n                            <button type=\"submit\" className={this.props.type + \"-note-submit\"}></button>\n                            </div>\n                        </form>\n                    </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    notes: state.classify.notes,\n });\n\nexport default connect(mapStateToProps, {addBinNote, deleteBinNote, flagBinNote, sendNotesChange, sendReplyOpen})(Note);","import React from \"react\";\nimport axios from \"axios\";\nimport { connect } from 'react-redux';\nimport { PropTypes } from \"prop-types\";\n\nimport { addBinNote, sendNotesChange, receiveNotesChange, receiveReplyOpen } from \"../../actions/classify\";\nimport Note from \"../features/Note\";\n\nexport class BinNote extends React.Component {\n    state = {\n        entry: '',\n        parents: [],\n        notes: [],\n    }\n    \n    static propTypes = {\n        addBinNote: PropTypes.func,\n        receiveNotesChange: PropTypes.func,\n        noteChangeFlag: PropTypes.bool,\n        receiveReplyOpen: PropTypes.func,\n        replyChangeFlag: PropTypes.bool,\n        user: PropTypes.object,\n    };\n\n    getNotes() {\n        axios\n            .get('/process/note/' + this.props.timeseries + '/' + this.props.file + '/' + this.props.image + '/')\n            .then((res) => {\n                this.setState({ notes: res.data });\n            })\n            .catch((err) => console.log(err));\n    }\n\n    renderNote(note, count) {\n        if (note.parent !== null) {\n            var reply = note;\n            var iters = 0;\n            while (reply.parent !== null) {\n                var parentFunc = (element) => element.id === reply.parent;\n                var reply = this.state.notes[this.state.notes.findIndex(parentFunc)];\n                iters = iters + 1;\n            }\n            if (count!==iters) {\n                return;\n            }\n        }\n        return(\n            <div>\n                <Note\n                    note={note}\n                    user={this.props.user.username}\n                    timeseries={this.props.timeseries}\n                    ifcb={this.props.ifcb}\n                    file={this.props.file}\n                    type={this.props.type}\n                    image={this.props.image}\n                />\n                <div className=\"reply\" style={{margin: \"0 0 0 \" + String((count+1)) + \"vw\"}}>\n                {(note.replies.length !== 0) ?\n                    note.replies.map((reply) => this.renderNote(reply, count+1)) :\n                    <div></div>\n                }\n                </div>\n            </div>\n        \n        );\n    }\n\n    componentDidMount() {\n        this.getNotes();\n    }\n\n    componentDidUpdate() {\n        if(this.props.noteChangeFlag) {\n            this.props.receiveNotesChange();\n            this.getNotes();\n        }\n        if(this.props.replyChangeFlag) {\n            this.props.receiveReplyOpen();\n            this.getNotes();\n        }\n    }\n\n    onChange = e => this.setState({ entry: e.target.value })\n\n    onSubmit = e => {\n        e.preventDefault();\n        this.props.addBinNote(this.props.user.username, this.state.entry, null, [], this.props.timeseries, this.props.ifcb, this.props.file, this.props.image);\n        this.props.sendNotesChange();\n        this.getNotes();\n        const noteForm = document.getElementById(\"note-form\");\n        noteForm.reset()\n    }\n    \n    render() {\n        return(\n            <div className={this.props.type + \"-notes-content\"}>\n                {(this.props.type === 'bin') ? <div className=\"refresh\" onClick={() => this.getNotes()}></div> : <div></div>}\n                <div id=\"note-container\">\n                    {this.state.notes.map((note) => this.renderNote(note, 0))}\n                </div>\n                    <div className={this.props.type + \"-note-form\"}>\n                        <form onSubmit={this.onSubmit} id=\"note-form\">\n                            <div className={this.props.type + \"-new-note\"}>\n                            <input\n                                type=\"textarea\"\n                                rows=\"10\"\n                                className={this.props.type + \"-note-input\"}\n                                name={this.props.type + \"-note-entry\"}\n                                id=\"note-entry\"\n                                onChange={this.onChange}\n                                value={this.entry}\n                            />\n                            <button type=\"submit\" className={this.props.type + \"-note-submit\"}></button>\n                            </div>\n                            {(this.state.notes === []) ? <p className=\"bin-note-label\">Add a Note</p> : <div></div>}\n                        </form>\n                    </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    noteChangeFlag: state.classify.noteChangeFlag,\n    replyChangeFlag: state.classify.replyChangeFlag,\n    user: state.auth.user\n });\n\nexport default connect(mapStateToProps, {addBinNote, sendNotesChange, receiveNotesChange, receiveReplyOpen})(BinNote);","import React from \"react\";\nimport BinNote from './BinNote';\n\nimport '../../css/classify-styles.css';\n\nclass PlanktonImage extends React.Component {\n\n    render() {\n    const url = this.props.nameSpace + this.props.timestamp + '_' + this.props.ifcb + '_' + this.props.targetNum + '.jpg';\n        return(\n            <img src={url} className=\"image\" \n            alt={this.props.classification} \n            id={this.props.targetNum + '-image'}\n            style={{height: String(Number(this.props.height)*this.props.scale)+'vw'}}></img>\n        );\n    }\n  }\n\nclass Plankton extends React.Component {\n  \n    renderImage() {  \n      return (\n          <PlanktonImage \n              nameSpace={'http://128.114.25.154:8888/' + this.props.timeseries + '/'}\n              timestamp={this.props.timestamp}\n              timeseries={this.props.timeseries}\n              ifcb={this.props.ifcb}\n              targetNum={this.props.targetNum}\n              classification={this.props.class_name}\n              height={this.props.height}\n              scale={this.props.scale}\n          />\n        );\n    }\n  \n    getHeight() {\n      if (this.props.height < 0) {\n        return '5'\n      } else {\n          return String((Number(this.props.height) * this.props.scale) + 2.25)\n      }\n    }\n  \n    getWidth() {\n      if (this.props.width < 0) {\n        return '5'\n      } else {\n          return String(Number(this.props.width)*this.props.scale)\n      }\n    }\n  \n    handleInfoClick() {\n      this.props.infoChange(this.props.targetNum, false, true);\n      document.getElementById(this.props.targetNum + '-info').classList.toggle('show-info');\n      document.getElementById(this.props.targetNum + '-image').classList.toggle('hide');\n      document.getElementById(this.props.targetNum).classList.toggle('hide');\n    }\n  \n    render() {\n      const infoStyle = {\n          height: this.getHeight() + 'vw',\n          width: this.getWidth() + 'vw'\n      };\n      \n      return(\n            <div>\n              <div className=\"plankton-button\" id=\"plankton-button\" onClick={() => this.props.onClick(this.props.targetNum)}>\n                  <div className=\"plankton\">\n                      {this.renderImage()}\n                      <div className=\"info\" onMouseEnter={() => this.props.infoChange(this.props.targetNum, false, false)} \n                          onMouseLeave={() => this.props.infoChange(this.props.targetNum, true, false)}\n                          onClick={() => this.handleInfoClick()}></div>\n                      <div className=\"info-div\" id={this.props.targetNum + '-info'} style={infoStyle}>\n                          <p className=\"classification-info\">{this.props.class_name}</p>\n                          <p className=\"target-num-info\">{'Target ' + this.props.targetNum}</p>\n                          <p className=\"editor-info\">{'Classified by ' + this.props.editor + ',\\n' + this.props.date}</p>\n                          {(this.props.infoShowing.includes(this.props.targetNum)) ? \n                          <BinNote\n                              timeseries={this.props.timeseries}\n                              ifcb={this.props.ifcb}\n                              file={this.props.file}\n                              type='target'\n                              image={this.props.targetNum}\n                          /> :\n                          <div></div>\n                          }\n                      </div>\n                      <div className='id' id={this.props.targetNum}>\n                          <p className='id-text' id={this.props.targetNum + '-text'}>{this.props.class_abbr}</p>\n                      </div>\n                  </div>\n              </div>\n            </div>\n        );\n    }\n  }\n\nexport default (Plankton);","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAVCAYAAABc6S4mAAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAGKADAAQAAAABAAAAFQAAAAA5bZMmAAACKUlEQVQ4EZVV0VEbQQzV7sEP4Bk64PzpeMyQCkIqgFQQdxCoIEcFdgcMFUAHwR1kbA5/2u4gGUx+8N1Gb+O70e7pnGFnYLVP0tNqJZ3NYrE4fl2v7w3ROTm3pCT50u/3f9I7V57nZ64sR+BxRI/G2mvw2D/r9YMnB6ExqSuKHwj6Tn6isqx5PF9R3IPD8t8nSWaMOX59eRlL7H9yPptlbHMS2PFlcVEEmAQKPnCQr/P5PI1x7QwS59w3Rbfqdru/LEfIFCUVm82thscYP3GGrGOc65kB4+ci4hQfeQueCjgH/9wbDKBTF7IsN5uFolz1B4MUOJ6I7N7eEHu8SqJRjMlz+fam1opJh5WdD9Dr9Zb8jncVKPazfDqtjQVO89nsnIt1IbGtPJFZ+wBQHHY6V/xuvxWH7wpGnF2m4WTtlcTrAKg436iZMrfbtg1rv+fp9JIPjZrhFeIhrQPA++DoaKxlgTaUw+e0i7B/sr+fgUeuIIDPgihIEcZoQ7Qj5OenJ+hPIEfrBrWMsH9tGoP8JDBsklj7EZ+SRt9z7Q46nXR7wYAuyKDSMDisZLmr5GzAH7ZMI4evHzRJUsltw1fpxV4PlcBqUc3Aa6N2qz0iwTjXqJk0aQ2AdmsZPuk/+XB6+iCBWG4NAEPfdvrweR52zryw49/OAL7tWnoe2clPQluMnQHg5IePaBUQcFbaUAU220NrF0ljTDF+5bj/U7750iTJOP4kSHsp/wWEFsqR3igYKgAAAABJRU5ErkJggg==\"","import React from \"react\";\nimport '../../../css/classify-styles.css';\nimport dropdown from \"../../../icons/dropdown.png\";\n\nclass TimeSeriesControl extends React.Component {\n    handleDropdown() {\n        document.getElementById('timeseries_dropdown').classList.toggle('show');\n        document.getElementById('timeseries_label').classList.toggle('hide');\n        document.getElementById('timeseries_bar').classList.toggle('accommodate-dropdown');\n    }\n    \n    render() {\n        const options = this.props.options.map((x) => \n        <li key={x} onClick={() => this.props.onClick(x)}><button id={x}>{x}</button></li>)\n        return (\n            <div>\n                <div className=\"time time-series\" id='timeseries_bar'>\n                    <p className=\"time-selection\">{this.props.timeseries}</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select time series'} onClick={() => this.handleDropdown()}></img>\n                </div>\n                <div className=\"time-dropdown time-series\" id='timeseries_dropdown'>\n                    <ul className=\"timeseries-option\">{options}</ul>\n                </div>\n                <p className=\"time-label\" id='timeseries_label'>Time Series</p>\n            </div>\n        );\n    }\n}\n\nexport default (TimeSeriesControl);","import React from \"react\";\nimport '../../../css/classify-styles.css';\nimport dropdown from \"../../../icons/dropdown.png\";\n\nclass YearControl extends React.Component {\n    handleDropdown() {\n        document.getElementById('year_dropdown').classList.toggle('show');\n        document.getElementById('year_label').classList.toggle('hide');\n        document.getElementById('year_bar').classList.toggle('accommodate-dropdown');\n    }\n    \n    render() {\n        const options = this.props.options.map((x) => \n        <li key={x} onClick={() => this.props.onClick(x)}><button id={x}>{x}</button></li>)\n        return(\n            <div>\n                <div className=\"time\" id='year_bar'>\n                    <p className=\"time-selection\">{this.props.year}</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select Year'} onClick={() => this.handleDropdown()}></img>\n                </div>\n                <div className=\"time-dropdown\" id='year_dropdown'>\n                    <ul className=\"year-option\">{options}</ul>\n                </div>\n                <p className=\"time-label\" id='year_label'>Year</p>\n            </div>\n        );\n    }\n}\n\nexport default (YearControl);","import React from \"react\";\nimport '../../../css/classify-styles.css';\nimport dropdown from \"../../../icons/dropdown.png\";\n\nclass DayControl extends React.Component {\n    handleDropdown() {\n        document.getElementById('day_dropdown').classList.toggle('show');\n        document.getElementById('day_label').classList.toggle('hide');\n        document.getElementById('day_bar').classList.toggle('accommodate-dropdown');\n    }\n    \n    render() {\n        const options = this.props.options.map((x) => \n        <li key={x} onClick={() => this.props.onClick(x)}><button id={x}>{x}</button></li>)\n        return(\n            <div>\n                <div className=\"time\" id='day_bar'>\n                    <p className=\"time-selection\" id=\"day_text\">{this.props.day}</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select Day'} onClick={() => this.handleDropdown()}></img>\n                </div>\n                <div className=\"time-dropdown\" id='day_dropdown'>\n                    <ul className=\"year-option\">{options}</ul>\n                </div>\n                <p className=\"time-label\" id='day_label'>Day</p>\n            </div>\n        );\n    }\n}\n\nexport default (DayControl);","import React from \"react\";\nimport '../../../css/classify-styles.css';\n\nclass Bar extends React.Component {\n    handleHover(num) {\n        this.props.onHover(num);\n    }\n    render() {\n        return(\n            <div className=\"bar-container\">\n                <div className=\"day\" id={'day' + this.props.number}>{this.props.day}</div>\n                <div className=\"bar\" id={'bar' + this.props.number} \n                    onClick={() => this.props.onClick(this.props.number)}\n                    onMouseEnter={() => this.handleHover(this.props.number)}\n                    onMouseLeave={() => this.handleHover(this.props.current)}\n                    style={{height: String(this.props.height*8) + 'vw'}}></div>\n            </div>\n        );}\n  }\n\n  export default (Bar);","import React from \"react\";\nimport '../../../css/classify-styles.css';\nimport dropdown from \"../../../icons/dropdown.png\";\n\nclass FileControl extends React.Component {\n    handleDropdown() {\n        document.getElementById('file_dropdown').classList.toggle('show');\n        document.getElementById('file_label').classList.toggle('hide');\n        document.getElementById('file_bar').classList.toggle('accommodate-dropdown');\n    }\n    \n    render() {\n        const options = this.props.options.map((x) => \n        <li key={x} onClick={() => this.props.onClick(x)}><button id={x}>{x}</button></li>)\n        var fileName = this.props.file;\n        const file = fileName.slice(9,12) + ':' + fileName.slice(12,14) + ':' + fileName.slice(14,16) + 'Z';\n        return(\n            <div>\n                <div className=\"time\" id='file_bar'>\n                    <p className=\"time-selection\">{file}</p>\n                    <img src={dropdown} className=\"time-icon\" \n                    alt={'Select File'} onClick={() => this.handleDropdown()}></img>\n                </div>\n                <div className=\"time-dropdown\" id='file_dropdown'>\n                    <ul className=\"file-option\">{options}</ul>\n                </div>\n                <p className=\"time-label\" id='file_label'>File</p>\n            </div>\n        );\n    }\n}\n\nexport default (FileControl);","import React from \"react\";\nimport '../../../css/classify-styles.css';\n\nclass Order extends React.Component {  \n    render() {\n        return(\n            <div>\n                <div className=\"set\" id={this.props.barID} onClick={() => this.props.onClick(this.props.order)}>\n                    <p className=\"time-selection\">{this.props.order}</p>\n                </div>\n                <p className=\"time-label\" id={this.props.labelID}>{this.props.type}</p>\n            </div>\n        );\n    }\n}\n\nexport default (Order);","export default __webpack_public_path__ + \"static/media/loader.a069fadb.GIF\";","import React from \"react\";\nimport axios from \"axios\";\nimport Header from '../layout/Header';\nimport Preferences from './Preferences';\nimport BinNote from './BinNote';\nimport Plankton from './Plankton';\nimport TimeSeriesControl from './time/TimeSeriesControl';\nimport YearControl from './time/YearControl';\nimport DayControl from './time/DayControl';\nimport Bar from './time/Bar';\nimport FileControl from './time/FileControl';\nimport Order from './time/Order';\n\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\nimport { List, WindowScroller, CellMeasurer, CellMeasurerCache } from 'react-virtualized';\nimport { classifyTarget, classifyRow, classifyAll, save, sync } from \"../../actions/classify\";\nimport { changeScale } from \"../../actions/preferences\";\n\nimport '../../css/classify-styles.css';\nimport loader from \"./loader.GIF\";\nimport toTop from \"../../icons/to-top.png\";\n\nclass Micrometer extends React.Component {\n    render() {\n        return(\n            <div className=\"drag-box\">\n                <div className=\"micrometer-block\"\n                style={{width: (String(34*this.props.scale) + 'vw')}}></div>\n                <p className=\"micrometer-text\">10µm</p>\n            </div>\n        );\n    }\n}\n\nclass ClassMenu extends React.Component {\n  render() {\n      const options = this.props.classes.map((x) => \n      <li key={x}><button id={x} onClick={() => this.props.onClick(x)}>{x}</button></li>);\n      return(\n      <div className=\"sidebar\">\n      <div className=\"class-menu\">\n          <div className=\"control-box\">\n            <div className=\"annotation-control\" onClick={() =>  this.props.handleSelectAllClick()}>\n                <p className=\"control-text\">Select All</p>\n            </div>\n            <div className=\"annotation-control\" onClick={() =>  this.props.handleUndoClick()}>\n                <p className=\"control-text\">Undo</p>\n            </div>\n          </div>\n          <ul className=\"class-menu-options\">{options}</ul>\n      </div>\n      <Micrometer scale={this.props.scale}/>\n      </div>\n      );\n  }\n}\n\nclass NavButton extends React.Component {\n    render() {\n        return(\n            <div className={this.props.className} onClick={() => this.props.onClick()}>\n                <p>{this.props.text}</p>\n            </div>\n        )\n    }\n}\n\nclass Annotations extends React.Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n          loading: true,\n          newFile: '',\n          newTimeSeries: '',\n          classes: [],\n          classAbbrs: [],\n          classPicker: 'Unclassified',\n          classMark: 'UNC',\n          planktonClickEnabled: true,\n          infoShowing: [],\n          bin: {timeseries:'', ifcb:'', year:'', day:'', file:''},\n          timeSeriesOptions: [],\n          yearOptions: [],\n          dayOptions: [],\n          barHeights: [],\n          fileOptions: [],\n          setOptions: [],\n          filledDays: [],\n          targets: [],\n          history: [],\n          rows: [],\n          scrollToIndex: undefined,\n          jumpEntry: '',\n          targetJumpEntry: '',\n          initialTargetJump: '',\n          lastEditBin: '',\n          lastEditTarget: '',\n          scale: 0.056,\n          lastScroll: 0,\n          dayOption: '',\n          previous: 'Previous',\n          next: 'Next',\n      }\n      this.onTargetJumpChange = this.onTargetJumpChange.bind(this);\n  }\n\n  static propTypes = {\n    preferences: PropTypes.object.isRequired,\n    location: PropTypes.object.isRequired,\n    history: PropTypes.object.isRequired,\n    changeScale: PropTypes.func,\n    classifyTarget: PropTypes.func.isRequired,\n    classifyRow: PropTypes.func.isRequired,\n    classifyAll: PropTypes.func.isRequired,\n    save: PropTypes.func.isRequired,\n    isSaving: PropTypes.bool,\n    sync: PropTypes.func.isRequired,\n    isSyncing: PropTypes.bool,\n    user: PropTypes.object,\n    scaleEntry: PropTypes.number,\n    onNotebook: PropTypes.bool,\n    onAnalysis: PropTypes.bool,\n  };\n\n  closeDropdown(element) {\n    if (document.getElementById(element + '_dropdown').classList.contains('show')) {\n        document.getElementById(element + '_dropdown').classList.toggle('show');\n        document.getElementById(element + '_label').classList.toggle('hide');\n        document.getElementById(element + '_bar').classList.toggle('accommodate-dropdown');\n    }\n  }\n\n  getNewTimeSeries(option) {\n    this.closeDropdown('timeseries');\n    this.setState({ loading: true });\n    axios\n        .get('/process/timeseries/' + option + '/')\n        .then((res) => { this.setState({ \n            newTimeSeries: option,\n            newFile: res.data.bin.file\n        }) })\n        .catch((err) => console.log(err));\n  }\n\n  componentDidMount() {\n    this.setState({ loading: false });\n    const urlInfo = this.props.location.pathname.split('/');\n    if(urlInfo.length<3) {\n        if(this.props.preferences.load==='edited') {\n            this.jumpToLastEdit();\n        } else {\n            this.getNewTimeSeries('IFCB104');\n        }\n    } else {\n        const timeseries = urlInfo[2];\n        const file = urlInfo[3];\n\n        axios\n            .get('/api/timeseries/')\n            .then((res) => {this.setState({ timeSeriesOptions: res.data.map((c) => (c.name)) })})\n            .catch((err) => console.log(err));\n\n            this.setState({\n                loading: true,\n            });\n            axios\n                .get('/classes/IFCB104/')\n                .then((res) => {\n                this.setState({ \n                    classes: res.data.map((c) => (c.display_name.replace('_', ' '))),\n                    classAbbrs: res.data.map((c) => (c.abbr))\n                });\n                })\n                .catch((err) => console.log(err));\n\n        axios\n            .get('/process/file/' + timeseries + '/' + file + '/' + this.props.preferences.sort + \n                '/' + Math.round(this.props.preferences.scale * 1000) + '/')\n            .then((res) => {\n                this.setState({ \n                    bin: res.data.bin, \n                    yearOptions: res.data.options.year_options.reverse(),\n                    barHeights: res.data.options.day_options[0],\n                    dayOptions: res.data.options.day_options[1],\n                    fileOptions: res.data.options.file_options,\n                    setOptions: res.data.options.set_options,\n                    rows: res.data.options.rows,\n                    filledDays: res.data.options.filled_days,\n                    dayOption: res.data.bin.day,\n                })\n                axios\n                    .get('/process/targets/' + timeseries + '/' + file + '/' + this.props.preferences.sort + '/')\n                    .then((targetResponse) => {\n                        this.setState({ \n                            targets: targetResponse.data,\n                            history: [JSON.stringify(targetResponse.data)],\n                            loading: false,\n                        });\n                });\n            })\n            .catch((err) => {\n                console.log(err);\n                this.setState({ bin: {timeseries:'', ifcb:'', year:'', day:'', file:'Not Found'} });\n                return;\n            });\n        }\n    \n    if (this.props.scaleEntry !== this.props.preferences.scale) {\n        this.props.changeScale(this.props.preferences.scale);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.match.url !== prevProps.match.url) {\n        this.props.history.go(0);\n    }\n  }\n\n  getNewYear(option) {\n    this.closeDropdown('year');\n    this.setState({ loading: true });\n    axios\n        .get('/process/year/' + this.state.bin.timeseries + '/' + option + '/')\n        .then((res) => { this.setState({ \n            newTimeSeries: this.state.bin.timeseries,\n            newFile: res.data.bin.file\n        }) })\n        .catch((err) => console.log(err));\n  }\n\n  handleBarHover(option) {\n      this.setState({ dayOption: this.state.dayOptions[option] });\n  }\n\n  handleBar(option) {\n    const histogram = document.getElementById('histogram_dropdown').classList;\n    if (histogram.contains('show-day')) {\n        histogram.toggle('show-day');\n    }\n\n    this.closeDropdown('day');\n    this.setState({ loading: true });\n    axios\n        .get('/process/day/' + this.state.bin.timeseries + '/' + this.state.bin.year + '/'  + option + '/')\n        .then((res) => { this.setState({ \n            newTimeSeries: this.state.bin.timeseries,\n            newFile: res.data.bin.file\n        }) })\n        .catch((err) => console.log(err));\n  }\n\n  handleNewDay(option) {\n    document.body.scrollTop = 0; // For Safari\n    document.documentElement.scrollTop = 0;\n    const newDay = (element) => element === option;\n    const dayNumber = this.state.dayOptions.findIndex(newDay);\n    this.handleBar(dayNumber);\n  }\n\n  handleNewFile(option) {\n\n    document.body.scrollTop = 0; // For Safari\n    document.documentElement.scrollTop = 0;\n    this.closeDropdown('file');\n    \n    const file = 'D' + this.state.bin.year + this.state.bin.day.slice(0,2) + this.state.bin.day.slice(3,5) + \n    option.slice(0,3) + option.slice(4,6) + option.slice(7,9);\n    \n    this.setState({ \n        newTimeSeries: this.state.bin.timeseries,\n        newFile: file\n    })\n  }\n\n  handleMouseOver(element) {\n    element.style.backgroundColor = '#16609F';\n  }\n\n  handleMouseOut(element) {\n    element.style.backgroundColor = '#079CCC';\n  }\n\n  handleMenuClick(name) {\n      const prevMenu = document.getElementById(this.state.classPicker);\n      prevMenu.style.backgroundColor = '#079CCC';\n      prevMenu.addEventListener('mouseover', this.handleMouseOver(prevMenu));\n      prevMenu.addEventListener('mouseout', this.handleMouseOut(prevMenu));\n\n      const ids = document.getElementsByClassName('id');\n      const idTexts = document.getElementsByClassName('id-text');\n      for (let i=0; i<ids.length; i++) {\n          if (ids[i].style.backgroundColor !== '#FFFFFF') {\n            ids[i].style.backgroundColor = '#FFFFFF';\n            idTexts[i].style.color = '#4E4E4E';\n        }\n      }\n\n      const nameAbbr = (element) => element === name;\n      this.setState({ \n          classPicker: name,\n          classMark: this.state.classAbbrs[this.state.classes.findIndex(nameAbbr)],\n        });\n      const menu = document.getElementById(name);\n      menu.removeEventListener('mouseout', this.handleMouseOut(menu));\n      menu.style.backgroundColor = '#16609F';\n      \n      for (const target of this.state.targets) {\n          if (target.class_name === name) {\n              const container = document.getElementById(target.number);\n              const text = document.getElementById(target.number+'-text');\n              container.style.backgroundColor = '#16609F';\n              text.style.color = '#FFFFFF';\n          }\n      }\n  }\n\n  backToTop() {\n    if(document.body.scrollTop > 0 || document.documentElement.scrollTop > 0) {\n        if(document.body.scrollTop !== 0) {\n            this.setState({ lastScroll: document.body.scrollTop });\n        } else {\n            this.setState({ lastScroll: document.documentElement.scrollTop });\n        }\n        document.body.scrollTop = 0; // For Safari\n        document.documentElement.scrollTop = 0;\n    } else {\n        document.body.scrollTop = this.state.lastScroll;\n        document.documentElement.scrollTop = this.state.lastScroll;\n    }\n  }\n\n  flipBackToTop() {\n    if (document.getElementById('to-top') !== null) {\n        if(document.body.scrollTop > 0 || document.documentElement.scrollTop > 0) {\n            document.getElementById('to-top').classList.remove('flip');\n        } else if (!document.getElementById('to-top').classList.contains('flip')) {\n            document.getElementById('to-top').classList.add('flip');\n        }\n    }\n  }\n\n  handleSelectAllClick() {\n      var targets = this.state.targets;\n      const className = this.state.classPicker;\n      const classAbbrFunc = (element) => element === this.state.classPicker;\n      const classAbbr = this.state.classAbbrs[this.state.classes.findIndex(classAbbrFunc)];\n      for (let i = 0; i < targets.length; i++) {\n          targets[i].class_name = className;\n          targets[i].class_abbr = classAbbr;\n          targets[i].editor = this.props.user.username;\n          const container = document.getElementById(targets[i].number);\n          const text = document.getElementById(targets[i].number+'-text');\n          container.style.backgroundColor = '#16609F';\n          text.style.color = '#FFFFFF';\n      }\n      this.setState({ \n          targets: targets,\n          history: this.state.history.concat([JSON.stringify(targets)])\n     });\n     this.props.save(targets, this.state.bin.timeseries, this.state.bin.file, this.props.preferences.sort);\n  }\n\n  handleUndoClick() {\n    if (this.state.history.length > 1) {\n      const newHistory = this.state.history.slice(0, this.state.history.length-1);\n      const targets = JSON.parse(newHistory[newHistory.length-1]);\n      const rows = this.state.rows;\n      this.setState({ rows: [] });\n      this.setState({\n          targets: targets,\n          history: newHistory,\n      });\n      this.setState({ rows: rows });\n      this.props.save(targets, this.state.bin.timeseries, this.state.bin.file, this.props.preferences.sort);\n    }\n  }\n\n  handleSyncClick() {\n    document.getElementById('sync').classList.toggle('syncing');\n    this.setState({ rows: [] });\n    this.props.sync(this.state.bin.timeseries, this.state.bin.year, this.state.bin.day, this.state.bin.file);\n    axios\n        .get('/process/targets/' + this.state.bin.timeseries + '/' + this.state.bin.file + '/' + this.props.preferences.sort + '/')\n        .then((targetResponse) => {\n            this.setState({ \n                targets: targetResponse.data,\n                history: this.state.history.concat([JSON.stringify(targetResponse.data)]),\n             });\n        });\n    axios\n        .get('process/rows/' + this.state.bin.timeseries + '/' + this.state.bin.file + '/' + \n            '/' + this.props.preferences.sort + '/' + Math.round(this.state.scale * 1000) + '/')\n        .then((res) => {this.setState({ \n            rows: res.data.options.rows,\n            loading: false,\n          })})\n        .catch((err) => console.log(err));\n    document.getElementById('sync').classList.toggle('syncing');\n  }\n\n  handleHistogramClick() {\n    const histogram = document.getElementById('histogram');\n    const histogram_dropdown = document.getElementById('histogram_dropdown');\n    histogram_dropdown.classList.toggle('show-day');\n    histogram.scrollTop = histogram.scrollHeight;\n  }\n\n  handleRowClick(j) {\n    var targets = this.state.targets;\n    const row = this.state.rows[j];\n    for (var i in row) {\n        var k = row[i]\n        const classAbbr = (element) => element === this.state.classPicker;\n        targets[k].class_name = this.state.classPicker;\n        targets[k].class_abbr = this.state.classAbbrs[this.state.classes.findIndex(classAbbr)];\n        targets[k].editor = this.props.user.username;\n        const container = document.getElementById(targets[k].number);\n        const text = document.getElementById(targets[k].number+'-text');\n        container.style.backgroundColor = '#16609F';\n        text.style.color = '#FFFFFF';\n    }\n    this.setState({ \n        targets: targets,\n        history: this.state.history.concat([JSON.stringify(targets)])\n    });\n    const start = row[0]\n    const end = row[i];\n    const targetRow = targets.slice(start, end+1);\n\n    this.props.classifyRow(targetRow, this.state.bin.timeseries, this.state.bin.file, this.props.preferences.sort, start, end);\n  }\n\n  disablePlanktonClick(targetNum, bool, infoShowing) {\n    const infoClassList = document.getElementById(targetNum + '-info').classList;\n    if ((infoShowing) || (infoClassList.contains('show-info'))) {\n        if (!this.state.infoShowing.includes(targetNum)) {\n            this.setState({ infoShowing: this.state.infoShowing.concat([targetNum]) });\n        }\n        this.setState({ planktonClickEnabled: false });\n    } else {\n        const newInfoShowing = this.state.infoShowing.filter(function(item) {\n            return item !== targetNum\n        })\n        this.setState({ planktonClickEnabled: bool, infoShowing: newInfoShowing });\n    }\n  }\n\n  handlePlanktonClick(i) {\n    if (this.state.planktonClickEnabled) {\n        var targets = this.state.targets;\n        const k = targets.findIndex(target => target.number === i);\n        const classAbbr = (element) => element === this.state.classPicker;\n        targets[k].class_name = this.state.classPicker;\n        targets[k].class_abbr = this.state.classAbbrs[this.state.classes.findIndex(classAbbr)];\n        targets[k].editor = this.props.user.username;\n        const history = this.state.history;\n        this.setState({\n            history: history.concat([JSON.stringify(targets)]),\n            targets: targets,\n        });\n        const container = document.getElementById(targets[k].number);\n        const text = document.getElementById(targets[k].number+'-text');\n        container.style.backgroundColor = '#16609F';\n        text.style.color = '#FFFFFF';\n\n        this.props.classifyTarget(targets[k], this.state.bin.timeseries, this.state.bin.file, targets[k].number);\n    }\n  }\n\n  showNotes() {\n      const noteDropdown = document.getElementById(\"note-dropdown\");\n      noteDropdown.classList.toggle('show');\n      const showButton = document.getElementById(\"show-notes-button\");\n      (showButton.innerHTML === \"Show Notes\") ? showButton.innerHTML = \"Hide Notes\" : showButton.innerHTML = \"Show Notes\";\n\n  }\n\n  hideInfo() {\n    const showButton = document.getElementById(\"hide-info-button\");\n    (showButton.innerHTML === \"Hide Info\") ? showButton.innerHTML = \"Show Info\" : showButton.innerHTML = \"Hide Info\";\n    const infoButtons = document.getElementsByClassName('info');\n      for (let i = 0; i < infoButtons.length; i++) {\n          infoButtons[i].classList.toggle('hide');\n      }\n  }\n\n  handleScale(dir) {\n    const initialScale = this.state.scale\n    var  newScale = 0;\n    if (dir === 'up') {\n        newScale = initialScale + 0.01;\n    } else if  (dir === 'down') {\n        newScale = initialScale - 0.01;\n    }\n    axios\n      .get('process/rows/' + this.state.bin.timeseries + '/' + this.state.bin.file + '/' + \n        '/' + this.props.preferences.sort + '/' + Math.round((newScale) * 1000) + '/')\n      .then((rowResponse) => { this.setState({ \n          scale: newScale,\n          rows: rowResponse.data.options.rows \n        }); });\n  }\n\n  handleDownload() {\n    document.getElementById('download-src').src = 'http://dhcp-25-80.ucsc.edu:8000/mat/' + this.state.bin.ifcb + '/' + this.state.bin.file + '/'\n  }\n\n  openPreferences() {\n    document.getElementById(\"overlay\").style.display = \"block\";\n    document.getElementById('preferences').classList.toggle('show-pref');\n  }\n\n  closePreferences() {\n    document.getElementById(\"overlay\").style.display = \"none\";\n    document.getElementById('preferences').classList.toggle('show-pref');\n    this.props.history.go(0);\n  }\n\n  renderPreferences() {\n      return (\n        <Preferences \n            history={this.props.history}\n            load={this.props.preferences.load}\n            scale={this.props.preferences.scale}\n            sort={this.props.preferences.sort}\n        />\n      );\n  }\n\n  renderTimeSeriesControl() {\n    return <TimeSeriesControl\n        timeseries={this.state.bin.timeseries}\n        options={this.state.timeSeriesOptions}\n        onClick={(option) => this.getNewTimeSeries(option)}\n    />;\n  }\n\n  renderYearControl() {\n    return <YearControl\n        year={this.state.bin.year}\n        options={this.state.yearOptions}\n        onClick={(option) => this.getNewYear(option)} \n    />;\n  }\n\n  renderDayControl() {\n    const options = this.state.filledDays.slice().reverse();\n    return <DayControl\n        day={this.state.bin.day} \n        options={options}\n        onClick={(option) => this.handleNewDay(option)}\n    />;\n  }\n\n  renderFileControl() {\n    return <FileControl\n        file={this.state.bin.file} \n        options={this.state.fileOptions}\n        onClick={(option) => this.handleNewFile(option)} \n    />;\n  }\n\n  renderSync() {\n    return(\n        <div className=\"round-button sync\" id=\"sync-button\" onClick={() => this.handleSyncClick()}></div>\n    );\n  }\n\n  renderDownload() {\n      return(\n        <div className=\"round-button download\" onClick={() => this.handleDownload()}>\n            <div style={{display: 'none'}}>\n               <iframe id=\"download-src\" />\n            </div>\n        </div>\n      );\n  }\n\n  renderClassMenu() {\n    return <ClassMenu \n          classes={this.state.classes}\n          onClick={(name) => this.handleMenuClick(name)}\n          handleSelectAllClick={() => this.handleSelectAllClick()}\n          handleUndoClick={() => this.handleUndoClick()}\n          scale={this.state.scale}\n      />;\n  }\n\n  renderBar(gb, i) {\n    const currentDay = (element) => element === this.state.bin.day;\n    return <Bar \n        key={i}\n        onClick={(i) => this.handleBar(i)}\n        onHover={(i) => this.handleBarHover(i)}\n        number={i}\n        height={gb}\n        day={this.state.dayOptions[i]}\n        current={this.state.dayOptions.findIndex(currentDay)}\n    />;\n  }\n\n  renderNavButton(direction) {\n    var dir;\n    var text;\n    var className;\n    (direction === 'next') ? (dir = 1) : (dir = -1);\n    (direction === 'next') ? (className = 'next-button') : (className='previous-button');\n\n    const currentFile = (element) => \n        'D' + this.state.bin.year + this.state.bin.day.slice(0,2) + this.state.bin.day.slice(3,5) + \n        element.slice(0,3) + element.slice(4,6) + element.slice(7,9) === this.state.bin.file;\n    const fileNumber = this.state.fileOptions.findIndex(currentFile);\n    if ((fileNumber === this.state.fileOptions.length-1 && dir === 1) || (fileNumber === 0 && dir === -1)) {\n        const currentDay = (element) => element === this.state.bin.day;\n        const dayNumber = this.state.filledDays.findIndex(currentDay);\n        if ((dayNumber === this.state.filledDays.length-1 && dir === 1) || (dayNumber === 0 && dir === -1)) {\n            const currentYear = (element) => element === Number(this.state.bin.year);\n            const yearOptions = this.state.yearOptions.slice().reverse()\n            const yearNumber = yearOptions.findIndex(currentYear);\n            if ((yearNumber === yearOptions.length-1 && dir === 1)) {\n                return <NavButton\n                    text={'Up to Date'}\n                    className={'up-to-date-button'}\n                />;\n            } else if (yearNumber === 0 && dir === -1) {\n                return <NavButton\n                    text={'No Previous Data'}\n                    className={'up-to-date-button'}\n                />;\n            } else {\n                text = (direction === 'next') ? ('Next Year   >') : ('<   Previous Year');\n                return <NavButton\n                    text={text}\n                    onClick={() => this.getNewYear(yearOptions[yearNumber + dir])}\n                    className={className}\n                />\n            }\n        } else {\n            text = (direction === 'next') ? ('Next Day   >') : ('<   Previous Day');\n            return <NavButton\n                text={text}\n                onClick={() => this.handleNewDay(this.state.filledDays[dayNumber + dir])}\n                className={className}\n            />\n        }\n    } else {\n        text = (direction === 'next') ? ('Next File   >') : ('<   Previous File');\n        return <NavButton\n            text={text}\n            onClick={() => this.handleNewFile(this.state.fileOptions[fileNumber + dir])}\n            className={className}\n        />\n    }\n\n    \n  }\n\n  renderLoader() {\n    return <img src={loader} alt=\"Loading targets...\" width=\"80\" loop=\"infinite\" style={{'margin':'0 0 3vw 0'}}></img>\n  }\n\n  returnToClassify() {\n    this.setState({ newFile: 'blank' });\n  }\n\n  jumpToLastEdit() {\n    axios\n        .get('/lastedit/' + this.props.user.username + '/')\n        .then((res) => this.setState({ lastEditBin: res.data.bin, lastEditTarget: res.data.options }))\n        .catch((err) => console.log(err));\n  }\n\n  renderNotFound() {\n      return(\n        <div className='main'>\n            <div className=\"page\">\n                <div className=\"content\">\n                    <div className=\"inner-content\">\n                        <h1>File Not Found</h1>\n                        <p className=\"not-found-message\">The IFCB file you're looking for doesn't exist. There may be a typo in the time series, file number, or sort code in the URL.</p>\n                        <div className=\"return-button\" onClick={() => this.returnToClassify()}>Return to Classify</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      );\n  }\n\n  onTargetJumpChange(event) {\n    var k = this.state.targets.findIndex(target => target.number === event.target.value);\n    var scrollToIndex = this.state.rows.findIndex(row => row.includes(k));\n\n    if (isNaN(scrollToIndex) || scrollToIndex<0) {\n      scrollToIndex = undefined;\n    }\n\n    this.setState({\n        jumpEntry: event.target.value,\n        scrollToIndex: scrollToIndex\n    });\n  }\n\n  renderPage() {\n    const cache = new CellMeasurerCache({\n        defaultHeight: 10,\n        minHeight: 10,\n        fixedWidth: true\n      });\n\n    const jumpEntry = this.state.jumpEntry;\n    const scrollToIndex = this.state.scrollToIndex;\n\n\n    const rowRenderer = ({index, key, parent, style}) => (\n        \n        (this.state.targets.length < 1) ? <div/> : \n\n            <CellMeasurer\n                cache={cache}\n                key={key}\n                parent={parent}\n                rowIndex={index}\n            >\n            {({ measure, registerChild }) => (\n            <div ref={registerChild} key={key} style={style}>\n                <div onLoad={measure} className=\"row\">\n                    <div className=\"row-select\" \n                        alt={'Select row'} onClick={() => this.handleRowClick(index)}>\n                    </div>\n                    <div className=\"image-row\">\n                        {this.state.rows[index].map((i) => \n                            <Plankton \n                                timeseries={this.state.bin.timeseries}\n                                file={this.state.bin.file}\n                                timestamp={this.state.bin.file}\n                                id={i}\n                                targetNum={this.state.targets[i].number}\n                                class_name={this.state.targets[i].class_name}\n                                class_abbr={this.state.targets[i].class_abbr}\n                                height={this.state.targets[i].height}\n                                width={this.state.targets[i].width}\n                                scale={this.props.scaleEntry / 10}\n                                ifcb={this.state.bin.ifcb}\n                                editor={this.state.targets[i].editor}\n                                date={this.state.targets[i].date}\n                                onClick={(i) => this.handlePlanktonClick(i)}\n                                infoChange={(targetNum, bool, infoShowing) => this.disablePlanktonClick(targetNum, bool, infoShowing)}\n                                infoShowing={this.state.infoShowing}\n                            />\n                        )}\n                    </div>\n                </div>\n            </div>\n            )}\n            </CellMeasurer>\n        )\n      return(\n        \n        <div className='main'>\n            <div className=\"page\">\n            <div className=\"content\">\n                <div className=\"overlay\" id=\"overlay\" onClick={() => this.closePreferences()}></div>\n                {this.renderPreferences()}\n                    <div className=\"inner-content\">\n                        <h4 onClick={() => this.jumpToLastEdit()}>Last Edit →</h4>\n                        <h1>Manual Classifications</h1>\n                        <div className=\"time-controls\">\n                            {this.renderTimeSeriesControl()}\n                            {this.renderYearControl()}\n                            {this.renderDayControl()}\n                            {this.renderFileControl()}\n                            <div className=\"target-jump-container\">\n                                <input\n                                    type=\"textarea\" \n                                    className=\"target-jump-input\"\n                                    onChange={this.onTargetJumpChange}\n                                    value={jumpEntry || ''}\n                                    placeholder=\"Target...\"\n                                />\n                                <p className=\"time-label jump-label\" id='targetjump_label'>Jump to Target</p>\n                            </div>\n                            <div className=\"show-notes-button\" id=\"show-notes-button\" onClick={() => this.showNotes()}>Show Notes</div>\n                            <div className=\"hide-info-button\" id=\"hide-info-button\" onClick={() => this.hideInfo()}>Hide Info</div>\n                            {this.renderSync()}\n                            {this.renderDownload()}\n                            <div className=\"round-button histogram\" onClick={() => this.handleHistogramClick()}></div>\n                            <div className=\"preferences-button\" onClick={() => this.openPreferences()}></div>\n                        </div>\n                        <div className='histogram-dropdown-container' id='histogram_dropdown'>\n                            <div className=\"histogram-dropdown\" id='histogram'>\n                                <div className=\"timeline\">\n                                    <div className=\"bars\">\n                                        {this.state.barHeights.map((gb, i) => this.renderBar(gb, i))}\n                                    </div>\n                                    <div className=\"axis\">\n                                        <p className=\"month\">Jan</p>\n                                        <p className=\"month\">Feb</p>\n                                        <p className=\"month\">Mar</p>\n                                        <p className=\"month\">Apr</p>\n                                        <p className=\"month\">May</p>\n                                        <p className=\"month\">Jun</p>\n                                        <p className=\"month\">Jul</p>\n                                        <p className=\"month\">Aug</p>\n                                        <p className=\"month\">Sep</p>\n                                        <p className=\"month\">Oct</p>\n                                        <p className=\"month\">Nov</p>\n                                        <p className=\"month\">Dec</p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className='day-option'>\n                                <p className='day-option-text'>{this.state.dayOption}</p>\n                            </div>\n                        </div>\n                        <div className=\"note-container\" id=\"note-dropdown\">\n                            {((this.state.bin.timeseries) === '' || this.state.bin.file === '') ? \n                            <div></div> :\n                            <BinNote \n                                timeseries={this.state.bin.timeseries}\n                                ifcb={this.state.bin.ifcb}\n                                file={this.state.bin.file}\n                                type='bin'\n                                image='None'\n                            /> }\n                        </div>\n                        <div className=\"annotations\">\n                            {this.renderClassMenu()}\n                            <div className=\"image-grid\" id=\"image-grid\">\n                                {\n                                (this.state.loading || this.props.isSaving) ? this.renderLoader() : console.log()\n                                }\n                                <List\n                                    height={800} // fix later\n                                    rowCount={this.state.rows.length}\n                                    rowHeight={cache.rowHeight}\n                                    rowRenderer={rowRenderer}\n                                    scrollToAlignment=\"start\"\n                                    scrollToIndex={scrollToIndex}\n                                    width={document.documentElement.clientWidth*0.72}\n                                />\n                                <img src={toTop} alt=\"Back to Top\" className=\"to-top\" id=\"to-top\" onClick={() => this.backToTop()}></img>\n                            </div>\n                        </div>\n                        <div className='navigation-container'>\n                            <div style={{'display':'flex'}}>\n                                {this.renderNavButton('previous')}\n                                {this.renderNavButton('next')}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n      );\n  }\n\n  render() {\n    \n    if(this.props.onNotebook) {\n        return <Redirect to=\"/notebook/\" />\n    }\n\n    if(this.props.onAnalysis) {\n        return <Redirect to=\"/analysis/\" />\n    }\n\n    if(this.state.newFile.length !== 0) {\n        if (this.state.newFile === 'blank') {\n            return <Redirect to='/classify/' />\n        }\n        const newURL = '/classify/' + this.state.newTimeSeries + '/' + this.state.newFile;\n        return <Redirect to={newURL} />\n    }\n\n    if (this.state.rows !== [] && this.state.initialTargetJump === '' && !this.state.loading) {\n        const urlInfo = this.props.location.pathname.split('/');\n        if (urlInfo.length > 4) {\n            const targetNum = urlInfo[4];\n            var k = this.state.targets.findIndex(target => target.number === targetNum);\n            var scrollToIndex = this.state.rows.findIndex(row => row.includes(k));\n\n            if (isNaN(scrollToIndex) || scrollToIndex<0) {\n                scrollToIndex = undefined;\n            }\n\n            this.setState({\n                jumpEntry: targetNum,\n                initialTargetJump: targetNum,\n                scrollToIndex: scrollToIndex\n            });\n        }\n    }\n\n    if (typeof(this.state.lastEditBin) !== 'string') {\n        this.setState({ loading: true });\n        const bin = this.state.lastEditBin;\n            return <Redirect to={\"/classify/\" + bin.timeseries + '/' + bin.file + '/' + this.state.lastEditTarget.target} />\n    }\n\n    return(\n        <div className='body'>\n        <title>{'IFCB | ' + this.state.bin.file}</title>\n        <Header />\n        {(this.state.bin.file === 'Not Found') ? this.renderNotFound() : this.renderPage()}\n        \n        <script>{document.addEventListener(\"scroll\", this.flipBackToTop)}</script>\n    </div>\n      );\n  }\n}\n\nconst mapStateToProps = state => ({\n    preferences: state.auth.preferences,\n    isSaving: state.classify.isSaving,\n    user: state.auth.user,\n    scaleEntry: state.classify.scaleEntry,\n    onNotebook: state.menu.onNotebook,\n    onAnalysis: state.menu.onAnalysis,\n });\n\nexport default connect(mapStateToProps, { classifyTarget, classifyRow, classifyAll, save, sync, changeScale })(Annotations);","export default \"data:image/png;base64,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\"","import React, { Component } from 'react';\nimport { Grid, AutoSizer, CellMeasurerCache, CellMeasurer } from 'react-virtualized';\nimport axios from \"axios\";\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\n\nimport { filterNotebook, receiveNotesChange } from \"../../actions/classify\";\nimport Header from '../layout/Header';\nimport Note from \"./Note\";\nimport '../../css/notebook-styles.css';\n\nclass Filter extends Component {\n    renderOption(option) {\n        return(\n            <div className=\"filter-option\" onClick={() => this.props.applyFilter(this.props.filter, option)}>{option}</div>\n        );\n    }\n    \n    render() {\n        return(\n            <div>\n                <div className=\"filter-choice\" onClick={() => this.props.onClick(this.props.filter)}>\n                    <p className=\"filter-choice-text\">{this.props.filter}</p>\n                    <p className=\"filter-choice-plus\" id={this.props.filter + \"-plus\"}>+</p>\n                </div>\n                <div className=\"filter-dropdown\" id={this.props.filter + \"-dropdown\"}>\n                    {this.props.options.map((option) => (this.renderOption(option[this.props.filter])))}\n                </div>\n            </div>\n        );\n    }\n}\n\nclass Notebook extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            notes: [{\n                \"id\": \"\",\n                \"author\": \"\",\n                \"date\": \"\",\n                \"entry\": \"\",\n                \"parent\": null,\n                \"replies\": [],\n                \"timeseries\": \"\",\n                \"ifcb\": \"\",\n                \"file\": \"\",\n                \"image\": \"\"\n            }],\n            flags: [],\n            classes: [],\n            searchTerms: \"\",\n            authors: [{author: ''}],\n            bins: [{bin: ''}],\n            timeseries: [{timeseries: ''}],\n            ifcbs: [{ifcb: ''}],\n            types: [\n                {type: 'Bin Note'}, \n                {type: 'Target Note'}\n            ],\n            appliedFilters: [],\n        }\n    }\n\n    static propTypes = {\n        user: PropTypes.object,\n        onClassify: PropTypes.bool,\n        onAnalysis: PropTypes.bool,\n        notes: PropTypes.array,\n        filterNotebook: PropTypes.func,\n        receiveNotesChange: PropTypes.func,\n        noteChangeFlag: PropTypes.bool\n    }\n\n    getNotebook(filters) {\n        if (filters.length === 0) {\n            axios\n                .get('/notebook/')\n                .then((res) => {\n                    this.setState({ \n                        notes: res.data,\n                        flags: Array(res.data.length).fill(''),\n                    });\n                })\n                .catch((err) => console.log(err));\n        } else {\n            this.props.filterNotebook(filters);\n        }\n    }\n\n    componentDidMount() {\n        this.getNotebook([]);\n        axios\n            .get('/notebook/filters/')\n            .then((res) => {\n                this.setState({ \n                    authors: res.data.options.authors,\n                    bins: res.data.options.bins,\n                    timeseries: res.data.options.timeseries,\n                    ifcbs: res.data.options.ifcbs,\n                });\n            })\n            .catch((err) => console.log(err));\n    }\n\n    componentDidUpdate() {\n        if (this.props.noteChangeFlag) {\n            this.getNotebook(this.state.appliedFilters);\n            this.props.receiveNotesChange();\n        }\n    }\n\n    handleFilterClick() {\n        document.getElementById('filter_dropdown').classList.toggle('show');\n    }\n\n    onChange = e => this.setState({ searchTerms: e.target.value })\n\n    onSubmit = e => {\n        e.preventDefault();\n        const newAppliedFilters = this.state.appliedFilters.concat([ {category: \"search\", choice: this.state.searchTerms} ]);\n        this.setState({ appliedFilters: newAppliedFilters })\n        this.props.filterNotebook(newAppliedFilters);\n    }\n\n    handleFilterChoiceClick(option) {\n        document.getElementById(option + '-plus').classList.toggle('rotate-plus');\n        document.getElementById(option + '-dropdown').classList.toggle('show');\n    }\n\n    handleApplyFilter(category, choice) {\n        const duplicates = this.state.appliedFilters.filter(entry => (entry['category'] === category) && (entry['choice'] === choice))\n        if (duplicates.length === 0) {\n            const newAppliedFilters = this.state.appliedFilters.concat([ {category: category, choice: choice} ])\n            this.getNotebook(newAppliedFilters);\n            this.setState({ appliedFilters: newAppliedFilters });\n        }\n    }\n\n    handleRemoveFilter(filter) {\n        const applied = this.state.appliedFilters;\n        const index = applied.findIndex(entry => entry === filter);\n        const newAppliedFilters = applied.slice(0, index).concat(applied.slice(index+1,applied.length));\n        this.setState({ appliedFilters: newAppliedFilters });\n        this.getNotebook(newAppliedFilters);\n    }\n\n    renderFilterChoice(filter, options) {\n        return(\n            <Filter\n                filter={filter}\n                options={options}\n                onClick={(option) => this.handleFilterChoiceClick(option)}\n                applyFilter={(category, choice) => this.handleApplyFilter(category, choice)}\n            />\n        );\n    }\n\n    renderAppliedFilters(filter) {\n        return (\n            <div className=\"filter-choice applied\" onClick={() => this.handleRemoveFilter(filter)}>\n                <p className=\"filter-choice-text applied-text\">{filter.category.toUpperCase() + ': ' + filter.choice}</p>\n                <p className=\"filter-choice-plus applied-text rotate-plus\" id={this.props.filter + \"-plus\"}>+</p>\n            </div>\n        );\n    }\n\n\n  render() {\n    if(this.props.onClassify) {\n        return <Redirect to=\"/classify\" />\n    }\n\n    if(this.props.onAnalysis) {\n        return <Redirect to=\"/analysis/\" />\n    }\n\n    const cache = new CellMeasurerCache({\n        defaultHeight: 200,\n        minHeight: 200,\n        fixedWidth: true\n      });\n\n    // Grid data as an array of arrays\n    const notes = this.state.notes;\n    const username = this.props.user.username;\n    var skips = 0;\n    var rendered = [];\n\n    function renderReply(note, count) {\n        return(\n            <div className=\"reply\" style={{margin: \"0 0 0 \" + String(count) + \"vw\"}}>\n                <Note\n                    note={note}\n                    user={username}\n                    timeseries={note.timeseries}\n                    ifcb={note.ifcb}\n                    file={note.file}\n                    type='bin'\n                    image={note.image}\n                />\n                <div className=\"reply\" style={{margin: \"0 0 0 \" + String((count+1)) + \"vw\"}}>\n                {(note.replies.length !== 0) ?\n                    note.replies.map((reply) => renderReply(reply, count+1)) :\n                    <div></div>\n                }\n                </div>\n            </div>\n        );\n    }\n    \n    function cellRenderer({columnIndex, key, parent, rowIndex, style}) {\n        if ((rowIndex === 0) && (columnIndex === 0)) {\n            skips = 0;\n            rendered = [];\n        }\n        var noteIndex = (3*rowIndex) + columnIndex + skips;\n        if ((noteIndex) < notes.length) {\n            if ((notes[noteIndex].parent !== null) || (rendered.includes(noteIndex))) {\n                while (notes[noteIndex].parent !== null || (rendered.includes(noteIndex))) {\n                    noteIndex = noteIndex + 1;\n                    skips = skips + 1;\n                    if (noteIndex >= notes.length) {\n                        return\n                    }\n                }\n            }\n            rendered = rendered.concat([noteIndex]);\n            const note = notes[noteIndex];\n            const count = 0;\n            var url = '';\n            if (note.image !== 'None') {\n                url = 'http://128.114.25.154:8888/' + note.timeseries + '/' + note.file + '_' + note.ifcb + '_' + note.image + '.jpg';\n            }\n            const flatNote = JSON.stringify(note);\n            const includesFlag = flatNote.includes('true');\n            return (\n                <CellMeasurer\n                    cache={cache}\n                    columnIndex={columnIndex}\n                    key={key}\n                    parent={parent}\n                    rowIndex={rowIndex}\n                >\n                {({ measure, registerChild }) => (\n                    <div ref={registerChild} key={key} style={style}>\n                        <div className=\"notebook-note\" onLoad={measure}>\n                            {(url === '') ? <div></div> : \n                            <img src={url} className=\"notebook-image\" alt={'Target ' + note.image}></img>}\n                            {(includesFlag) ? <div className=\"flag\"></div> : <div></div>}\n                            <div className=\"notebook-entry\"> \n                                <div>\n                                    {(note.image === 'None') ? \n                                    <div className=\"notebook-entry\">\n                                        <p className=\"notebook-entry-heading\">{note.timeseries + ', ' + note.file}</p>\n                                    </div> :\n                                    <div className=\"notebook-entry\">\n                                        <p className=\"notebook-entry-heading\">{'Target ' + note.image}</p>\n                                        <p className=\"notebook-entry-subtitle\">{note.timeseries + ', ' + note.file}</p>\n                                    </div>\n                                    }\n                                    <Note\n                                        note={note}\n                                        user={username}\n                                        timeseries={note.timeseries}\n                                        ifcb={note.ifcb}\n                                        file={note.file}\n                                        type='bin'\n                                        image={note.image}\n                                    />\n                                    {(note.replies.length !== 0) ?\n                                        note.replies.map((reply) => renderReply(reply, count+1)) :\n                                        <div></div>\n                                    }\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n                </CellMeasurer>\n            );\n            } else {return}\n      }\n\n    return (\n            <div>\n                <Header />\n                <title>IFCB | Notebook</title>\n                <div className='main'>\n                    <div className=\"page\">\n                        <div>\n                            <div className=\"notebook-heading\">\n                                <h1 className=\"notebook-header\">Notebook</h1>\n                                <div className=\"filter-button\" onClick={() => this.handleFilterClick()}>Filter</div>\n                            </div>\n                            <div className=\"day-dropdown withmargin\" id='filter_dropdown'>\n                                <form className=\"search-form\" id=\"search-form\" onSubmit={this.onSubmit}>\n                                    <div className=\"search-bar\">\n                                        <div className=\"search-icon\"></div>\n                                        <input\n                                            type=\"text\"\n                                            className=\"search-input\"\n                                            name=\"searchTerms\"\n                                            onChange={this.onChange}\n                                            value={this.state.searchTerms}\n                                        />\n                                    </div>\n                                    <div className=\"applied-filters\">{this.state.appliedFilters.map((filter) => (this.renderAppliedFilters(filter)))}</div>\n                                    <div className=\"filter-buttons\">\n                                        {this.renderFilterChoice('author', this.state.authors)}\n                                        {this.renderFilterChoice('file', this.state.bins)}\n                                        {this.renderFilterChoice('timeseries', this.state.timeseries)}\n                                        {this.renderFilterChoice('ifcb', this.state.ifcbs)}\n                                    </div>\n                                </form>\n                            </div>\n                            <div className=\"notebook-content\">\n                                <AutoSizer>\n                                {({ width, height }) => (\n                                    <Grid\n                                        cellRenderer={cellRenderer}\n                                        columnCount={3}\n                                        columnWidth={document.documentElement.clientWidth*0.29}\n                                        rowHeight={cache.rowHeight}\n                                        deferredMeasurementCache={cache}\n                                        rowCount={Math.ceil(this.state.notes.length/3)}\n                                        height={height}\n                                        width={width}\n                                        notes={this.props.notes}\n                                    />\n                                )}\n                                </AutoSizer>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n    user: state.auth.user,\n    onClassify: state.menu.onClassify,\n    onAnalysis: state.menu.onAnalysis,\n    noteChangeFlag: state.classify.noteChangeFlag\n });\n\nexport default connect(mapStateToProps, {filterNotebook, receiveNotesChange})(Notebook);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\n\nimport Header from '../layout/Header';\nimport { goto_classdownload, goto_search } from \"../../actions/menu\";\nimport '../../css/analysis-styles.css';\n\nclass AnalysisOption extends Component {\n    render() {\n        return(\n            <div className=\"analysis-option-container\">\n                <h2 className=\"analysis-option-heading\">{this.props.heading}</h2>\n                <p className=\"analysis-option-description\">{this.props.description}</p>\n                <div className=\"analysis-option-button\" onClick={this.props.handleClick}>Start</div>\n            </div>\n        );\n    }\n}\n\nclass Analysis extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            analysisOptions: [\n                {heading: 'Search', description: \"Find any image or collection of images with the help of classification filtering, file look-up, and more.\"},\n                {heading: 'Download by Class', description: \"Download a ZIP file containing all, or a desired subset of, images classified as a particular species.\"},\n            ],\n            bin: '',\n            target: '',\n        }\n    }\n\n    static propTypes = {\n        user: PropTypes.object,\n        onClassify: PropTypes.bool,\n        onNotebook: PropTypes.bool,\n        onClassDownload: PropTypes.bool,\n        onSearch: PropTypes.bool,\n        goto_classdownload: PropTypes.func,\n        goto_search: PropTypes.func,\n    }\n\n    renderAnalysisOption(option) {\n        var handleClick\n        if (option.heading === 'Search') {\n            handleClick = this.props.goto_search;\n        } else if (option.heading === 'Download by Class') {\n            handleClick = this.props.goto_classdownload;\n        }\n        return (\n            <AnalysisOption\n                key={option.heading}\n                heading={option.heading}\n                description={option.description}\n                handleClick={handleClick}\n            />\n        );\n    }\n\n    render() {\n        if(this.props.onClassify) {\n            return <Redirect to=\"/classify\" />\n        }\n\n        if(this.props.onNotebook) {\n            return <Redirect to=\"/notebook/\" />\n        }\n\n        if(this.props.onClassDownload) {\n            return <Redirect to=\"/analysis/classdownload\" />\n        }\n\n        if(this.props.onSearch) {\n            return <Redirect to=\"/analysis/search\" />\n        }\n\n        return(\n            <div>\n                <Header />\n                <title>IFCB | Analysis</title>\n                <div className='main'>\n                    <div className=\"page\">\n                        <div>\n                            <div className=\"notebook-heading\">\n                                <h1 className=\"notebook-header\">Analysis</h1>\n                            </div>\n                            <div className=\"analysis-options\">\n                                {this.state.analysisOptions.map((option) => (this.renderAnalysisOption(option)))}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n}\n\nconst mapStateToProps = state => ({\n    user: state.auth.user,\n    onClassify: state.menu.onClassify,\n    onNotebook: state.menu.onNotebook,\n    onClassDownload: state.menu.onClassDownload,\n    onSearch: state.menu.onSearch,\n });\n\nexport default connect(mapStateToProps, { goto_classdownload, goto_search })(Analysis);","import React, { Component } from 'react';\nimport axios from \"axios\";\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\n\nimport Header from '../layout/Header';\nimport '../../css/analysis-styles.css';\nimport '../../css/notebook-styles.css';\nimport loader from \"../annotations/loader.GIF\";\n\nclass ClassDownload extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            classes: [],\n            classifiers: [],\n            classChoice: '',\n            optionalChoices: {\n                include: [],\n                exclude: [],\n                number: 'all',\n            },\n            loading: false,\n        }\n    }\n\n    static propTypes = {\n        user: PropTypes.object,\n        onClassify: PropTypes.bool,\n        onNotebook: PropTypes.bool,\n        onAnalysis: PropTypes.bool,\n    }\n\n    componentDidMount() {\n        axios\n            .get('/classes/IFCB104/')\n            .then((res) => {\n                this.setState({ \n                    classes: res.data.map((c) => (c.display_name)),\n                });\n            })\n            .catch((err) => console.log(err));\n        axios\n            .get('/classdownload/classifiers/')\n            .then((res) => {\n                this.setState({ \n                    classifiers: res.data.options.classifiers,\n                });\n            })\n            .catch((err) => console.log(err));\n    }\n\n    handleClassOptionClick(option) {\n        if (this.state.classChoice !== '') {\n            document.getElementById(this.state.classChoice + '-text').style.color = '#707070';\n            document.getElementById(this.state.classChoice + '-cont').style.backgroundColor = '#F8F7F7';\n        }\n        this.setState({ classChoice: option });\n        document.getElementById(option + '-text').style.color = '#FFFFFF';\n        document.getElementById(option + '-cont').style.backgroundColor = '#16609F';\n    }\n\n    handleClassifierOptionClick(option) {\n        const classifierIncludes = this.state.optionalChoices.include;\n        const classifierExcludes = this.state.optionalChoices.exclude;\n        document.getElementById(option + '-text').style.color = '#707070';\n        document.getElementById(option + '-cont').style.backgroundColor = '#F8F7F7';\n        if (classifierIncludes.includes(option)) {\n            const index = classifierIncludes.indexOf(option);\n            classifierIncludes.splice(index, 1);\n            const newExcludes = classifierExcludes.concat([option]);\n            this.setState({ optionalChoices: {\n                include: classifierIncludes,\n                exclude: newExcludes,\n                number: this.state.optionalChoices.number\n            } });\n            document.getElementById(option + '-cont').style.backgroundColor = '#7dad0b';\n            document.getElementById(option + '-text').style.color = '#FFFFFF';\n        } else if (classifierExcludes.includes(option)) {\n            const index = classifierExcludes.indexOf(option);\n            classifierExcludes.splice(index, 1);\n            this.setState({ optionalChoices: {\n                include: classifierIncludes,\n                exclude: classifierExcludes,\n                number: this.state.optionalChoices.number\n            } });\n            document.getElementById(option + '-cont').style.backgroundColor = '#F8F7F7';\n            document.getElementById(option + '-text').style.color = '#707070';\n        } else {\n            const newIncludes = classifierIncludes.concat([option]);\n            this.setState({ optionalChoices: {\n                include: newIncludes,\n                exclude: classifierExcludes,\n                number: this.state.optionalChoices.number\n            } });\n            document.getElementById(option + '-cont').style.backgroundColor = '#16609F';\n            document.getElementById(option + '-text').style.color = '#FFFFFF';\n        }\n    }\n\n    handleAllClick() {\n        document.getElementById('all-cont').style.backgroundColor = '#16609F';\n        document.getElementById('all-text').style.color = '#FFFFFF';\n        this.setState({ optionalChoices: {\n            include: this.state.optionalChoices.include,\n            exclude: this.state.optionalChoices.exclude,\n            number: 'all'\n        } })\n    }\n\n    handleNumberChange(e) {\n        this.setState({ optionalChoices: {\n            include: this.state.optionalChoices.include,\n            exclude: this.state.optionalChoices.exclude,\n            number: e.target.value\n        } });\n        document.getElementById('all-cont').style.backgroundColor = '#F8F7F7';\n        document.getElementById('all-text').style.color = '#707070';\n    }\n\n    onChange = e => (this.handleNumberChange(e))\n\n    download() {\n        this.setState({ loading: true });\n        const include = (this.state.optionalChoices.include.length < 1) ? ('None') : (this.state.optionalChoices.include.join('-'));\n        const exclude = (this.state.optionalChoices.exclude.length < 1) ? ('None') : (this.state.optionalChoices.exclude.join('-'));\n        const number = this.state.optionalChoices.number\n        document.getElementById('download-src').src = 'http://dhcp-25-80.ucsc.edu:8000/classdownload/' + this.state.classChoice + '/' + include + '/' + exclude + '/' + number + '/'\n    }\n\n    loadFrame() {\n        this.setState({ loading: false });\n    }\n\n    renderClassOption(option) {\n        return(\n            <div className=\"filter-choice download-option\" id={option + '-cont'} onClick={() => this.handleClassOptionClick(option)}>\n                <p className=\"filter-choice-text\" id={option + '-text'}>{option}</p>\n            </div>\n        );\n    }\n\n    renderClassifierOption(option) {\n        return(\n            <div className=\"filter-choice download-option\" id={option + '-cont'} onClick={() => this.handleClassifierOptionClick(option)}>\n                <p className=\"filter-choice-text\" id={option + '-text'}>{option}</p>\n            </div>\n        );\n    }\n\n    renderLoader() {\n        return <img src={loader} alt=\"Loading targets...\" width=\"50\" loop=\"infinite\" style={{margin:'2vw 0 0 0'}}></img>\n      }\n\n    render() {\n        if(this.props.onClassify) {\n            return <Redirect to=\"/classify\" />\n        }\n\n        if(this.props.onNotebook) {\n            return <Redirect to=\"/notebook/\" />\n        }\n\n        if(this.props.onAnalysis) {\n            return <Redirect to=\"/analysis\" />\n        }\n\n        return(\n            <div>\n                <Header />\n                <title>IFCB | Class Download</title>\n                <div className='main'>\n                    <div className=\"page\">\n                        <div>\n                            <div className=\"notebook-heading\">\n                                <h1 className=\"notebook-header\">Analysis</h1>\n                            </div>\n                            <h2 className=\"analysis-option-heading page-heading\">Download by Class</h2>\n                            <div className=\"download-steps\">\n                                <div className=\"download-step-container\">\n                                    <div className=\"download-step-heading\">\n                                        <div className=\"step-icon\">1</div>\n                                        <p className=\"download-step-text\">Choose a classification</p>\n                                    </div>\n                                    <p className=\"download-step-subtext\">Select one classification name.</p>\n                                    <div className=\"class-options\">\n                                        {this.state.classes.map((option) => (this.renderClassOption(option)))}\n                                    </div>\n                                </div>\n                                <div>\n                                    <div className=\"download-step-container classifiers\">\n                                        <div className=\"download-step-heading\">\n                                            <div className=\"step-icon\">2</div>\n                                            <p className=\"download-step-text\">Choose classifiers (optional)</p>\n                                        </div>\n                                        <p className=\"download-step-subtext\">Click an option once to include it or twice to exclude it.</p>\n                                        <div className=\"class-options\">\n                                            {this.state.classifiers.map((option) => (this.renderClassifierOption(option.editor)))}\n                                        </div>\n                                    </div>\n                                    <div className=\"download-step-container\">\n                                    <div className=\"download-step-heading\">\n                                        <div className=\"step-icon\">3</div>\n                                        <p className=\"download-step-text\">Choose number (optional)</p>\n                                    </div>\n                                    <p className=\"download-step-subtext\">Enter in the number of images to include.</p>\n                                    <div className=\"class-options\">\n                                        <form>\n                                        <input \n                                            type=\"number\" \n                                            id=\"number\" \n                                            name=\"number\" \n                                            min=\"1\"\n                                            onChange={this.onChange}\n                                            value={this.state.optionalChoices.number}\n                                        />\n                                        </form>\n                                        <div className=\"filter-choice download-option\" id={'all-cont'}>\n                                            <p className=\"filter-choice-text\" id={'all-text'} onClick={() => this.handleAllClick()}>All</p>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"download-button\" onClick={() => this.download()}>Download</div>\n                                <div style={{display: 'none'}}>\n                                    <iframe title=\"Download Images\" id=\"download-src\" onload={() => this.loadFrame()} />\n                                </div>\n                                <div>{ (this.state.loading) ? this.renderLoader() : <div/> }</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n}\n\nconst mapStateToProps = state => ({\n    user: state.auth.user,\n    onClassify: state.menu.onClassify,\n    onNotebook: state.menu.onClassify,\n    onAnalysis: state.menu.onAnalysis,\n });\n\nexport default connect(mapStateToProps)(ClassDownload);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\n\nimport Header from '../layout/Header';\nimport { searchTargets, getBins } from \"../../actions/classify\";\nimport '../../css/analysis-styles.css';\nimport '../../css/notebook-styles.css';\nimport '../../css/classify-styles.css';\nimport loader from \"../annotations/loader.GIF\";\n\nclass Target extends Component {\n    \n    showMore() {\n        document.getElementById(this.props.target.id + '-info').style.display = 'block';\n        document.getElementById(this.props.target.id + '-preview').style.display = 'none';\n        \n        const initialWidth = Number(this.props.target.height);\n        const idWidth = document.getElementById(this.props.target.id + '-info').style.width;\n        const scale = idWidth / initialWidth;\n        const style = {height: String(Number(this.props.target.height)*0.056*scale)+'vw'}\n        document.getElementById(this.props.target.id + '-image').style = style;\n\n    }\n\n    showLess() {\n        document.getElementById(this.props.target.id + '-info').style.display = 'none';\n        document.getElementById(this.props.target.id + '-preview').style.display = 'flex';\n        const style = String(Number(this.props.target.height)*0.056)+'vw'\n        document.getElementById(this.props.target.id + '-image').style.height = style;\n    }\n    \n    render() {\n        if (this.props.bins !== []) {\n            \n            const desiredBin = (element) => element.id === this.props.target.bin;\n            const binIndex = this.props.bins.findIndex(desiredBin);\n            const bin = this.props.bins[binIndex];\n            const url = 'http://128.114.25.154:8888/' + bin.timeseries + '/' + bin.file + '_' + bin.ifcb + '_' + this.props.target.number + '.jpg';\n            \n            return(\n                <div className=\"search-result\">\n                    <img src={url} className=\"image searh-result-image\"\n                        alt={this.props.target.class_name}\n                        id={this.props.target.id + '-image'}\n                        style={{height: String(Number(this.props.target.height)*0.056)+'vw'}}>\n                    </img>\n                    <div className='id' id={this.props.target.id + '-preview'}>\n                        <div className='search-result-plus' id={this.props.target.id + '-plus'} onClick={() => this.showMore()}><p className=\"plus\">+</p></div>\n                    </div>\n                    <div className='id description' style={{display: 'none'}} id={this.props.target.id + '-info'}>\n                        <div className='search-result-plus exit' onClick={() => this.showLess()}>\n                            <p className=\"plus x\">X</p>\n                        </div>\n                        <p className=\"description-heading\">{this.props.target.class_name}</p>\n                        <div style={{display: 'flex'}}>\n                            <p className=\"description-label\">{'File: '}</p>\n                            <p>{bin.file}</p>\n                        </div>\n                        <div style={{display: 'flex'}}>\n                            <p className=\"description-label\">{'Time Series: '}</p>\n                            <p>{bin.timeseries}</p>\n                        </div>\n                        <div style={{display: 'flex'}}>\n                            <p className=\"description-label\">{'IFCB: '}</p>\n                            <p>{bin.ifcb}</p>\n                        </div>\n                        <div style={{display: 'flex'}}>\n                            <p className=\"description-label\">{'Target: '}</p>\n                            <p>{this.props.target.number}</p>\n                        </div>\n                        <div style={{display: 'flex'}}>\n                            <p className=\"description-label\">{'Classifer: '}</p>\n                            <p>{this.props.target.editor}</p>\n                        </div>\n                        <div style={{display: 'flex'}}>\n                            <p className=\"description-label\">{'Date: '}</p>\n                            <p>{this.props.target.date}</p>\n                        </div>\n                        <div className='search-redirect-button' onClick={() => this.props.redirectToFile(bin.timeseries, bin.file)}>Go to File</div>\n                    </div>\n                </div>\n            );\n        }\n        else {\n            return <div/>\n        }\n    }\n}\n\nclass Search extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            targets: [[]],\n            bins: [[]],\n            basicSearch: '',\n            loading: false,\n            renderable: false,\n            redirectInfo: ''\n        }\n    }\n\n    static propTypes = {\n        user: PropTypes.object,\n        onClassify: PropTypes.bool,\n        onNotebook: PropTypes.bool,\n        onAnalysis: PropTypes.bool,\n        searchTargets: PropTypes.func,\n        targetSearchResults: PropTypes.array,\n        binsSearchResults: PropTypes.array,\n    }\n\n    onChange = e => this.setState({ basicSearch: e.target.value })\n\n    onSubmit = e => {\n        e.preventDefault();\n        this.setState({ renderable: false });\n        document.getElementById(\"no-results\").style.display = 'none';\n        this.props.searchTargets(this.state.basicSearch);\n        this.setState({ \n            targets: this.props.targetSearchResults\n        });\n        if (this.props.targetSearchResults === [[]]) {\n            document.getElementById(\"no-results\").style.display = 'flex';\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.targetSearchResults !== this.props.targetSearchResults) {\n            var targets;\n            if (this.props.targetSearchResults[0].length !== undefined) {\n                targets = this.props.targetSearchResults[0];\n            } else {\n                targets = this.props.targetSearchResults;\n            }\n            this.props.getBins(targets.map(target => target.bin));\n        }\n\n        if (prevProps.binsSearchResults !== this.props.binsSearchResults) {\n            this.setState({\n                renderable: true,\n            });\n        }\n    }\n\n    redirectToFile(timeseries, file) {\n        this.setState({ redirectInfo: {timeseries: timeseries, file: file} });\n    }\n\n    renderTarget(target) {\n        return( \n            <Target\n                target={target}\n                bins={this.props.binsSearchResults[0]}\n                key={target.id}\n                redirectToFile={(timeseries, file) => this.redirectToFile(timeseries, file)}\n            />\n        );\n    }\n\n    renderLoader() {\n        return <img src={loader} alt=\"Loading targets...\" width=\"80\" loop=\"infinite\"></img>\n    }\n\n    render() {\n        if(this.props.onClassify) {\n            return <Redirect to=\"/classify\" />\n        }\n\n        if(this.props.onNotebook) {\n            return <Redirect to=\"/notebook/\" />\n        }\n\n        if(this.props.onAnalysis) {\n            return <Redirect to=\"/analysis\" />\n        }\n\n        if(this.state.redirectInfo !== '') {\n            const timeseries = this.state.redirectInfo.timeseries;\n            const file = this.state.redirectInfo.file;\n            return <Redirect to={\"/classify/\" + timeseries + \"/\" + file + \"/AZ\"} />\n        }\n\n        var targets;\n        var resultsDisplay;\n        ((typeof this.props.targetSearchResults[0].length !== \"undefined\")) \n           ? (targets = this.props.targetSearchResults[0]) : (targets = this.props.targetSearchResults);\n        (targets.length === 0) ? (resultsDisplay = {display: 'flex'}) : (resultsDisplay = {display: 'none'})\n        \n           return(\n            <div>\n                <Header />\n                <title>IFCB | Search</title>\n                <div className='main'>\n                    <div className=\"page\">\n                        <div>\n                            <div className=\"notebook-heading\">\n                                <h1 className=\"notebook-header\">Analysis</h1>\n                            </div>\n                            <h2 className=\"analysis-option-heading page-heading\">Search</h2>\n                            <div>\n                                <form className=\"search-form\" id=\"search-form\" onSubmit={this.onSubmit}>\n                                    <div className=\"search-bar\">\n                                        <div className=\"search-icon\"></div>\n                                        <input\n                                            type=\"text\"\n                                            className=\"search-input\"\n                                            name=\"basicSearch\"\n                                            onChange={this.onChange}\n                                            value={this.state.basicSearch}\n                                        />\n                                    </div>\n                                </form>\n                            </div>\n                            <div>\n                                <p className=\"no-results\" id=\"no-results\" style={resultsDisplay}>No results</p>\n                                <div className=\"image-grid\">\n                                    {\n                                    (this.state.loading) ? this.renderLoader() :\n                                    (this.state.renderable) ? (targets.map((target) => this.renderTarget(target))) : (<div/>)\n                                    }\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n}\n\nconst mapStateToProps = state => ({\n    user: state.auth.user,\n    onClassify: state.menu.onClassify,\n    onNotebook: state.menu.onClassify,\n    onAnalysis: state.menu.onAnalysis,\n    targetSearchResults: state.classify.targetSearchResults,\n    binsSearchResults: state.classify.binsSearchResults,\n });\n\nexport default connect(mapStateToProps, { searchTargets, getBins })(Search);","import React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { PropTypes } from \"prop-types\";\nimport { login } from \"../../actions/auth\";\n\nimport '../../css/auth-styles.css';\n\n\nexport class Login extends Component {\n    state = {\n        username: '',\n        password: '',\n        attempted: false,\n    }\n\n    static propTypes = {\n        login: PropTypes.func.isRequired,\n        isAuthenticated: PropTypes.bool,\n        loginFailed: PropTypes.bool,\n        location: PropTypes.string\n    };\n\n    onSubmit = e => {\n        e.preventDefault();\n        this.props.login(this.state.username, this.state.password);\n        this.setState({ attempted: true });\n    }\n\n    onChange = e => this.setState({ \n        [e.target.name]: e.target.value,\n        attempted: false\n    })\n\n    render() {\n        if(document.getElementById('error')) {\n            const error = document.getElementById('error').classList;\n            if(this.props.isAuthenticated) {\n                return <Redirect push to={this.props.location} />\n            } else if(this.props.loginFailed && this.state.attempted) {\n                if (!error.contains('show')) {\n                    error.add('show');\n                }\n            } else {\n                if (error.contains('show')) {\n                    error.remove('show');\n                }\n            }\n        }\n        \n        const { username, password } = this.state;\n        return (\n            <div className='body'>\n                <title>IFCB | Login</title>\n                <main className=\"login-main\">\n                <div className=\"header\">\n                    <h3>IFCB Classification</h3>\n                    <ul className=\"navbar\">\n                        <li className=\"nav-item\">\n                            <Link to=\"/register\" className=\"nav-link\">Register</Link>\n                        </li>\n                        <li className=\"nav-item\">\n                            <Link to=\"/login\" className=\"nav-link\">Login</Link>\n                        </li>\n                    </ul>\n                </div>\n                <div className=\"main-container\">\n                    <div className=\"sub-container\">\n                    <h2>Welcome back.</h2>\n                    <p className='auth-text'>Sign in to start classifying.</p>\n                    <form onSubmit={this.onSubmit}>\n                        <div className=\"form-group\">\n                        <input\n                            type=\"text\"\n                            className=\"form-control\"\n                            name=\"username\"\n                            onChange={this.onChange}\n                            value={username}\n                        />\n                        <label>Username</label>\n                        </div>\n                        <div className=\"form-group\">\n                        <input\n                            type=\"password\"\n                            className=\"form-control\"\n                            name=\"password\"\n                            onChange={this.onChange}\n                            value={password}\n                        />\n                        <label>Password</label>\n                        </div>\n                        <div className=\"form-group\">\n                        <p className=\"error-message\" id=\"error\">Incorrect username or password.</p>\n                        <button type=\"submit\" className=\"login-submit\">\n                            Login\n                        </button>\n                        </div>\n                    </form>\n                    </div>\n                </div>\n            </main>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n   isAuthenticated: state.auth.isAuthenticated,\n   loginFailed: state.auth.loginFailed,\n   location: state.auth.location \n});\n\nexport default connect(mapStateToProps, { login })(Login);","import React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { PropTypes } from \"prop-types\";\nimport { register } from \"../../actions/auth\";\n\nexport class Register extends Component {\n    state = {\n        username: '',\n        email: '',\n        password: '',\n        password2: '',\n    }\n\n    static propTypes = {\n        register: PropTypes.func.isRequired,\n        isAuthenticated: PropTypes.bool\n    };\n\n    onSubmit = e => {\n        e.preventDefault();\n        const { username, email, password, password2 } = this.state;\n        if(password !== password2) {\n            console.log('Passwords do not match.') // change to UI message\n        } else {\n            const newUser = {\n                username,\n                email,\n                password\n            }\n            this.props.register(newUser);\n        }\n    }\n\n    onChange = e => this.setState({ [e.target.name]: e.target.value })\n\n    render() {\n        if(this.props.isAuthenticated) {\n            return <Redirect to=\"/classify\" />;\n        }\n        \n        const { username, email, password, password2 } = this.state;\n        return (\n            <div className='body'>\n                <title>IFCB | Register</title>\n                <main className=\"register-main\">\n                <div className=\"header\">\n                    <h3>IFCB Classification</h3>\n                    <ul className=\"navbar\">\n                        <li className=\"nav-item\">\n                            <Link to=\"/register\" className=\"nav-link\">Register</Link>\n                        </li>\n                        <li className=\"nav-item\">\n                            <Link to=\"/login\" className=\"nav-link\">Login</Link>\n                        </li>\n                    </ul>\n                </div>\n                <div className=\"main-container\">\n                    <div className=\"sub-container\">\n                    <h2>Welcome to Manual Classification.</h2>\n                    <p  className='auth-text'>Create an account to start classifying.</p>\n                    <form onSubmit={this.onSubmit}>\n                        <div className=\"form-group\">\n                        <input\n                            type=\"text\"\n                            className=\"form-control\"\n                            name=\"username\"\n                            onChange={this.onChange}\n                            value={username}\n                        />\n                        <label>Username</label>\n                        </div>\n                        <div className=\"form-group\">\n                        <input\n                            type=\"text\"\n                            className=\"form-control\"\n                            name=\"email\"\n                            onChange={this.onChange}\n                            value={email}\n                        />\n                        <label>Email</label>\n                        </div>\n                        <div className=\"form-group\">\n                        <input\n                            type=\"password\"\n                            className=\"form-control\"\n                            name=\"password\"\n                            onChange={this.onChange}\n                            value={password}\n                        />\n                        <label>Password</label>\n                        </div>\n                        <div className=\"form-group\">\n                        <input\n                            type=\"password\"\n                            className=\"form-control\"\n                            name=\"password2\"\n                            onChange={this.onChange}\n                            value={password2}\n                        />\n                        <label>Confirm Password</label>\n                        </div>\n                        <div className=\"form-group\">\n                        <button type=\"submit\" className=\"register-submit\">\n                            Create Account\n                        </button>\n                        </div>\n                    </form>\n                    </div>\n                </div>\n            </main>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    isAuthenticated: state.auth.isAuthenticated \n });\n \n export default connect(mapStateToProps, { register })(Register);","export default __webpack_public_path__ + \"static/media/loader.a069fadb.GIF\";","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { saveLocation } from \"../../actions/auth\";\nimport loader from \"./loader.GIF\";\n\nconst PrivateRoute = ({ component: Component, auth, ...rest }) => (\n    <Route \n        {...rest}\n        render={props => {\n            saveLocation(window.location.pathname);\n            if(auth.isLoading) {\n                return <img src={loader} alt=\"Loading...\" width=\"80\" loop=\"infinite\"></img>\n            } else if(!auth.isAuthenticated) {\n                return <Redirect to=\"/login\" />\n            } else {\n                return <Component {...props} />;\n            }\n        }}\n    />\n);\n\nconst mapStateToProps = state => ({\n    auth: state.auth\n});\n\nexport default connect(mapStateToProps)(PrivateRoute);","import {\n    USER_LOADED,\n    USER_LOADING,\n    PREFERENCES_LOADED,\n    PREFERENCES_ERROR,\n    LOCATION_SAVED,\n    AUTH_ERROR,\n    LOGIN_ATTEMPT,\n    LOGIN_SUCCESS,\n    LOGIN_FAIL,\n    LOGOUT_SUCCESS,\n    REGISTER_SUCCESS,\n    REGISTER_FAIL,\n} from '../actions/types';\n\n\nconst initialState = {\n    token: localStorage.getItem('token'),\n    isAuthenticated: null,\n    loginFailed: false,\n    registerFailed: false,\n    isLoading: false,\n    user: null,\n    preferences: null,\n    location: window.location.pathname,\n    locationCount: 1,\n}\n\nexport default function(state = initialState, action) {\n    switch(action.type) {\n        case USER_LOADING:\n            return {\n                ...state,\n                isLoading: true\n            }\n        case USER_LOADED:\n            return {\n                ...state,\n                isAuthenticated: true,\n                isLoading: false,\n                user: action.payload.user,\n                preferences: action.payload.preferences\n            };\n        case PREFERENCES_LOADED:\n            return {\n                ...state,\n                preferences: action.payload\n            };\n        case LOCATION_SAVED:\n            return {\n                ...state,\n                location: action.payload\n            }\n        case LOGIN_ATTEMPT:\n            return {\n                ...state,\n                ...action.payload,\n                loginFailed: false\n            }\n        case LOGIN_SUCCESS:\n        case REGISTER_SUCCESS:\n            localStorage.setItem('token', action.payload.token);\n            return {\n                ...state,\n                ...action.payload,\n                isAuthenticated: true,\n                isLoading: false\n            }\n        case AUTH_ERROR:\n        case LOGOUT_SUCCESS:\n        case REGISTER_FAIL:\n            localStorage.removeItem('token');\n            return {\n                ...state,\n                token: null,\n                user: null,\n                isAuthenticated: false,\n                isLoading: false,\n                registerFailed: true,\n            }\n        case REGISTER_FAIL:\n            localStorage.removeItem('token');\n            return {\n                ...state,\n                token: null,\n                user: null,\n                isAuthenticated: false,\n                isLoading: false\n            }\n        case LOGIN_FAIL:\n            localStorage.removeItem('token');\n            return {\n                ...state,\n                token: null,\n                user: null,\n                isAuthenticated: false,\n                isLoading: false,\n                loginFailed: true,\n            }\n            \n        default:\n            return state;\n    }\n}\n\n","import {\n    CLASSIFY_PAGE,\n    NOTEBOOK_PAGE,\n    ANALYSIS_PAGE,\n    CLASSDOWNLOAD_PAGE,\n    SEARCH_PAGE,\n} from '../actions/types';\n\nconst initialState = {\n    onClassify: false,\n    onNotebook: false,\n    onAnalysis: false,\n    onClassDownload: false,\n    onSearch: false,\n}\n\nexport default function(state = initialState, action) {\n    switch(action.type) {\n        case CLASSIFY_PAGE:\n            return {\n                ...state,\n                onClassify: true,\n                onNotebook: false,\n                onAnalysis: false,\n                onClassDownload: false,\n                onSearch: false,\n            }\n        case NOTEBOOK_PAGE:\n            return {\n                ...state,\n                onClassify: false,\n                onNotebook: true,\n                onAnalysis: false,\n                onClassDownload: false,\n                onSearch: false,\n            }\n        \n        case ANALYSIS_PAGE:\n            return {\n                ...state,\n                onClassify: false,\n                onNotebook: false,\n                onAnalysis: true,\n                onClassDownload: false,\n                onSearch: false,\n            }\n\n        case CLASSDOWNLOAD_PAGE:\n            return {\n                ...state,\n                onClassify: false,\n                onNotebook: false,\n                onAnalysis: false,\n                onClassDownload: true,\n                onSearch: false,\n            }\n\n        case SEARCH_PAGE:\n            return {\n                ...state,\n                onClassify: false,\n                onNotebook: false,\n                onAnalysis: false,\n                onClassDownload: false,\n                onSearch: true,\n            }\n            \n        default:\n            return state;\n    }\n}\n\n","import {\n    SAVE_PROGRESS,\n    SAVE_SUCCESS,\n    SYNC_PROGRESS,\n    SYNC_SUCCESS,\n    SCALE_CHANGED,\n    NOTES_CHANGED,\n    NOTES_RECORDED,\n    NOTEBOOK_FILTERED,\n    REPLY_RESOLVED,\n    REPLY_OPEN,\n    TARGETS_BASIC_SEARCHED,\n    BINS_BASIC_SEARCHED\n} from '../actions/types';\n\nconst initialState = {\n    isSaving: false,\n    isSyncing: false,\n    scaleEntry: 0.560,\n    noteChangeFlag: true,\n    replyChangeFlag: false,\n    notes: [],\n    targetSearchResults: [[]],\n    binsSearchResults: [[]],\n}\n\nexport default function(state = initialState, action) {\n    switch(action.type) {\n        case SAVE_PROGRESS:\n            return {\n                ...state,\n                isSaving: true\n            }\n        case SAVE_SUCCESS:\n            return {\n                ...state,\n                isSaving: false\n            }\n        case SYNC_PROGRESS:\n            return {\n                ...state,\n                isSyncing: true\n            }\n        case SYNC_SUCCESS:\n            return {\n                ...state,\n                isSyncing: false\n            }\n        case SCALE_CHANGED:\n            return {\n                ...state,\n                scaleEntry: action.payload\n            }\n        case NOTES_CHANGED:\n            return {\n                ...state,\n                noteChangeFlag: true\n            }\n        case NOTES_RECORDED:\n            return {\n                ...state,\n                noteChangeFlag: false\n            }\n        case REPLY_OPEN:\n            return {\n                ...state,\n                noteChangeFlag: true\n            }\n        case REPLY_RESOLVED:\n            return {\n                ...state,\n                noteChangeFlag: false\n            }\n        case NOTEBOOK_FILTERED:\n            return {\n                ...state,\n                notes: action.payload\n            }\n        case TARGETS_BASIC_SEARCHED:\n            return {\n                ...state,\n                targetSearchResults: ((typeof(action.payload) === Array) ? (action.payload) : ([action.payload]))\n            }\n        case BINS_BASIC_SEARCHED:\n            return {\n                ...state,\n                binsSearchResults: ((typeof(action.payload) === Array) ? (action.payload) : ([action.payload]))\n            }\n        default:\n            return state;\n    }\n}","import { combineReducers } from 'redux';\nimport auth from './auth';\nimport menu from './menu';\nimport classify from './classify';\n\nexport default combineReducers({\n  auth,\n  menu,\n  classify,\n});","import { createStore, applyMiddleware } from \"redux\"\nimport thunk from 'redux-thunk';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport rootReducer from './reducers';\n\nconst initialState = {};\n\nconst middleware = [thunk];\n\nconst store = createStore(\n  rootReducer,\n  initialState,\n  composeWithDevTools(applyMiddleware(...middleware)),\n);\n\nexport default store;","import React, { Component } from 'react';\nimport { withRouter } from \"react-router\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\n\nimport Annotations from './components/annotations/Annotations';\nimport Notebook from './components/features/Notebook';\nimport Analysis from './components/features/Analysis';\nimport ClassDownload from './components/features/ClassDownload';\nimport Search from './components/features/Search';\nimport Login from './components/accounts/Login';\nimport Register from './components/accounts/Register';\nimport PrivateRoute from './components/common/PrivateRoute';\n\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport { loadUser } from './actions/auth';\n\nclass App extends Component {\n\n    componentDidMount() {\n        store.dispatch(loadUser());\n    }\n\n    render() {\n        return(\n            <Provider store={store}>\n                <BrowserRouter>\n                    <Switch>\n                        <PrivateRoute \n                            exact path=\"/classify/:timeseries/:file\" \n                            key={window.location.pathname}\n                            component={withRouter(Annotations)} />\n                        <PrivateRoute \n                            exact path=\"/classify/:timeseries/:file/:target\" \n                            key={window.location.pathname}\n                            component={withRouter(Annotations)} />\n                        <PrivateRoute exact path=\"/classify/\" component={Annotations} />\n                        <PrivateRoute exact path=\"/notebook/\" component={Notebook} />\n                        <PrivateRoute exact path=\"/analysis\" component={Analysis} />\n                        <PrivateRoute exact path=\"/analysis/classdownload\" component={ClassDownload} />\n                        <PrivateRoute exact path=\"/analysis/search\" component={Search} />\n                        <Route exact path=\"/register\" component={Register} />\n                        <Route exact path=\"/login\" component={Login} />\n                        <PrivateRoute exact path=\"/\" component={Annotations} />\n                    </Switch>\n                </BrowserRouter>\n            </Provider>\n        );\n    }\n\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/master.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <App/>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}