(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,t,s){},101:function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),a=s(26),o=s.n(a),r=(s(63),s(6)),c=s(7),l=s(9),d=s(8),u=s(18),h=s(19),p=s(57),b=s(32),j=s(11),m=s.n(j),f=s(17),g="USER_LOADING",O="USER_LOADED",y="LOCATION_SAVED",v="AUTH_ERROR",x="LOGIN_ATTEMPT",N="LOGIN_SUCCESS",C="LOGIN_FAIL",k="LOGOUT_SUCCESS",S="REGISTER_SUCCESS",w="REGISTER_FAIL",A="CLASSIFY_PAGE",F="NOTEBOOK_PAGE",I="ANALYSIS_PAGE",E="CLASSDOWNLOAD_PAGE",B="SEARCH_PAGE",T="SAVE_SUCCESS",D="SAVE_PROGRESS",L="SYNC_SUCCESS",R="SYNC_PROGRESS",H="NOTES_CHANGED",P="NOTES_RECORDED",U="REPLY_OPEN",G="REPLY_RESOLVED",M="NOTEBOOK_FILTERED",J="TARGETS_BASIC_SEARCHED",Y="BINS_BASIC_SEARCHED",Q=function(e){var t=e().auth.token,s={headers:{"Content-Type":"application/json"}};return t&&(s.headers.Authorization="Token ".concat(t)),s},X=s(0),q=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,s=e.user;if(this.props.onClassify)return Object(X.jsx)(u.a,{to:"/classify"});if(this.props.onNotebook)return Object(X.jsx)(u.a,{to:"/notebook/"});if(this.props.onAnalysis)return Object(X.jsx)(u.a,{to:"/analysis"});var n=Object(X.jsxs)("ul",{className:"logoutbar",children:[Object(X.jsx)("span",{className:"nav-hello",children:Object(X.jsx)("strong",{className:"nav-hello",children:s?"Welcome, ".concat(s.username):""})}),Object(X.jsxs)("div",{className:"login-navbar",children:[Object(X.jsx)("li",{children:Object(X.jsx)("button",{onClick:this.props.goto_classify,className:"login-nav-link",children:"Classify"})}),Object(X.jsx)("li",{children:Object(X.jsx)("button",{onClick:this.props.goto_notebook,className:"login-nav-link",children:"Notebook"})}),Object(X.jsx)("li",{children:Object(X.jsx)("button",{onClick:this.props.goto_analysis,className:"login-nav-link",children:"Analysis"})}),Object(X.jsx)("li",{children:Object(X.jsx)("a",{href:"http://ifcb-classification.herokuapp.com/admin/",className:"login-nav-link",children:"Admin"})})]}),Object(X.jsx)("li",{className:"nav-item",children:Object(X.jsx)("button",{onClick:this.props.logout,to:"/login",className:"logout",children:"Logout"})})]}),i=Object(X.jsxs)("ul",{className:"navbar",children:[Object(X.jsx)("li",{className:"nav-item",children:Object(X.jsx)(h.b,{to:"/register",className:"nav-link",children:"Register"})}),Object(X.jsx)("li",{className:"nav-item",children:Object(X.jsx)(h.b,{to:"/login",className:"nav-link",children:"Login"})})]});return Object(X.jsxs)("header",{children:[Object(X.jsx)("h3",{children:"IFCB Classification"}),t?n:i]})}}]),s}(n.Component),Z=Object(f.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e,t){m.a.post("/api/auth/logout/",null,Q(t)).then((function(t){e({type:k})}))}},goto_classify:function(){return function(e){e({type:A})}},goto_notebook:function(){return function(e){e({type:F})}},goto_analysis:function(){return function(e){e({type:I})}}})(q),_=function(){return function(e,t){e({type:H})}},W=function(){return function(e,t){e({type:P})}},V=function(e,t,s,n,i,a,o,r){return function(c,l){var d=JSON.stringify({author:e,entry:t,parent:s,replies:n,timeseries:i,ifcb:a,file:o,image:r});m.a.post("/add/note/",d,{headers:{"Content-Type":"application/json"}},Q(l)).catch((function(e){return console.log(e)}))}},K=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={entry:""},e.onChange=function(t){return e.setState({entry:t.target.value})},e.onSubmit=function(t){t.preventDefault(),e.props.addBinNote(e.props.user,e.state.entry,e.props.note.id,[],e.props.timeseries,e.props.ifcb,e.props.file,e.props.image),e.props.sendNotesChange(),document.getElementById("note-form").reset(),document.getElementById("reply-form"+e.props.note.id).classList.toggle("show")},e}return Object(c.a)(s,[{key:"reply",value:function(e){document.getElementById("reply-form"+e).classList.toggle("show"),this.props.sendReplyOpen()}},{key:"delete",value:function(e){this.props.deleteBinNote(e),this.props.sendNotesChange()}},{key:"flag",value:function(e){this.props.flagBinNote(e),this.props.sendNotesChange()}},{key:"getFlagButton",value:function(e){return e?"Unflag":"Flag"}},{key:"render",value:function(){var e=this,t=this.props.note,s=t.id,n=t.author,i=t.date,a=t.entry,o=(t.parent,t.replies,t.timeseries,t.file,t.image,t.flag);return Object(X.jsxs)("div",{className:this.props.type+"-note",id:s,children:[Object(X.jsxs)("div",{className:this.props.type+"-note-header",children:[Object(X.jsx)("p",{className:"note-author",children:n}),Object(X.jsx)("p",{className:"note-date",children:i.slice(0,10)}),o?Object(X.jsx)("div",{className:"flag-small"}):Object(X.jsx)("div",{})]}),Object(X.jsx)("p",{className:this.props.type+"-note-entry",children:a}),"bin"===this.props.type?Object(X.jsx)("button",{className:"reply-button",onClick:function(){return e.reply(s)},children:"Reply"}):Object(X.jsx)("div",{}),n===this.props.user?Object(X.jsx)("button",{className:"reply-button",onClick:function(){return e.delete(s)},children:"Delete"}):Object(X.jsx)("div",{}),n===this.props.user?Object(X.jsx)("button",{className:"reply-button",onClick:function(){return e.flag(s)},children:this.getFlagButton(o)}):Object(X.jsx)("div",{}),Object(X.jsx)("div",{className:"reply-form",id:"reply-form"+s,children:Object(X.jsx)("form",{onSubmit:this.onSubmit,id:"note-form",children:Object(X.jsxs)("div",{className:"new-note",children:[Object(X.jsx)("input",{type:"textarea",rows:"10",className:"note-input",name:"note-entry",id:"note-entry",onChange:this.onChange,value:this.entry}),Object(X.jsx)("button",{type:"submit",className:this.props.type+"-note-submit"})]})})})]})}}]),s}(i.a.Component),z=Object(f.b)((function(e){return{notes:e.classify.notes}}),{addBinNote:V,deleteBinNote:function(e){return function(t,s){m.a.delete("/delete/note/"+e+"/",Q(s)).catch((function(e){return console.log(e)}))}},flagBinNote:function(e){return function(t,s){m.a.put("/flag/note/"+e+"/",Q(s)).catch((function(e){return console.log(e)}))}},sendNotesChange:_,sendReplyOpen:function(){return function(e,t){e({type:U})}}})(K),$=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={entry:"",parents:[],notes:[]},e.onChange=function(t){return e.setState({entry:t.target.value})},e.onSubmit=function(t){t.preventDefault(),e.props.addBinNote(e.props.user.username,e.state.entry,null,[],e.props.timeseries,e.props.ifcb,e.props.file,e.props.image),e.props.sendNotesChange(),e.getNotes(),document.getElementById("note-form").reset()},e}return Object(c.a)(s,[{key:"getNotes",value:function(){var e=this;m.a.get("/process/note/"+this.props.timeseries+"/"+this.props.file+"/"+this.props.image+"/").then((function(t){e.setState({notes:t.data})})).catch((function(e){return console.log(e)}))}},{key:"renderNote",value:function(e,t){var s=this;if(null!==e.parent){for(var n=e,i=0;null!==n.parent;){n=this.state.notes[this.state.notes.findIndex((function(e){return e.id===n.parent}))];i+=1}if(t!==i)return}return Object(X.jsxs)("div",{children:[Object(X.jsx)(z,{note:e,user:this.props.user.username,timeseries:this.props.timeseries,ifcb:this.props.ifcb,file:this.props.file,type:this.props.type,image:this.props.image}),Object(X.jsx)("div",{className:"reply",style:{margin:"0 0 0 "+String(t+1)+"vw"},children:0!==e.replies.length?e.replies.map((function(e){return s.renderNote(e,t+1)})):Object(X.jsx)("div",{})})]})}},{key:"componentDidMount",value:function(){this.getNotes()}},{key:"componentDidUpdate",value:function(){this.props.noteChangeFlag&&(this.props.receiveNotesChange(),this.getNotes()),this.props.replyChangeFlag&&(this.props.receiveReplyOpen(),this.getNotes())}},{key:"render",value:function(){var e=this;return Object(X.jsxs)("div",{className:this.props.type+"-notes-content",children:["bin"===this.props.type?Object(X.jsx)("div",{className:"refresh",onClick:function(){return e.getNotes()}}):Object(X.jsx)("div",{}),Object(X.jsx)("div",{id:"note-container",children:this.state.notes.map((function(t){return e.renderNote(t,0)}))}),Object(X.jsx)("div",{className:this.props.type+"-note-form",children:Object(X.jsxs)("form",{onSubmit:this.onSubmit,id:"note-form",children:[Object(X.jsxs)("div",{className:this.props.type+"-new-note",children:[Object(X.jsx)("input",{type:"textarea",rows:"10",className:this.props.type+"-note-input",name:this.props.type+"-note-entry",id:"note-entry",onChange:this.onChange,value:this.entry}),Object(X.jsx)("button",{type:"submit",className:this.props.type+"-note-submit"})]}),this.state.notes===[]?Object(X.jsx)("p",{className:"bin-note-label",children:"Add a Note"}):Object(X.jsx)("div",{})]})})]})}}]),s}(i.a.Component),ee=Object(f.b)((function(e){return{noteChangeFlag:e.classify.noteChangeFlag,replyChangeFlag:e.classify.replyChangeFlag,user:e.auth.user}}),{addBinNote:V,sendNotesChange:_,receiveNotesChange:W,receiveReplyOpen:function(){return function(e,t){e({type:G})}}})($),te=(s(28),function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=this.props.nameSpace+this.props.timestamp+"_"+this.props.ifcb+"_"+this.props.targetNum+".jpg";return Object(X.jsx)("img",{src:e,className:"image",alt:this.props.classification,id:this.props.targetNum+"-image",style:{height:String(Number(this.props.height)*this.props.scale)+"vw"}})}}]),s}(i.a.Component)),se=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"renderImage",value:function(){return Object(X.jsx)(te,{nameSpace:"http://128.114.25.154:8888/"+this.props.timeseries+"/",timestamp:this.props.timestamp,timeseries:this.props.timeseries,ifcb:this.props.ifcb,targetNum:this.props.targetNum,classification:this.props.class_name,height:this.props.height,scale:this.props.scale})}},{key:"getHeight",value:function(){return this.props.height<0?"5":String(Number(this.props.height)*this.props.scale+2.25)}},{key:"getWidth",value:function(){return this.props.width<0?"5":String(Number(this.props.width)*this.props.scale)}},{key:"handleInfoClick",value:function(){this.props.infoChange(this.props.targetNum,!1,!0),document.getElementById(this.props.targetNum+"-info").classList.toggle("show-info"),document.getElementById(this.props.targetNum+"-image").classList.toggle("hide"),document.getElementById(this.props.targetNum).classList.toggle("hide")}},{key:"render",value:function(){var e=this,t={height:this.getHeight()+"vw",width:this.getWidth()+"vw"};return Object(X.jsx)("div",{children:Object(X.jsx)("div",{className:"plankton-button",id:"plankton-button",onClick:function(){return e.props.onClick(e.props.targetNum)},children:Object(X.jsxs)("div",{className:"plankton",children:[this.renderImage(),Object(X.jsx)("div",{className:"info",onMouseEnter:function(){return e.props.infoChange(e.props.targetNum,!1,!1)},onMouseLeave:function(){return e.props.infoChange(e.props.targetNum,!0,!1)},onClick:function(){return e.handleInfoClick()}}),Object(X.jsxs)("div",{className:"info-div",id:this.props.targetNum+"-info",style:t,children:[Object(X.jsx)("p",{className:"classification-info",children:this.props.class_name}),Object(X.jsx)("p",{className:"target-num-info",children:"Target "+this.props.targetNum}),Object(X.jsx)("p",{className:"editor-info",children:"Classified by "+this.props.editor+",\n"+this.props.date}),this.props.infoShowing.includes(this.props.targetNum)?Object(X.jsx)(ee,{timeseries:this.props.timeseries,ifcb:this.props.ifcb,file:this.props.file,type:"target",image:this.props.targetNum}):Object(X.jsx)("div",{})]}),Object(X.jsx)("div",{className:"id",id:this.props.targetNum,children:Object(X.jsx)("p",{className:"id-text",id:this.props.targetNum+"-text",children:this.props.class_abbr})})]})})})}}]),s}(i.a.Component),ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAVCAYAAABc6S4mAAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAGKADAAQAAAABAAAAFQAAAAA5bZMmAAACKUlEQVQ4EZVV0VEbQQzV7sEP4Bk64PzpeMyQCkIqgFQQdxCoIEcFdgcMFUAHwR1kbA5/2u4gGUx+8N1Gb+O70e7pnGFnYLVP0tNqJZ3NYrE4fl2v7w3ROTm3pCT50u/3f9I7V57nZ64sR+BxRI/G2mvw2D/r9YMnB6ExqSuKHwj6Tn6isqx5PF9R3IPD8t8nSWaMOX59eRlL7H9yPptlbHMS2PFlcVEEmAQKPnCQr/P5PI1x7QwS59w3Rbfqdru/LEfIFCUVm82thscYP3GGrGOc65kB4+ci4hQfeQueCjgH/9wbDKBTF7IsN5uFolz1B4MUOJ6I7N7eEHu8SqJRjMlz+fam1opJh5WdD9Dr9Zb8jncVKPazfDqtjQVO89nsnIt1IbGtPJFZ+wBQHHY6V/xuvxWH7wpGnF2m4WTtlcTrAKg436iZMrfbtg1rv+fp9JIPjZrhFeIhrQPA++DoaKxlgTaUw+e0i7B/sr+fgUeuIIDPgihIEcZoQ7Qj5OenJ+hPIEfrBrWMsH9tGoP8JDBsklj7EZ+SRt9z7Q46nXR7wYAuyKDSMDisZLmr5GzAH7ZMI4evHzRJUsltw1fpxV4PlcBqUc3Aa6N2qz0iwTjXqJk0aQ2AdmsZPuk/+XB6+iCBWG4NAEPfdvrweR52zryw49/OAL7tWnoe2clPQluMnQHg5IePaBUQcFbaUAU220NrF0ljTDF+5bj/U7750iTJOP4kSHsp/wWEFsqR3igYKgAAAABJRU5ErkJggg==",ie=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"handleDropdown",value:function(){document.getElementById("timeseries_dropdown").classList.toggle("show"),document.getElementById("timeseries_label").classList.toggle("hide"),document.getElementById("timeseries_bar").classList.toggle("accommodate-dropdown")}},{key:"render",value:function(){var e=this,t=this.props.options.map((function(t){return Object(X.jsx)("li",{onClick:function(){return e.props.onClick(t)},children:Object(X.jsx)("button",{id:t,children:t})},t)}));return Object(X.jsxs)("div",{children:[Object(X.jsxs)("div",{className:"time time-series",id:"timeseries_bar",children:[Object(X.jsx)("p",{className:"time-selection",children:this.props.timeseries}),Object(X.jsx)("img",{src:ne,className:"time-icon",alt:"Select time series",onClick:function(){return e.handleDropdown()}})]}),Object(X.jsx)("div",{className:"time-dropdown time-series",id:"timeseries_dropdown",children:Object(X.jsx)("ul",{className:"timeseries-option",children:t})}),Object(X.jsx)("p",{className:"time-label",id:"timeseries_label",children:"Time Series"})]})}}]),s}(i.a.Component),ae=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"handleDropdown",value:function(){document.getElementById("year_dropdown").classList.toggle("show"),document.getElementById("year_label").classList.toggle("hide"),document.getElementById("year_bar").classList.toggle("accommodate-dropdown")}},{key:"render",value:function(){var e=this,t=this.props.options.map((function(t){return Object(X.jsx)("li",{onClick:function(){return e.props.onClick(t)},children:Object(X.jsx)("button",{id:t,children:t})},t)}));return Object(X.jsxs)("div",{children:[Object(X.jsxs)("div",{className:"time",id:"year_bar",children:[Object(X.jsx)("p",{className:"time-selection",children:this.props.year}),Object(X.jsx)("img",{src:ne,className:"time-icon",alt:"Select Year",onClick:function(){return e.handleDropdown()}})]}),Object(X.jsx)("div",{className:"time-dropdown",id:"year_dropdown",children:Object(X.jsx)("ul",{className:"year-option",children:t})}),Object(X.jsx)("p",{className:"time-label",id:"year_label",children:"Year"})]})}}]),s}(i.a.Component),oe=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"handleDropdown",value:function(){document.getElementById("day_dropdown").classList.toggle("show"),document.getElementById("day_label").classList.toggle("hide"),document.getElementById("day_bar").classList.toggle("accommodate-dropdown")}},{key:"render",value:function(){var e=this,t=this.props.options.map((function(t){return Object(X.jsx)("li",{onClick:function(){return e.props.onClick(t)},children:Object(X.jsx)("button",{id:t,children:t})},t)}));return Object(X.jsxs)("div",{children:[Object(X.jsxs)("div",{className:"time",id:"day_bar",children:[Object(X.jsx)("p",{className:"time-selection",id:"day_text",children:this.props.day}),Object(X.jsx)("img",{src:ne,className:"time-icon",alt:"Select Day",onClick:function(){return e.handleDropdown()}})]}),Object(X.jsx)("div",{className:"time-dropdown",id:"day_dropdown",children:Object(X.jsx)("ul",{className:"year-option",children:t})}),Object(X.jsx)("p",{className:"time-label",id:"day_label",children:"Day"})]})}}]),s}(i.a.Component),re=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"handleHover",value:function(e){this.props.onHover(e)}},{key:"render",value:function(){var e=this;return Object(X.jsxs)("div",{className:"bar-container",children:[Object(X.jsx)("div",{className:"day",id:"day"+this.props.number,children:this.props.day}),Object(X.jsx)("div",{className:"bar",id:"bar"+this.props.number,onClick:function(){return e.props.onClick(e.props.number)},onMouseEnter:function(){return e.handleHover(e.props.number)},onMouseLeave:function(){return e.handleHover(e.props.current)},style:{height:String(8*this.props.height)+"vw"}})]})}}]),s}(i.a.Component),ce=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"handleDropdown",value:function(){document.getElementById("file_dropdown").classList.toggle("show"),document.getElementById("file_label").classList.toggle("hide"),document.getElementById("file_bar").classList.toggle("accommodate-dropdown")}},{key:"render",value:function(){var e=this,t=this.props.options.map((function(t){return Object(X.jsx)("li",{onClick:function(){return e.props.onClick(t)},children:Object(X.jsx)("button",{id:t,children:t})},t)})),s=this.props.file,n=s.slice(9,12)+":"+s.slice(12,14)+":"+s.slice(14,16)+"Z";return Object(X.jsxs)("div",{children:[Object(X.jsxs)("div",{className:"time",id:"file_bar",children:[Object(X.jsx)("p",{className:"time-selection",children:n}),Object(X.jsx)("img",{src:ne,className:"time-icon",alt:"Select File",onClick:function(){return e.handleDropdown()}})]}),Object(X.jsx)("div",{className:"time-dropdown",id:"file_dropdown",children:Object(X.jsx)("ul",{className:"file-option",children:t})}),Object(X.jsx)("p",{className:"time-label",id:"file_label",children:"File"})]})}}]),s}(i.a.Component),le=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(X.jsxs)("div",{children:[Object(X.jsx)("div",{className:"set",id:this.props.barID,onClick:function(){return e.props.onClick(e.props.order)},children:Object(X.jsx)("p",{className:"time-selection",children:this.props.order})}),Object(X.jsx)("p",{className:"time-label",id:this.props.labelID,children:this.props.type})]})}}]),s}(i.a.Component),de=s(27),ue=s.p+"static/media/loader.a069fadb.GIF",he=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){return Object(X.jsxs)("div",{className:"drag-box",children:[Object(X.jsx)("div",{className:"micrometer-block",style:{width:String(34*this.props.scale)+"vw"}}),Object(X.jsx)("p",{className:"micrometer-text",children:"10\xb5m"})]})}}]),s}(i.a.Component),pe=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t=this.props.classes.map((function(t){return Object(X.jsx)("li",{children:Object(X.jsx)("button",{id:t,onClick:function(){return e.props.onClick(t)},children:t})},t)}));return Object(X.jsxs)("div",{className:"sidebar",children:[Object(X.jsxs)("div",{className:"class-menu",children:[Object(X.jsxs)("div",{className:"control-box",children:[Object(X.jsx)("div",{className:"annotation-control",onClick:function(){return e.props.handleSelectAllClick()},children:Object(X.jsx)("p",{className:"control-text",children:"Select All"})}),Object(X.jsx)("div",{className:"annotation-control",onClick:function(){return e.props.handleUndoClick()},children:Object(X.jsx)("p",{className:"control-text",children:"Undo"})})]}),Object(X.jsx)("ul",{className:"class-menu-options",children:t})]}),Object(X.jsx)(he,{scale:this.props.scale})]})}}]),s}(i.a.Component),be=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(X.jsx)("div",{className:this.props.className,onClick:function(){return e.props.onClick()},children:Object(X.jsx)("p",{children:this.props.text})})}}]),s}(i.a.Component),je=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).onTargetJumpChange=function(e){return n.setState({targetJumpEntry:e.target.value})},n.onTargetJumpSubmit=function(e){e.preventDefault(),n.setState({scrollToIndex:Number(n.state.targetJumpEntry)})},n.state={loading:!0,newFile:"",newTimeSeries:"",classes:[],classAbbrs:[],classPicker:"Unclassified",classMark:"UNC",planktonClickEnabled:!0,infoShowing:[],bin:{timeseries:"",ifcb:"",year:"",day:"",file:""},timeSeriesOptions:[],yearOptions:[],dayOptions:[],barHeights:[],fileOptions:[],setOptions:[],filledDays:[],targets:[],history:[],rows:[],scrollToIndex:-1,targetJumpEntry:"",scale:.056,set:1,setDisplay:1,group:"Class",sort:"A to Z",sortCode:"AZ",lastScroll:0,dayOption:"",previous:"Previous",next:"Next"},n.onTargetJumpSubmit=n.onTargetJumpSubmit.bind(Object(b.a)(n)),n.clearScrollToIndex=n.clearScrollToIndex.bind(Object(b.a)(n)),n}return Object(c.a)(s,[{key:"closeDropdown",value:function(e){document.getElementById(e+"_dropdown").classList.contains("show")&&(document.getElementById(e+"_dropdown").classList.toggle("show"),document.getElementById(e+"_label").classList.toggle("hide"),document.getElementById(e+"_bar").classList.toggle("accommodate-dropdown"))}},{key:"getNewTimeSeries",value:function(e){var t=this;this.closeDropdown("timeseries"),this.setState({loading:!0}),m.a.get("/process/timeseries/"+e+"/").then((function(s){t.setState({newTimeSeries:e,newFile:s.data.bin.file})})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!1});var t=this.props.location.pathname.split("/");if(t.length<4)this.getNewTimeSeries("IFCB104");else{var s=t[2],n=t[3],i=t[4];switch(this.setState({sortCode:i}),i){case"AZ":this.setState({group:"Class",sort:"A to Z"});break;case"ZA":this.setState({group:"Class",sort:"Z to A"});break;case"LS":this.setState({group:"Size",sort:"L to S"});break;case"SL":this.setState({group:"Size",sort:"S to L"});break;default:return void this.setState({bin:{timeseries:"",ifcb:"",year:"",day:"",file:"Not Found"}})}m.a.get("/api/timeseries/").then((function(t){e.setState({timeSeriesOptions:t.data.map((function(e){return e.name}))})})).catch((function(e){return console.log(e)})),this.setState({loading:!0}),m.a.get("/classes/IFCB104/").then((function(t){e.setState({classes:t.data.map((function(e){return e.display_name.replace("_"," ")})),classAbbrs:t.data.map((function(e){return e.abbr}))})})).catch((function(e){return console.log(e)})),m.a.get("/process/file/"+s+"/"+n+"/"+i+"/"+Math.round(1e4*this.state.scale)+"/").then((function(t){e.setState({bin:t.data.bin,yearOptions:t.data.options.year_options.reverse(),barHeights:t.data.options.day_options[0],dayOptions:t.data.options.day_options[1],fileOptions:t.data.options.file_options,setOptions:t.data.options.set_options,rows:t.data.options.rows,filledDays:t.data.options.filled_days,dayOption:t.data.bin.day}),m.a.get("/process/targets/"+s+"/"+n+"/"+i+"/").then((function(t){e.setState({targets:t.data,history:[JSON.stringify(t.data)],loading:!1})}))})).catch((function(t){console.log(t),e.setState({bin:{timeseries:"",ifcb:"",year:"",day:"",file:"Not Found"}})}))}}},{key:"componentDidUpdate",value:function(e){this.props.match.url!==e.match.url&&this.props.history.go(0)}},{key:"getNewYear",value:function(e){var t=this;this.closeDropdown("year"),this.setState({loading:!0}),m.a.get("/process/year/"+this.state.bin.timeseries+"/"+e+"/").then((function(e){t.setState({newTimeSeries:t.state.bin.timeseries,newFile:e.data.bin.file})})).catch((function(e){return console.log(e)}))}},{key:"handleBarHover",value:function(e){this.setState({dayOption:this.state.dayOptions[e]})}},{key:"handleBar",value:function(e){var t=this,s=document.getElementById("histogram_dropdown").classList;s.contains("show-day")&&s.toggle("show-day"),this.closeDropdown("day"),this.setState({loading:!0}),m.a.get("/process/day/"+this.state.bin.timeseries+"/"+this.state.bin.year+"/"+e+"/").then((function(e){t.setState({newTimeSeries:t.state.bin.timeseries,newFile:e.data.bin.file})})).catch((function(e){return console.log(e)}))}},{key:"handleNewDay",value:function(e){document.body.scrollTop=0,document.documentElement.scrollTop=0;var t=this.state.dayOptions.findIndex((function(t){return t===e}));this.handleBar(t)}},{key:"handleNewFile",value:function(e){document.body.scrollTop=0,document.documentElement.scrollTop=0,this.closeDropdown("file");var t="D"+this.state.bin.year+this.state.bin.day.slice(0,2)+this.state.bin.day.slice(3,5)+e.slice(0,3)+e.slice(4,6)+e.slice(7,9);this.setState({newTimeSeries:this.state.bin.timeseries,newFile:t})}},{key:"handleNewGroup",value:function(e){var t="Class"===this.state.group?"LS":"AZ";this.setState({loading:!0,newTimeSeries:this.state.bin.timeseries,newFile:this.state.bin.file,sortCode:t})}},{key:"handleNewSort",value:function(e){var t="Class"===this.state.group?"A to Z"===this.state.sort?"ZA":"AZ":"L to S"===this.state.sort?"SL":"LS";this.setState({loading:!0,newTimeSeries:this.state.bin.timeseries,newFile:this.state.bin.file,sortCode:t})}},{key:"handleMouseOver",value:function(e){e.style.backgroundColor="#16609F"}},{key:"handleMouseOut",value:function(e){e.style.backgroundColor="#079CCC"}},{key:"handleMenuClick",value:function(e){var t=document.getElementById(this.state.classPicker);t.style.backgroundColor="#079CCC",t.addEventListener("mouseover",this.handleMouseOver(t)),t.addEventListener("mouseout",this.handleMouseOut(t));for(var s=document.getElementsByClassName("id"),n=document.getElementsByClassName("id-text"),i=0;i<s.length;i++)"#FFFFFF"!==s[i].style.backgroundColor&&(s[i].style.backgroundColor="#FFFFFF",n[i].style.color="#4E4E4E");this.setState({classPicker:e,classMark:this.state.classAbbrs[this.state.classes.findIndex((function(t){return t===e}))]});var a=document.getElementById(e);a.removeEventListener("mouseout",this.handleMouseOut(a)),a.style.backgroundColor="#16609F";var o,r=Object(p.a)(this.state.targets);try{for(r.s();!(o=r.n()).done;){var c=o.value;if(c.class_name===e){var l=document.getElementById(c.number),d=document.getElementById(c.number+"-text");l.style.backgroundColor="#16609F",d.style.color="#FFFFFF"}}}catch(u){r.e(u)}finally{r.f()}}},{key:"backToTop",value:function(){document.body.scrollTop>0||document.documentElement.scrollTop>0?(0!==document.body.scrollTop?this.setState({lastScroll:document.body.scrollTop}):this.setState({lastScroll:document.documentElement.scrollTop}),document.body.scrollTop=0,document.documentElement.scrollTop=0):(document.body.scrollTop=this.state.lastScroll,document.documentElement.scrollTop=this.state.lastScroll)}},{key:"flipBackToTop",value:function(){null!==document.getElementById("to-top")&&(document.body.scrollTop>0||document.documentElement.scrollTop>0?document.getElementById("to-top").classList.remove("flip"):document.getElementById("to-top").classList.contains("flip")||document.getElementById("to-top").classList.add("flip"))}},{key:"handleSelectAllClick",value:function(){for(var e=this,t=this.state.targets,s=this.state.classPicker,n=this.state.classAbbrs[this.state.classes.findIndex((function(t){return t===e.state.classPicker}))],i=0;i<t.length;i++){t[i].class_name=s,t[i].class_abbr=n,t[i].editor=this.props.user.username;var a=document.getElementById(t[i].number),o=document.getElementById(t[i].number+"-text");a.style.backgroundColor="#16609F",o.style.color="#FFFFFF"}this.setState({targets:t,history:this.state.history.concat([JSON.stringify(t)])}),this.props.save(t,this.state.bin.timeseries,this.state.bin.file,this.state.sortCode)}},{key:"handleUndoClick",value:function(){if(this.state.history.length>1){var e=this.state.history.slice(0,this.state.history.length-1),t=JSON.parse(e[e.length-1]),s=this.state.rows;this.setState({rows:[]}),this.setState({targets:t,history:e}),this.setState({rows:s}),this.props.save(t,this.state.bin.timeseries,this.state.bin.file,this.state.sortCode)}}},{key:"handleSyncClick",value:function(){var e=this;document.getElementById("sync").classList.toggle("syncing"),this.setState({rows:[]}),this.props.sync(this.state.bin.timeseries,this.state.bin.year,this.state.bin.day,this.state.bin.file),m.a.get("/process/targets/"+this.state.bin.timeseries+"/"+this.state.bin.file+"/"+this.state.sortCode+"/").then((function(t){e.setState({targets:t.data,history:e.state.history.concat([JSON.stringify(t.data)])})})),m.a.get("process/rows/"+this.state.bin.timeseries+"/"+this.state.bin.file+"//"+this.state.sortCode+"/"+Math.round(1e4*this.state.scale)+"/").then((function(t){e.setState({rows:t.data.options.rows,loading:!1})})).catch((function(e){return console.log(e)})),document.getElementById("sync").classList.toggle("syncing")}},{key:"handleHistogramClick",value:function(){var e=document.getElementById("histogram");document.getElementById("histogram_dropdown").classList.toggle("show-day"),e.scrollTop=e.scrollHeight}},{key:"handleRowClick",value:function(e){var t=this,s=this.state.targets,n=this.state.rows[e];for(var i in n){var a=n[i];s[a].class_name=this.state.classPicker,s[a].class_abbr=this.state.classAbbrs[this.state.classes.findIndex((function(e){return e===t.state.classPicker}))],s[a].editor=this.props.user.username;var o=document.getElementById(s[a].number),r=document.getElementById(s[a].number+"-text");o.style.backgroundColor="#16609F",r.style.color="#FFFFFF"}this.setState({targets:s,history:this.state.history.concat([JSON.stringify(s)])});var c=n[0],l=n[i],d=s.slice(c,l+1);this.props.classifyRow(d,this.state.bin.timeseries,this.state.bin.file,this.state.sortCode,c,l)}},{key:"disablePlanktonClick",value:function(e,t,s){var n=document.getElementById(e+"-info").classList;if(s||n.contains("show-info"))this.state.infoShowing.includes(e)||this.setState({infoShowing:this.state.infoShowing.concat([e])}),this.setState({planktonClickEnabled:!1});else{var i=this.state.infoShowing.filter((function(t){return t!==e}));this.setState({planktonClickEnabled:t,infoShowing:i})}}},{key:"handlePlanktonClick",value:function(e){var t=this;if(this.state.planktonClickEnabled){var s=this.state.targets,n=s.findIndex((function(t){return t.number===e}));s[n].class_name=this.state.classPicker,s[n].class_abbr=this.state.classAbbrs[this.state.classes.findIndex((function(e){return e===t.state.classPicker}))],s[n].editor=this.props.user.username;var i=this.state.history;this.setState({history:i.concat([JSON.stringify(s)]),targets:s});var a=document.getElementById(s[n].number),o=document.getElementById(s[n].number+"-text");a.style.backgroundColor="#16609F",o.style.color="#FFFFFF",this.props.classifyTarget(s[n],this.state.bin.timeseries,this.state.bin.file,s[n].number)}}},{key:"showNotes",value:function(){document.getElementById("note-dropdown").classList.toggle("show");var e=document.getElementById("show-notes-button");"Show Notes"===e.innerHTML?e.innerHTML="Hide Notes":e.innerHTML="Show Notes"}},{key:"hideInfo",value:function(){var e=document.getElementById("hide-info-button");"Hide Info"===e.innerHTML?e.innerHTML="Show Info":e.innerHTML="Hide Info";for(var t=document.getElementsByClassName("info"),s=0;s<t.length;s++)t[s].classList.toggle("hide")}},{key:"handleScale",value:function(e){var t=this,s=this.state.scale,n=0;"up"===e?n=s+.01:"down"===e&&(n=s-.01),m.a.get("process/rows/"+this.state.bin.timeseries+"/"+this.state.bin.file+"//"+this.state.sortCode+"/"+Math.round(1e4*n)+"/").then((function(e){t.setState({scale:n,rows:e.data.options.rows})}))}},{key:"handleDownload",value:function(){document.getElementById("download-src").src="http://ifcb-classification.herokuapp.com/mat/"+this.state.bin.ifcb+"/"+this.state.bin.file+"/"}},{key:"renderTimeSeriesControl",value:function(){var e=this;return Object(X.jsx)(ie,{timeseries:this.state.bin.timeseries,options:this.state.timeSeriesOptions,onClick:function(t){return e.getNewTimeSeries(t)}})}},{key:"renderYearControl",value:function(){var e=this;return Object(X.jsx)(ae,{year:this.state.bin.year,options:this.state.yearOptions,onClick:function(t){return e.getNewYear(t)}})}},{key:"renderDayControl",value:function(){var e=this,t=this.state.filledDays.slice().reverse();return Object(X.jsx)(oe,{day:this.state.bin.day,options:t,onClick:function(t){return e.handleNewDay(t)}})}},{key:"renderFileControl",value:function(){var e=this;return Object(X.jsx)(ce,{file:this.state.bin.file,options:this.state.fileOptions,onClick:function(t){return e.handleNewFile(t)}})}},{key:"renderSort",value:function(){var e=this;return Object(X.jsx)(le,{type:"Sort",labelID:"sort_label",barID:"sort_bar",order:this.state.sort,onClick:function(t){return e.handleNewSort(t)}})}},{key:"renderGroup",value:function(){var e=this;return Object(X.jsx)(le,{type:"Group",labelID:"group_label",barID:"group_bar",order:this.state.group,onClick:function(t){return e.handleNewGroup(t)}})}},{key:"renderSync",value:function(){var e=this;return Object(X.jsx)("div",{className:"round-button sync",id:"sync-button",onClick:function(){return e.handleSyncClick()}})}},{key:"renderDownload",value:function(){var e=this;return Object(X.jsx)("div",{className:"round-button download",onClick:function(){return e.handleDownload()},children:Object(X.jsx)("div",{style:{display:"none"},children:Object(X.jsx)("iframe",{id:"download-src"})})})}},{key:"renderClassMenu",value:function(){var e=this;return Object(X.jsx)(pe,{classes:this.state.classes,onClick:function(t){return e.handleMenuClick(t)},handleSelectAllClick:function(){return e.handleSelectAllClick()},handleUndoClick:function(){return e.handleUndoClick()},scale:this.state.scale})}},{key:"renderBar",value:function(e,t){var s=this;return Object(X.jsx)(re,{onClick:function(e){return s.handleBar(e)},onHover:function(e){return s.handleBarHover(e)},number:t,height:e,day:this.state.dayOptions[t],current:this.state.dayOptions.findIndex((function(e){return e===s.state.bin.day}))},t)}},{key:"renderNavButton",value:function(e){var t,s,n,i=this;t="next"===e?1:-1,n="next"===e?"next-button":"previous-button";var a=this.state.fileOptions.findIndex((function(e){return"D"+i.state.bin.year+i.state.bin.day.slice(0,2)+i.state.bin.day.slice(3,5)+e.slice(0,3)+e.slice(4,6)+e.slice(7,9)===i.state.bin.file}));if(a===this.state.fileOptions.length-1&&1===t||0===a&&-1===t){var o=this.state.filledDays.findIndex((function(e){return e===i.state.bin.day}));if(o===this.state.filledDays.length-1&&1===t||0===o&&-1===t){var r=this.state.yearOptions.slice().reverse(),c=r.findIndex((function(e){return e===Number(i.state.bin.year)}));return c===r.length-1&&1===t?Object(X.jsx)(be,{text:"Up to Date",className:"up-to-date-button"}):0===c&&-1===t?Object(X.jsx)(be,{text:"No Previous Data",className:"up-to-date-button"}):(s="next"===e?"Next Year   >":"<   Previous Year",Object(X.jsx)(be,{text:s,onClick:function(){return i.getNewYear(r[c+t])},className:n}))}return s="next"===e?"Next Day   >":"<   Previous Day",Object(X.jsx)(be,{text:s,onClick:function(){return i.handleNewDay(i.state.filledDays[o+t])},className:n})}return s="next"===e?"Next File   >":"<   Previous File",Object(X.jsx)(be,{text:s,onClick:function(){return i.handleNewFile(i.state.fileOptions[a+t])},className:n})}},{key:"renderLoader",value:function(){return Object(X.jsx)("img",{src:ue,alt:"Loading targets...",width:"80",loop:"infinite",style:{margin:"0 0 3vw 0"}})}},{key:"returnToClassify",value:function(){this.setState({newFile:"blank"})}},{key:"renderNotFound",value:function(){var e=this;return Object(X.jsx)("div",{className:"main",children:Object(X.jsx)("div",{className:"page",children:Object(X.jsx)("div",{className:"content",children:Object(X.jsxs)("div",{className:"inner-content",children:[Object(X.jsx)("h1",{children:"File Not Found"}),Object(X.jsx)("p",{className:"not-found-message",children:"The IFCB file you're looking for doesn't exist. There may be a typo in the time series, file number, or sort code in the URL."}),Object(X.jsx)("div",{className:"return-button",onClick:function(){return e.returnToClassify()},children:"Return to Classify"})]})})})})}},{key:"clearScrollToIndex",value:function(){this.setState({scrollToIndex:-1})}},{key:"renderPage",value:function(){var e=this,t=new de.c({defaultHeight:10,minHeight:10,fixedWidth:!0}),s=this.state.scrollToIndex,n=function(s){var n=s.index,i=s.key,a=s.parent,o=s.style;return e.state.targets.length<1?Object(X.jsx)("div",{}):Object(X.jsx)(de.b,{cache:t,parent:a,rowIndex:n,children:function(t){var s=t.measure,a=t.registerChild;return Object(X.jsx)("div",{ref:a,style:o,children:Object(X.jsxs)("div",{onLoad:s,className:"row",children:[Object(X.jsx)("div",{className:"row-select",alt:"Select row",onClick:function(){return e.handleRowClick(n)}}),Object(X.jsx)("div",{className:"image-row",children:e.state.rows[n].map((function(t){return Object(X.jsx)(se,{timeseries:e.state.bin.timeseries,file:e.state.bin.file,timestamp:e.state.bin.file,id:t,targetNum:e.state.targets[t].number,class_name:e.state.targets[t].class_name,class_abbr:e.state.targets[t].class_abbr,height:e.state.targets[t].height,width:e.state.targets[t].width,scale:e.state.scale,ifcb:e.state.bin.ifcb,editor:e.state.targets[t].editor,date:e.state.targets[t].date,onClick:function(t){return e.handlePlanktonClick(t)},infoChange:function(t,s,n){return e.disablePlanktonClick(t,s,n)},infoShowing:e.state.infoShowing})}))})]})},i)}},i)};return Object(X.jsx)(de.f,{onScroll:this.clearScrollToIndex,children:function(i){var a=i.height,o=i.isScrolling,r=i.onChildScroll,c=i.scrollTop;return Object(X.jsx)("div",{className:"main",children:Object(X.jsx)("div",{className:"page",children:Object(X.jsx)("div",{className:"content",children:Object(X.jsxs)("div",{className:"inner-content",children:[Object(X.jsx)("h1",{children:"Manual Classifications"}),Object(X.jsxs)("div",{className:"time-controls",children:[e.renderTimeSeriesControl(),e.renderYearControl(),e.renderDayControl(),e.renderFileControl(),e.renderGroup(),e.renderSort(),Object(X.jsxs)("div",{className:"target-jump-container",children:[Object(X.jsx)("form",{onSubmit:e.onTargetJumpSubmit,id:"target-jump-form",className:"target-jump-form",children:Object(X.jsx)("input",{type:"number",className:"target-jump-input",onChange:e.onTargetJumpChange,value:e.entry})}),Object(X.jsx)("p",{className:"time-label jump-label",id:"targetjump_label",children:"Jump to Target"})]}),Object(X.jsx)("div",{className:"show-notes-button",id:"show-notes-button",onClick:function(){return e.showNotes()},children:"Show Notes"}),Object(X.jsx)("div",{className:"hide-info-button",id:"hide-info-button",onClick:function(){return e.hideInfo()},children:"Hide Info"}),e.renderSync(),e.renderDownload(),Object(X.jsx)("div",{className:"round-button histogram",onClick:function(){return e.handleHistogramClick()}}),Object(X.jsx)("div",{className:"scale-down",onClick:function(){return e.handleScale("down")}}),Object(X.jsx)("div",{className:"scale-up",onClick:function(){return e.handleScale("up")}})]}),Object(X.jsxs)("div",{className:"histogram-dropdown-container",id:"histogram_dropdown",children:[Object(X.jsx)("div",{className:"histogram-dropdown",id:"histogram",children:Object(X.jsxs)("div",{className:"timeline",children:[Object(X.jsx)("div",{className:"bars",children:e.state.barHeights.map((function(t,s){return e.renderBar(t,s)}))}),Object(X.jsxs)("div",{className:"axis",children:[Object(X.jsx)("p",{className:"month",children:"Jan"}),Object(X.jsx)("p",{className:"month",children:"Feb"}),Object(X.jsx)("p",{className:"month",children:"Mar"}),Object(X.jsx)("p",{className:"month",children:"Apr"}),Object(X.jsx)("p",{className:"month",children:"May"}),Object(X.jsx)("p",{className:"month",children:"Jun"}),Object(X.jsx)("p",{className:"month",children:"Jul"}),Object(X.jsx)("p",{className:"month",children:"Aug"}),Object(X.jsx)("p",{className:"month",children:"Sep"}),Object(X.jsx)("p",{className:"month",children:"Oct"}),Object(X.jsx)("p",{className:"month",children:"Nov"}),Object(X.jsx)("p",{className:"month",children:"Dec"})]})]})}),Object(X.jsx)("div",{className:"day-option",children:Object(X.jsx)("p",{className:"day-option-text",children:e.state.dayOption})})]}),Object(X.jsx)("div",{className:"note-container",id:"note-dropdown",children:""===e.state.bin.timeseries||""===e.state.bin.file?Object(X.jsx)("div",{}):Object(X.jsx)(ee,{timeseries:e.state.bin.timeseries,ifcb:e.state.bin.ifcb,file:e.state.bin.file,type:"bin",image:"None"})}),Object(X.jsxs)("div",{className:"annotations",children:[e.renderClassMenu(),Object(X.jsxs)("div",{className:"image-grid",id:"image-grid",children:[e.state.loading||e.props.isSaving?e.renderLoader():console.log(),console.log("scroll to index",s),Object(X.jsx)(de.e,{autoHeight:!0,height:a,rowCount:e.state.rows.length,rowHeight:t.rowHeight,rowRenderer:n,isScrolling:o,onScroll:r,scrollTop:c,scrollToAlignment:"start",scrollToIndex:s,width:.72*document.documentElement.clientWidth,images:e.state.rows}),Object(X.jsx)("img",{src:"data:image/png;base64,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",alt:"Back to Top",className:"to-top",id:"to-top",onClick:function(){return e.backToTop()}})]})]}),Object(X.jsx)("div",{className:"navigation-container",children:Object(X.jsxs)("div",{style:{display:"flex"},children:[e.renderNavButton("previous"),e.renderNavButton("next")]})})]})})})})}})}},{key:"render",value:function(){if(this.props.onNotebook)return Object(X.jsx)(u.a,{to:"/notebook/"});if(this.props.onAnalysis)return Object(X.jsx)(u.a,{to:"/analysis/"});if(0!==this.state.newFile.length){if("blank"===this.state.newFile)return Object(X.jsx)(u.a,{to:"/classify/"});var e="/classify/"+this.state.newTimeSeries+"/"+this.state.newFile+"/"+this.state.sortCode;return Object(X.jsx)(u.a,{to:e})}return Object(X.jsxs)("div",{className:"body",children:[Object(X.jsx)("title",{children:"IFCB | "+this.state.bin.file}),Object(X.jsx)(Z,{}),"Not Found"===this.state.bin.file?this.renderNotFound():this.renderPage(),Object(X.jsx)("script",{children:document.addEventListener("scroll",this.flipBackToTop)})]})}}]),s}(i.a.Component),me=Object(f.b)((function(e){return{isSaving:e.classify.isSaving,user:e.auth.user,onNotebook:e.menu.onNotebook,onAnalysis:e.menu.onAnalysis}}),{classifyTarget:function(e,t,s,n){return function(i,a){m.a.put("/edit/target/"+t+"/"+s+"/"+n+"/",e,Q(a)).catch((function(e){return console.log(e)}))}},classifyRow:function(e,t,s,n,i,a){return function(o,r){m.a.put("/edit/targetrow/"+t+"/"+s+"/"+n+"/"+i+"/"+a+"/",e,Q(r)).catch((function(e){return console.log(e)}))}},classifyAll:function(e,t,s,n,i,a){return function(o,r){m.a.put("/edit/all/"+e+"/"+t+"/"+s+"/"+n+"/"+i+"/"+a+"/",Q(r)).catch((function(e){return console.log(e)}))}},save:function(e,t,s,n){return function(i,a){i({type:D}),m.a.put("/save/"+t+"/"+s+"/"+n+"/",e,Q(a)).then((function(e){i({type:T})})).catch((function(e){return console.log(e)}))}},sync:function(e,t,s,n){return function(i,a){i({type:R}),m.a.get("sync/"+e+"/"+t+"/"+s+"/"+n+"/").then((function(e){i({type:L})})).catch((function(e){return console.log(e)}))}}})(je),fe=(s(37),function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"renderOption",value:function(e){var t=this;return Object(X.jsx)("div",{className:"filter-option",onClick:function(){return t.props.applyFilter(t.props.filter,e)},children:e})}},{key:"render",value:function(){var e=this;return Object(X.jsxs)("div",{children:[Object(X.jsxs)("div",{className:"filter-choice",onClick:function(){return e.props.onClick(e.props.filter)},children:[Object(X.jsx)("p",{className:"filter-choice-text",children:this.props.filter}),Object(X.jsx)("p",{className:"filter-choice-plus",id:this.props.filter+"-plus",children:"+"})]}),Object(X.jsx)("div",{className:"filter-dropdown",id:this.props.filter+"-dropdown",children:this.props.options.map((function(t){return e.renderOption(t[e.props.filter])}))})]})}}]),s}(n.Component)),ge=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).onChange=function(e){return n.setState({searchTerms:e.target.value})},n.onSubmit=function(e){e.preventDefault();var t=n.state.appliedFilters.concat([{category:"search",choice:n.state.searchTerms}]);n.setState({appliedFilters:t}),n.props.filterNotebook(t)},n.state={notes:[{id:"",author:"",date:"",entry:"",parent:null,replies:[],timeseries:"",ifcb:"",file:"",image:""}],flags:[],classes:[],searchTerms:"",authors:[{author:""}],bins:[{bin:""}],timeseries:[{timeseries:""}],ifcbs:[{ifcb:""}],types:[{type:"Bin Note"},{type:"Target Note"}],appliedFilters:[]},n}return Object(c.a)(s,[{key:"getNotebook",value:function(e){var t=this;0===e.length?m.a.get("/notebook/").then((function(e){t.setState({notes:e.data,flags:Array(e.data.length).fill("")})})).catch((function(e){return console.log(e)})):this.props.filterNotebook(e)}},{key:"componentDidMount",value:function(){var e=this;this.getNotebook([]),m.a.get("/notebook/filters/").then((function(t){e.setState({authors:t.data.options.authors,bins:t.data.options.bins,timeseries:t.data.options.timeseries,ifcbs:t.data.options.ifcbs})})).catch((function(e){return console.log(e)}))}},{key:"componentDidUpdate",value:function(){this.props.noteChangeFlag&&(this.getNotebook(this.state.appliedFilters),this.props.receiveNotesChange())}},{key:"handleFilterClick",value:function(){document.getElementById("filter_dropdown").classList.toggle("show")}},{key:"handleFilterChoiceClick",value:function(e){document.getElementById(e+"-plus").classList.toggle("rotate-plus"),document.getElementById(e+"-dropdown").classList.toggle("show")}},{key:"handleApplyFilter",value:function(e,t){if(0===this.state.appliedFilters.filter((function(s){return s.category===e&&s.choice===t})).length){var s=this.state.appliedFilters.concat([{category:e,choice:t}]);this.getNotebook(s),this.setState({appliedFilters:s})}}},{key:"handleRemoveFilter",value:function(e){var t=this.state.appliedFilters,s=t.findIndex((function(t){return t===e})),n=t.slice(0,s).concat(t.slice(s+1,t.length));this.setState({appliedFilters:n}),this.getNotebook(n)}},{key:"renderFilterChoice",value:function(e,t){var s=this;return Object(X.jsx)(fe,{filter:e,options:t,onClick:function(e){return s.handleFilterChoiceClick(e)},applyFilter:function(e,t){return s.handleApplyFilter(e,t)}})}},{key:"renderAppliedFilters",value:function(e){var t=this;return Object(X.jsxs)("div",{className:"filter-choice applied",onClick:function(){return t.handleRemoveFilter(e)},children:[Object(X.jsx)("p",{className:"filter-choice-text applied-text",children:e.category.toUpperCase()+": "+e.choice}),Object(X.jsx)("p",{className:"filter-choice-plus applied-text rotate-plus",id:this.props.filter+"-plus",children:"+"})]})}},{key:"render",value:function(){var e=this;if(this.props.onClassify)return Object(X.jsx)(u.a,{to:"/classify"});if(this.props.onAnalysis)return Object(X.jsx)(u.a,{to:"/analysis/"});var t=new de.c({defaultHeight:200,minHeight:200,fixedWidth:!0}),s=this.state.notes,n=this.props.user.username,i=0,a=[];function o(e,t){return Object(X.jsxs)("div",{className:"reply",style:{margin:"0 0 0 "+String(t)+"vw"},children:[Object(X.jsx)(z,{note:e,user:n,timeseries:e.timeseries,ifcb:e.ifcb,file:e.file,type:"bin",image:e.image}),Object(X.jsx)("div",{className:"reply",style:{margin:"0 0 0 "+String(t+1)+"vw"},children:0!==e.replies.length?e.replies.map((function(e){return o(e,t+1)})):Object(X.jsx)("div",{})})]})}function r(e){var r=e.columnIndex,c=e.key,l=e.parent,d=e.rowIndex,u=e.style;0===d&&0===r&&(i=0,a=[]);var h=3*d+r+i;if(h<s.length){if(null!==s[h].parent||a.includes(h))for(;null!==s[h].parent||a.includes(h);)if(i+=1,(h+=1)>=s.length)return;a=a.concat([h]);var p=s[h],b="";"None"!==p.image&&(b="http://128.114.25.154:8888/"+p.timeseries+"/"+p.file+"_"+p.ifcb+"_"+p.image+".jpg");var j=JSON.stringify(p).includes("true");return Object(X.jsx)(de.b,{cache:t,columnIndex:r,parent:l,rowIndex:d,children:function(e){var t=e.measure,s=e.registerChild;return Object(X.jsx)("div",{ref:s,style:u,children:Object(X.jsxs)("div",{className:"notebook-note",onLoad:t,children:[""===b?Object(X.jsx)("div",{}):Object(X.jsx)("img",{src:b,className:"notebook-image",alt:"Target "+p.image}),j?Object(X.jsx)("div",{className:"flag"}):Object(X.jsx)("div",{}),Object(X.jsx)("div",{className:"notebook-entry",children:Object(X.jsxs)("div",{children:["None"===p.image?Object(X.jsx)("div",{className:"notebook-entry",children:Object(X.jsx)("p",{className:"notebook-entry-heading",children:p.timeseries+", "+p.file})}):Object(X.jsxs)("div",{className:"notebook-entry",children:[Object(X.jsx)("p",{className:"notebook-entry-heading",children:"Target "+p.image}),Object(X.jsx)("p",{className:"notebook-entry-subtitle",children:p.timeseries+", "+p.file})]}),Object(X.jsx)(z,{note:p,user:n,timeseries:p.timeseries,ifcb:p.ifcb,file:p.file,type:"bin",image:p.image}),0!==p.replies.length?p.replies.map((function(e){return o(e,1)})):Object(X.jsx)("div",{})]})})]})},c)}},c)}}return Object(X.jsxs)("div",{children:[Object(X.jsx)(Z,{}),Object(X.jsx)("title",{children:"IFCB | Notebook"}),Object(X.jsx)("div",{className:"main",children:Object(X.jsx)("div",{className:"page",children:Object(X.jsxs)("div",{children:[Object(X.jsxs)("div",{className:"notebook-heading",children:[Object(X.jsx)("h1",{className:"notebook-header",children:"Notebook"}),Object(X.jsx)("div",{className:"filter-button",onClick:function(){return e.handleFilterClick()},children:"Filter"})]}),Object(X.jsx)("div",{className:"day-dropdown withmargin",id:"filter_dropdown",children:Object(X.jsxs)("form",{className:"search-form",id:"search-form",onSubmit:this.onSubmit,children:[Object(X.jsxs)("div",{className:"search-bar",children:[Object(X.jsx)("div",{className:"search-icon"}),Object(X.jsx)("input",{type:"text",className:"search-input",name:"searchTerms",onChange:this.onChange,value:this.state.searchTerms})]}),Object(X.jsx)("div",{className:"applied-filters",children:this.state.appliedFilters.map((function(t){return e.renderAppliedFilters(t)}))}),Object(X.jsxs)("div",{className:"filter-buttons",children:[this.renderFilterChoice("author",this.state.authors),this.renderFilterChoice("file",this.state.bins),this.renderFilterChoice("timeseries",this.state.timeseries),this.renderFilterChoice("ifcb",this.state.ifcbs)]})]})}),Object(X.jsx)("div",{className:"notebook-content",children:Object(X.jsx)(de.a,{children:function(s){var n=s.width,i=s.height;return Object(X.jsx)(de.d,{cellRenderer:r,columnCount:3,columnWidth:.29*document.documentElement.clientWidth,rowHeight:t.rowHeight,deferredMeasurementCache:t,rowCount:Math.ceil(e.state.notes.length/3),height:i,width:n,notes:e.props.notes})}})})]})})})]})}}]),s}(n.Component),Oe=Object(f.b)((function(e){return{user:e.auth.user,onClassify:e.menu.onClassify,onAnalysis:e.menu.onAnalysis,noteChangeFlag:e.classify.noteChangeFlag}}),{filterNotebook:function(e,t){return function(s,n){var i=JSON.stringify(e,t);m.a.post("/notebook/applyfilters/",i,{headers:{"Content-Type":"application/json"}},Q(n)).then((function(e){s({type:M,payload:e.data})})).catch((function(e){return console.log(e)}))}},receiveNotesChange:W})(ge),ye=(s(38),function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){return Object(X.jsxs)("div",{className:"analysis-option-container",children:[Object(X.jsx)("h2",{className:"analysis-option-heading",children:this.props.heading}),Object(X.jsx)("p",{className:"analysis-option-description",children:this.props.description}),Object(X.jsx)("div",{className:"analysis-option-button",onClick:this.props.handleClick,children:"Start"})]})}}]),s}(n.Component)),ve=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={analysisOptions:[{heading:"Search",description:"Find any image or collection of images with the help of classification filtering, file look-up, and more."},{heading:"Download by Class",description:"Download a ZIP file containing all, or a desired subset of, images classified as a particular species."}]},n}return Object(c.a)(s,[{key:"renderAnalysisOption",value:function(e){var t;return console.log(e),"Search"===e.heading?(t=this.props.goto_search,console.log("Search")):"Download by Class"===e.heading&&(t=this.props.goto_classdownload,console.log("Download")),Object(X.jsx)(ye,{heading:e.heading,description:e.description,handleClick:t},e.heading)}},{key:"render",value:function(){var e=this;return this.props.onClassify?Object(X.jsx)(u.a,{to:"/classify"}):this.props.onNotebook?Object(X.jsx)(u.a,{to:"/notebook/"}):this.props.onClassDownload?Object(X.jsx)(u.a,{to:"/analysis/classdownload"}):this.props.onSearch?Object(X.jsx)(u.a,{to:"/analysis/search"}):Object(X.jsxs)("div",{children:[Object(X.jsx)(Z,{}),Object(X.jsx)("title",{children:"IFCB | Analysis"}),Object(X.jsx)("div",{className:"main",children:Object(X.jsx)("div",{className:"page",children:Object(X.jsxs)("div",{children:[Object(X.jsx)("div",{className:"notebook-heading",children:Object(X.jsx)("h1",{className:"notebook-header",children:"Analysis"})}),Object(X.jsx)("div",{className:"analysis-options",children:this.state.analysisOptions.map((function(t){return e.renderAnalysisOption(t)}))})]})})})]})}}]),s}(n.Component),xe=Object(f.b)((function(e){return{user:e.auth.user,onClassify:e.menu.onClassify,onNotebook:e.menu.onNotebook,onClassDownload:e.menu.onClassDownload,onSearch:e.menu.onSearch}}),{goto_classdownload:function(){return function(e){console.log("Going to Download"),e({type:E})}},goto_search:function(){return function(e){console.log("Going to Download"),e({type:B})}}})(ve),Ne=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).onChange=function(e){return n.handleNumberChange(e)},n.state={classes:[],classifiers:[],classChoice:"",optionalChoices:{include:[],exclude:[],number:"all"},loading:!1},n}return Object(c.a)(s,[{key:"componentDidMount",value:function(){var e=this;m.a.get("/classes/IFCB104/").then((function(t){e.setState({classes:t.data.map((function(e){return e.display_name}))})})).catch((function(e){return console.log(e)})),m.a.get("/classdownload/classifiers/").then((function(t){e.setState({classifiers:t.data.options.classifiers})})).catch((function(e){return console.log(e)}))}},{key:"handleClassOptionClick",value:function(e){""!==this.state.classChoice&&(document.getElementById(this.state.classChoice+"-text").style.color="#707070",document.getElementById(this.state.classChoice+"-cont").style.backgroundColor="#F8F7F7"),this.setState({classChoice:e}),document.getElementById(e+"-text").style.color="#FFFFFF",document.getElementById(e+"-cont").style.backgroundColor="#16609F"}},{key:"handleClassifierOptionClick",value:function(e){var t=this.state.optionalChoices.include,s=this.state.optionalChoices.exclude;if(document.getElementById(e+"-text").style.color="#707070",document.getElementById(e+"-cont").style.backgroundColor="#F8F7F7",t.includes(e)){var n=t.indexOf(e);t.splice(n,1);var i=s.concat([e]);this.setState({optionalChoices:{include:t,exclude:i,number:this.state.optionalChoices.number}}),document.getElementById(e+"-cont").style.backgroundColor="#7dad0b",document.getElementById(e+"-text").style.color="#FFFFFF"}else if(s.includes(e)){var a=s.indexOf(e);s.splice(a,1),this.setState({optionalChoices:{include:t,exclude:s,number:this.state.optionalChoices.number}}),document.getElementById(e+"-cont").style.backgroundColor="#F8F7F7",document.getElementById(e+"-text").style.color="#707070"}else{var o=t.concat([e]);this.setState({optionalChoices:{include:o,exclude:s,number:this.state.optionalChoices.number}}),document.getElementById(e+"-cont").style.backgroundColor="#16609F",document.getElementById(e+"-text").style.color="#FFFFFF"}}},{key:"handleAllClick",value:function(){document.getElementById("all-cont").style.backgroundColor="#16609F",document.getElementById("all-text").style.color="#FFFFFF",this.setState({optionalChoices:{include:this.state.optionalChoices.include,exclude:this.state.optionalChoices.exclude,number:"all"}})}},{key:"handleNumberChange",value:function(e){this.setState({optionalChoices:{include:this.state.optionalChoices.include,exclude:this.state.optionalChoices.exclude,number:e.target.value}}),document.getElementById("all-cont").style.backgroundColor="#F8F7F7",document.getElementById("all-text").style.color="#707070"}},{key:"download",value:function(){this.setState({loading:!0});var e=this.state.optionalChoices.include.length<1?"None":this.state.optionalChoices.include.join("-"),t=this.state.optionalChoices.exclude.length<1?"None":this.state.optionalChoices.exclude.join("-"),s=this.state.optionalChoices.number;document.getElementById("download-src").src="http://ifcb-classification.herokuapp.com/classdownload/"+this.state.classChoice+"/"+e+"/"+t+"/"+s+"/"}},{key:"loadFrame",value:function(){this.setState({loading:!1}),console.log("Loaded")}},{key:"renderClassOption",value:function(e){var t=this;return Object(X.jsx)("div",{className:"filter-choice download-option",id:e+"-cont",onClick:function(){return t.handleClassOptionClick(e)},children:Object(X.jsx)("p",{className:"filter-choice-text",id:e+"-text",children:e})})}},{key:"renderClassifierOption",value:function(e){var t=this;return Object(X.jsx)("div",{className:"filter-choice download-option",id:e+"-cont",onClick:function(){return t.handleClassifierOptionClick(e)},children:Object(X.jsx)("p",{className:"filter-choice-text",id:e+"-text",children:e})})}},{key:"renderLoader",value:function(){return Object(X.jsx)("img",{src:ue,alt:"Loading targets...",width:"50",loop:"infinite",style:{margin:"2vw 0 0 0"}})}},{key:"render",value:function(){var e=this;return this.props.onClassify?Object(X.jsx)(u.a,{to:"/classify"}):this.props.onNotebook?Object(X.jsx)(u.a,{to:"/notebook/"}):this.props.onAnalysis?Object(X.jsx)(u.a,{to:"/analysis"}):Object(X.jsxs)("div",{children:[Object(X.jsx)(Z,{}),Object(X.jsx)("title",{children:"IFCB | Class Download"}),Object(X.jsx)("div",{className:"main",children:Object(X.jsx)("div",{className:"page",children:Object(X.jsxs)("div",{children:[Object(X.jsx)("div",{className:"notebook-heading",children:Object(X.jsx)("h1",{className:"notebook-header",children:"Analysis"})}),Object(X.jsx)("h2",{className:"analysis-option-heading page-heading",children:"Download by Class"}),Object(X.jsxs)("div",{className:"download-steps",children:[Object(X.jsxs)("div",{className:"download-step-container",children:[Object(X.jsxs)("div",{className:"download-step-heading",children:[Object(X.jsx)("div",{className:"step-icon",children:"1"}),Object(X.jsx)("p",{className:"download-step-text",children:"Choose a classification"})]}),Object(X.jsx)("p",{className:"download-step-subtext",children:"Select one classification name."}),Object(X.jsx)("div",{className:"class-options",children:this.state.classes.map((function(t){return e.renderClassOption(t)}))})]}),Object(X.jsxs)("div",{children:[Object(X.jsxs)("div",{className:"download-step-container classifiers",children:[Object(X.jsxs)("div",{className:"download-step-heading",children:[Object(X.jsx)("div",{className:"step-icon",children:"2"}),Object(X.jsx)("p",{className:"download-step-text",children:"Choose classifiers (optional)"})]}),Object(X.jsx)("p",{className:"download-step-subtext",children:"Click an option once to include it or twice to exclude it."}),Object(X.jsx)("div",{className:"class-options",children:this.state.classifiers.map((function(t){return e.renderClassifierOption(t.editor)}))})]}),Object(X.jsxs)("div",{className:"download-step-container",children:[Object(X.jsxs)("div",{className:"download-step-heading",children:[Object(X.jsx)("div",{className:"step-icon",children:"3"}),Object(X.jsx)("p",{className:"download-step-text",children:"Choose number (optional)"})]}),Object(X.jsx)("p",{className:"download-step-subtext",children:"Enter in the number of images to include."}),Object(X.jsxs)("div",{className:"class-options",children:[Object(X.jsx)("form",{children:Object(X.jsx)("input",{type:"number",id:"number",name:"number",min:"1",onChange:this.onChange,value:this.state.optionalChoices.number})}),Object(X.jsx)("div",{className:"filter-choice download-option",id:"all-cont",children:Object(X.jsx)("p",{className:"filter-choice-text",id:"all-text",onClick:function(){return e.handleAllClick()},children:"All"})})]})]}),Object(X.jsx)("div",{className:"download-button",onClick:function(){return e.download()},children:"Download"}),Object(X.jsx)("div",{style:{display:"none"},children:Object(X.jsx)("iframe",{title:"Download Images",id:"download-src",onload:function(){return e.loadFrame()}})}),Object(X.jsx)("div",{children:this.state.loading?this.renderLoader():Object(X.jsx)("div",{})})]})]})]})})})]})}}]),s}(n.Component),Ce=Object(f.b)((function(e){return{user:e.auth.user,onClassify:e.menu.onClassify,onNotebook:e.menu.onClassify,onAnalysis:e.menu.onAnalysis}}))(Ne),ke=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"showMore",value:function(){document.getElementById(this.props.target.id+"-info").style.display="block",document.getElementById(this.props.target.id+"-preview").style.display="none";var e=Number(this.props.target.height),t=document.getElementById(this.props.target.id+"-info").style.width/e,s={height:String(.056*Number(this.props.target.height)*t)+"vw"};document.getElementById(this.props.target.id+"-image").style=s}},{key:"showLess",value:function(){document.getElementById(this.props.target.id+"-info").style.display="none",document.getElementById(this.props.target.id+"-preview").style.display="flex";var e=String(.056*Number(this.props.target.height))+"vw";document.getElementById(this.props.target.id+"-image").style.height=e}},{key:"render",value:function(){var e=this;if(this.props.bins!==[]){var t=this.props.bins.findIndex((function(t){return t.id===e.props.target.bin})),s=this.props.bins[t],n="http://128.114.25.154:8888/"+s.timeseries+"/"+s.file+"_"+s.ifcb+"_"+this.props.target.number+".jpg";return Object(X.jsxs)("div",{className:"search-result",children:[Object(X.jsx)("img",{src:n,className:"image searh-result-image",alt:this.props.target.class_name,id:this.props.target.id+"-image",style:{height:String(.056*Number(this.props.target.height))+"vw"}}),Object(X.jsx)("div",{className:"id",id:this.props.target.id+"-preview",children:Object(X.jsx)("div",{className:"search-result-plus",id:this.props.target.id+"-plus",onClick:function(){return e.showMore()},children:Object(X.jsx)("p",{className:"plus",children:"+"})})}),Object(X.jsxs)("div",{className:"id description",style:{display:"none"},id:this.props.target.id+"-info",children:[Object(X.jsx)("div",{className:"search-result-plus exit",onClick:function(){return e.showLess()},children:Object(X.jsx)("p",{className:"plus x",children:"X"})}),Object(X.jsx)("p",{className:"description-heading",children:this.props.target.class_name}),Object(X.jsxs)("div",{style:{display:"flex"},children:[Object(X.jsx)("p",{className:"description-label",children:"File: "}),Object(X.jsx)("p",{children:s.file})]}),Object(X.jsxs)("div",{style:{display:"flex"},children:[Object(X.jsx)("p",{className:"description-label",children:"Time Series: "}),Object(X.jsx)("p",{children:s.timeseries})]}),Object(X.jsxs)("div",{style:{display:"flex"},children:[Object(X.jsx)("p",{className:"description-label",children:"IFCB: "}),Object(X.jsx)("p",{children:s.ifcb})]}),Object(X.jsxs)("div",{style:{display:"flex"},children:[Object(X.jsx)("p",{className:"description-label",children:"Target: "}),Object(X.jsx)("p",{children:this.props.target.number})]}),Object(X.jsxs)("div",{style:{display:"flex"},children:[Object(X.jsx)("p",{className:"description-label",children:"Classifer: "}),Object(X.jsx)("p",{children:this.props.target.editor})]}),Object(X.jsxs)("div",{style:{display:"flex"},children:[Object(X.jsx)("p",{className:"description-label",children:"Date: "}),Object(X.jsx)("p",{children:this.props.target.date})]}),Object(X.jsx)("div",{className:"search-redirect-button",onClick:function(){return e.props.redirectToFile(s.timeseries,s.file)},children:"Go to File"})]})]})}return Object(X.jsx)("div",{})}}]),s}(n.Component),Se=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).onChange=function(e){return n.setState({basicSearch:e.target.value})},n.onSubmit=function(e){e.preventDefault(),n.setState({renderable:!1}),document.getElementById("no-results").style.display="none",n.props.searchTargets(n.state.basicSearch),n.setState({targets:n.props.targetSearchResults}),n.props.targetSearchResults===[[]]&&(document.getElementById("no-results").style.display="flex")},n.state={targets:[[]],bins:[[]],basicSearch:"",loading:!1,renderable:!1,redirectInfo:""},n}return Object(c.a)(s,[{key:"componentDidUpdate",value:function(e){var t;e.targetSearchResults!==this.props.targetSearchResults&&(t=void 0!==this.props.targetSearchResults[0].length?this.props.targetSearchResults[0]:this.props.targetSearchResults,this.props.getBins(t.map((function(e){return e.bin}))));e.binsSearchResults!==this.props.binsSearchResults&&this.setState({renderable:!0})}},{key:"redirectToFile",value:function(e,t){this.setState({redirectInfo:{timeseries:e,file:t}})}},{key:"renderTarget",value:function(e){var t=this;return Object(X.jsx)(ke,{target:e,bins:this.props.binsSearchResults[0],redirectToFile:function(e,s){return t.redirectToFile(e,s)}},e.id)}},{key:"renderLoader",value:function(){return Object(X.jsx)("img",{src:ue,alt:"Loading targets...",width:"80",loop:"infinite"})}},{key:"render",value:function(){var e,t,s=this;if(this.props.onClassify)return Object(X.jsx)(u.a,{to:"/classify"});if(this.props.onNotebook)return Object(X.jsx)(u.a,{to:"/notebook/"});if(this.props.onAnalysis)return Object(X.jsx)(u.a,{to:"/analysis"});if(""!==this.state.redirectInfo){var n=this.state.redirectInfo.timeseries,i=this.state.redirectInfo.file;return Object(X.jsx)(u.a,{to:"/classify/"+n+"/"+i+"/AZ"})}return t=0===(e="undefined"!==typeof this.props.targetSearchResults[0].length?this.props.targetSearchResults[0]:this.props.targetSearchResults).length?{display:"flex"}:{display:"none"},Object(X.jsxs)("div",{children:[Object(X.jsx)(Z,{}),Object(X.jsx)("title",{children:"IFCB | Search"}),Object(X.jsx)("div",{className:"main",children:Object(X.jsx)("div",{className:"page",children:Object(X.jsxs)("div",{children:[Object(X.jsx)("div",{className:"notebook-heading",children:Object(X.jsx)("h1",{className:"notebook-header",children:"Analysis"})}),Object(X.jsx)("h2",{className:"analysis-option-heading page-heading",children:"Search"}),Object(X.jsx)("div",{children:Object(X.jsx)("form",{className:"search-form",id:"search-form",onSubmit:this.onSubmit,children:Object(X.jsxs)("div",{className:"search-bar",children:[Object(X.jsx)("div",{className:"search-icon"}),Object(X.jsx)("input",{type:"text",className:"search-input",name:"basicSearch",onChange:this.onChange,value:this.state.basicSearch})]})})}),Object(X.jsxs)("div",{children:[Object(X.jsx)("p",{className:"no-results",id:"no-results",style:t,children:"No results"}),Object(X.jsx)("div",{className:"image-grid",children:this.state.loading?this.renderLoader():this.state.renderable?e.map((function(e){return s.renderTarget(e)})):Object(X.jsx)("div",{})})]})]})})})]})}}]),s}(n.Component),we=Object(f.b)((function(e){return{user:e.auth.user,onClassify:e.menu.onClassify,onNotebook:e.menu.onClassify,onAnalysis:e.menu.onAnalysis,targetSearchResults:e.classify.targetSearchResults,binsSearchResults:e.classify.binsSearchResults}}),{searchTargets:function(e){return function(t,s){var n=JSON.stringify(e);m.a.post("/searchtargets/",n,{headers:{"Content-Type":"application/json"}},Q(s)).then((function(e){t({type:J,payload:(e.data.length,e.data)})})).catch((function(e){return console.log(e)}))}},getBins:function(e){return function(t,s){var n=JSON.stringify(e);m.a.post("/bins/",n,{headers:{"Content-Type":"application/json"}},Q(s)).then((function(e){t({type:Y,payload:e.data})})).catch((function(e){return console.log(e)}))}}})(Se),Ae=s(29),Fe=(s(100),function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={username:"",password:"",attempted:!1},e.onSubmit=function(t){t.preventDefault(),e.props.login(e.state.username,e.state.password),e.setState({attempted:!0})},e.onChange=function(t){var s;return e.setState((s={},Object(Ae.a)(s,t.target.name,t.target.value),Object(Ae.a)(s,"attempted",!1),s))},e}return Object(c.a)(s,[{key:"render",value:function(){if(document.getElementById("error")){var e=document.getElementById("error").classList;if(this.props.isAuthenticated)return Object(X.jsx)(u.a,{push:!0,to:this.props.location});this.props.loginFailed&&this.state.attempted?e.contains("show")||e.add("show"):e.contains("show")&&e.remove("show")}var t=this.state,s=t.username,n=t.password;return Object(X.jsxs)("div",{className:"body",children:[Object(X.jsx)("title",{children:"IFCB | Login"}),Object(X.jsxs)("main",{className:"login-main",children:[Object(X.jsxs)("div",{className:"header",children:[Object(X.jsx)("h3",{children:"IFCB Classification"}),Object(X.jsxs)("ul",{className:"navbar",children:[Object(X.jsx)("li",{className:"nav-item",children:Object(X.jsx)(h.b,{to:"/register",className:"nav-link",children:"Register"})}),Object(X.jsx)("li",{className:"nav-item",children:Object(X.jsx)(h.b,{to:"/login",className:"nav-link",children:"Login"})})]})]}),Object(X.jsx)("div",{className:"main-container",children:Object(X.jsxs)("div",{className:"sub-container",children:[Object(X.jsx)("h2",{children:"Welcome back."}),Object(X.jsx)("p",{className:"auth-text",children:"Sign in to start classifying."}),Object(X.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(X.jsxs)("div",{className:"form-group",children:[Object(X.jsx)("input",{type:"text",className:"form-control",name:"username",onChange:this.onChange,value:s}),Object(X.jsx)("label",{children:"Username"})]}),Object(X.jsxs)("div",{className:"form-group",children:[Object(X.jsx)("input",{type:"password",className:"form-control",name:"password",onChange:this.onChange,value:n}),Object(X.jsx)("label",{children:"Password"})]}),Object(X.jsxs)("div",{className:"form-group",children:[Object(X.jsx)("p",{className:"error-message",id:"error",children:"Incorrect username or password."}),Object(X.jsx)("button",{type:"submit",className:"login-submit",children:"Login"})]})]})]})})]})]})}}]),s}(n.Component)),Ie=Object(f.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,loginFailed:e.auth.loginFailed,location:e.auth.location}}),{login:function(e,t){return function(s){s({type:x});var n=JSON.stringify({username:e,password:t});m.a.post("/api/auth/login",n,{headers:{"Content-Type":"application/json"}}).then((function(e){s({type:N,payload:e.data})})).catch((function(e){s({type:C})}))}}})(Fe),Ee=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={username:"",email:"",password:"",password2:""},e.onSubmit=function(t){t.preventDefault();var s=e.state,n=s.username,i=s.email,a=s.password;if(a!==s.password2)console.log("Passwords do not match.");else{var o={username:n,email:i,password:a};e.props.register(o)}},e.onChange=function(t){return e.setState(Object(Ae.a)({},t.target.name,t.target.value))},e}return Object(c.a)(s,[{key:"render",value:function(){if(this.props.isAuthenticated)return Object(X.jsx)(u.a,{to:"/classify"});var e=this.state,t=e.username,s=e.email,n=e.password,i=e.password2;return Object(X.jsxs)("div",{className:"body",children:[Object(X.jsx)("title",{children:"IFCB | Register"}),Object(X.jsxs)("main",{className:"register-main",children:[Object(X.jsxs)("div",{className:"header",children:[Object(X.jsx)("h3",{children:"IFCB Classification"}),Object(X.jsxs)("ul",{className:"navbar",children:[Object(X.jsx)("li",{className:"nav-item",children:Object(X.jsx)(h.b,{to:"/register",className:"nav-link",children:"Register"})}),Object(X.jsx)("li",{className:"nav-item",children:Object(X.jsx)(h.b,{to:"/login",className:"nav-link",children:"Login"})})]})]}),Object(X.jsx)("div",{className:"main-container",children:Object(X.jsxs)("div",{className:"sub-container",children:[Object(X.jsx)("h2",{children:"Welcome to Manual Classification."}),Object(X.jsx)("p",{className:"auth-text",children:"Create an account to start classifying."}),Object(X.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(X.jsxs)("div",{className:"form-group",children:[Object(X.jsx)("input",{type:"text",className:"form-control",name:"username",onChange:this.onChange,value:t}),Object(X.jsx)("label",{children:"Username"})]}),Object(X.jsxs)("div",{className:"form-group",children:[Object(X.jsx)("input",{type:"text",className:"form-control",name:"email",onChange:this.onChange,value:s}),Object(X.jsx)("label",{children:"Email"})]}),Object(X.jsxs)("div",{className:"form-group",children:[Object(X.jsx)("input",{type:"password",className:"form-control",name:"password",onChange:this.onChange,value:n}),Object(X.jsx)("label",{children:"Password"})]}),Object(X.jsxs)("div",{className:"form-group",children:[Object(X.jsx)("input",{type:"password",className:"form-control",name:"password2",onChange:this.onChange,value:i}),Object(X.jsx)("label",{children:"Confirm Password"})]}),Object(X.jsx)("div",{className:"form-group",children:Object(X.jsx)("button",{type:"submit",className:"register-submit",children:"Create Account"})})]})]})})]})]})}}]),s}(n.Component),Be=Object(f.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{register:function(e){var t=e.username,s=e.password,n=e.email;return function(e){var i=JSON.stringify({username:t,email:n,password:s});m.a.post("/api/auth/register",i,{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:S,payload:t.data})})).catch((function(t){e({type:w})}))}}})(Ee),Te=s(4),De=s(58),Le=s.p+"static/media/loader.a069fadb.GIF",Re=["component","auth"],He=Object(f.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,s=e.auth,n=Object(De.a)(e,Re);return Object(X.jsx)(u.b,Object(Te.a)(Object(Te.a)({},n),{},{render:function(e){return window.location.pathname,s.isLoading?Object(X.jsx)("img",{src:Le,alt:"Loading...",width:"80",loop:"infinite"}):s.isAuthenticated?Object(X.jsx)(t,Object(Te.a)({},e)):Object(X.jsx)(u.a,{to:"/login"})}}))})),Pe=s(31),Ue=s(55),Ge=s(56),Me={token:localStorage.getItem("token"),isAuthenticated:null,loginFailed:!1,registerFailed:!1,isLoading:!1,user:null,location:window.location.pathname,locationCount:1},Je={onClassify:!1,onNotebook:!1,onAnalysis:!1,onClassDownload:!1,onSearch:!1},Ye={isSaving:!1,isSyncing:!1,noteChangeFlag:!0,replyChangeFlag:!1,notes:[],targetSearchResults:[[]],binsSearchResults:[[]]},Qe=Object(Pe.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(Te.a)(Object(Te.a)({},e),{},{isLoading:!0});case O:return Object(Te.a)(Object(Te.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.payload});case y:return Object(Te.a)(Object(Te.a)({},e),{},{location:t.payload});case x:return Object(Te.a)(Object(Te.a)(Object(Te.a)({},e),t.payload),{},{loginFailed:!1});case N:case S:return localStorage.setItem("token",t.payload.token),Object(Te.a)(Object(Te.a)(Object(Te.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case v:case k:case w:return localStorage.removeItem("token"),Object(Te.a)(Object(Te.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1,registerFailed:!0});case w:return localStorage.removeItem("token"),Object(Te.a)(Object(Te.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1});case C:return localStorage.removeItem("token"),Object(Te.a)(Object(Te.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1,loginFailed:!0});default:return e}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(Te.a)(Object(Te.a)({},e),{},{onClassify:!0,onNotebook:!1,onAnalysis:!1,onClassDownload:!1,onSearch:!1});case F:return Object(Te.a)(Object(Te.a)({},e),{},{onClassify:!1,onNotebook:!0,onAnalysis:!1,onClassDownload:!1,onSearch:!1});case I:return Object(Te.a)(Object(Te.a)({},e),{},{onClassify:!1,onNotebook:!1,onAnalysis:!0,onClassDownload:!1,onSearch:!1});case E:return Object(Te.a)(Object(Te.a)({},e),{},{onClassify:!1,onNotebook:!1,onAnalysis:!1,onClassDownload:!0,onSearch:!1});case B:return Object(Te.a)(Object(Te.a)({},e),{},{onClassify:!1,onNotebook:!1,onAnalysis:!1,onClassDownload:!1,onSearch:!0});default:return e}},classify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(Te.a)(Object(Te.a)({},e),{},{isSaving:!0});case T:return Object(Te.a)(Object(Te.a)({},e),{},{isSaving:!1});case R:return Object(Te.a)(Object(Te.a)({},e),{},{isSyncing:!0});case L:return Object(Te.a)(Object(Te.a)({},e),{},{isSyncing:!1});case H:return Object(Te.a)(Object(Te.a)({},e),{},{noteChangeFlag:!0});case P:return Object(Te.a)(Object(Te.a)({},e),{},{noteChangeFlag:!1});case U:return Object(Te.a)(Object(Te.a)({},e),{},{noteChangeFlag:!0});case G:return Object(Te.a)(Object(Te.a)({},e),{},{noteChangeFlag:!1});case M:return Object(Te.a)(Object(Te.a)({},e),{},{notes:t.payload});case J:return Object(Te.a)(Object(Te.a)({},e),{},{targetSearchResults:typeof t.payload===Array?t.payload:[t.payload]});case Y:return Object(Te.a)(Object(Te.a)({},e),{},{binsSearchResults:typeof t.payload===Array?t.payload:[t.payload]});default:return e}}}),Xe=[Ue.a],qe=Object(Pe.createStore)(Qe,{},Object(Ge.composeWithDevTools)(Pe.applyMiddleware.apply(void 0,Xe))),Ze=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"componentDidMount",value:function(){qe.dispatch((function(e,t){e({type:g}),m.a.get("/api/auth/user",Q(t)).then((function(t){e({type:O,payload:t.data})})).catch((function(t){e({type:v})}))}))}},{key:"render",value:function(){return Object(X.jsx)(f.a,{store:qe,children:Object(X.jsx)(h.a,{children:Object(X.jsxs)(u.d,{children:[Object(X.jsx)(He,{exact:!0,path:"/classify/:timeseries/:file/:sortcode",component:Object(u.g)(me)},window.location.pathname),Object(X.jsx)(He,{exact:!0,path:"/classify/",component:me}),Object(X.jsx)(He,{exact:!0,path:"/notebook/",component:Oe}),Object(X.jsx)(He,{exact:!0,path:"/analysis",component:xe}),Object(X.jsx)(He,{exact:!0,path:"/analysis/classdownload",component:Ce}),Object(X.jsx)(He,{exact:!0,path:"/analysis/search",component:we}),Object(X.jsx)(u.b,{exact:!0,path:"/register",component:Be}),Object(X.jsx)(u.b,{exact:!0,path:"/login",component:Ie}),Object(X.jsx)(He,{exact:!0,path:"/",component:me})]})})})}}]),s}(n.Component),_e=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,102)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;s(e),n(e),i(e),a(e),o(e)}))};o.a.render(Object(X.jsx)(Ze,{}),document.getElementById("root")),_e()},28:function(e,t,s){},37:function(e,t,s){},38:function(e,t,s){},63:function(e,t,s){}},[[101,1,2]]]);
//# sourceMappingURL=main.52295f1e.chunk.js.map